{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/store/index.ts","webpack:///./src/reader/points.ts","webpack:///./src/helper.ts","webpack:///./src/components/Landmarks.vue?78bd","webpack:///./src/components/SubsetSelection.vue?d624","webpack:///./src/components/RenderControls.vue?f877","webpack:///./src/components/ShapeViewer/viewer.vue?a4cd","webpack:///./src/components/DeepSSMTab.vue?1312","webpack:///./src/components/TaskInfo.vue?4984","webpack:///./src/components/Analysis/Charts.vue?b28c","webpack:///./src/reader/mapper.ts","webpack:///./src/store/methods.ts","webpack:///./src/App.vue?1025","webpack:///./src/components/ProjectForm.vue?4112","webpack:///./src/views/Main.vue","webpack:///./src/components/ShapeViewer/viewer.vue","webpack:///./src/components/ShapeViewer/widgetSync.js","webpack:///./src/components/ShapeViewer/imageSync.js","webpack:///./src/components/ShapeViewer/methods.js","webpack:///./src/components/ShapeViewer/scripting.js","webpack:///./src/components/ShapeViewer/scripting.js?9889","webpack:///./src/components/ShapeViewer/viewer.vue?3da1","webpack:///./src/components/DataList.vue","webpack:///./src/components/DataList.vue?fa62","webpack:///./src/components/DataList.vue?82a8","webpack:///./src/components/DataList.vue?2e46","webpack:///./src/components/RenderControls.vue","webpack:///./src/components/RenderControls.vue?bc64","webpack:///./src/components/RenderControls.vue?b19a","webpack:///./src/components/RenderControls.vue?13f6","webpack:///./src/components/TabForm.vue","webpack:///./src/components/TabForm.vue?2501","webpack:///./src/components/TabForm.vue?7a3d","webpack:///./src/components/Analysis/AnalysisTab.vue","webpack:///./src/components/Analysis/Charts.vue","webpack:///./src/components/Analysis/charts.ts","webpack:///./src/components/Analysis/Charts.vue?d5a9","webpack:///./src/components/Analysis/util.ts","webpack:///./src/components/Analysis/Charts.vue?82ee","webpack:///./src/components/Analysis/Charts.vue?b98e","webpack:///./src/components/Analysis/Groups.vue","webpack:///./src/components/Analysis/Groups.vue?f5a4","webpack:///./src/components/Analysis/Groups.vue?b0c0","webpack:///./src/components/Analysis/Groups.vue?b03a","webpack:///./src/components/Analysis/Particles.vue","webpack:///./src/components/Analysis/Particles.vue?f449","webpack:///./src/components/Analysis/Particles.vue?35fe","webpack:///./src/components/Analysis/Particles.vue?3418","webpack:///./src/components/Analysis/PCA.vue","webpack:///./src/components/Analysis/PCA.vue?3de5","webpack:///./src/components/Analysis/PCA.vue?1db3","webpack:///./src/components/Analysis/PCA.vue?c111","webpack:///./src/components/Analysis/AnalysisTab.vue?df90","webpack:///./src/components/Analysis/AnalysisTab.vue?403f","webpack:///./src/components/Analysis/AnalysisTab.vue?55ad","webpack:///./src/components/InfoTab.vue","webpack:///./src/components/Landmarks.vue","webpack:///src/components/Landmarks.vue","webpack:///./src/components/Landmarks.vue?7787","webpack:///./src/components/Landmarks.vue?d419","webpack:///./src/components/Constraints.vue","webpack:///src/components/Constraints.vue","webpack:///./src/components/Constraints.vue?80b7","webpack:///./src/components/Constraints.vue?a62f","webpack:///./src/components/InfoTab.vue?704b","webpack:///./src/components/InfoTab.vue?18e9","webpack:///./src/components/InfoTab.vue?9a70","webpack:///./src/components/DeepSSMTab.vue","webpack:///./src/components/DeepSSMTab.vue?d6c4","webpack:///./src/components/DeepSSMTab.vue?cc7e","webpack:///./src/components/DeepSSMTab.vue?2a94","webpack:///./src/views/Main.vue?f516","webpack:///./src/views/Main.vue?f4eb","webpack:///./src/views/Main.vue?5d79","webpack:///./src/views/ProjectSelect.vue","webpack:///./src/components/ProjectForm.vue","webpack:///src/components/ProjectForm.vue","webpack:///./src/components/ProjectForm.vue?362f","webpack:///./src/components/ProjectForm.vue?5873","webpack:///./src/views/ProjectSelect.vue?0659","webpack:///./src/views/ProjectSelect.vue?0525","webpack:///./src/views/ProjectSelect.vue?2e31","webpack:///./src/views/DatasetSelect.vue","webpack:///./src/components/SubsetSelection.vue","webpack:///./src/components/SubsetSelection.vue?47cd","webpack:///./src/components/SubsetSelection.vue?ee6d","webpack:///./src/components/SubsetSelection.vue?5780","webpack:///./src/views/DatasetSelect.vue?377f","webpack:///./src/views/DatasetSelect.vue?6596","webpack:///./src/views/DatasetSelect.vue?ee97","webpack:///./src/router.ts","webpack:///./src/components/Constraints.vue?b6d5","webpack:///./src/components/TabForm.vue?cd9c","webpack:///./src/views/Main.vue?58db","webpack:///./src/reader/shape.ts","webpack:///./src/reader/image.ts","webpack:///./src/api/auth.ts","webpack:///./src/components/NavBar.vue?f7c6","webpack:///./src/components/Analysis/AnalysisTab.vue?5214","webpack:///./src/components/TaskInfo.vue","webpack:///./src/components/TaskInfo.vue?b628","webpack:///./src/components/TaskInfo.vue?42e0","webpack:///./src/components/TaskInfo.vue?b0e7","webpack:///./src/components/Analysis/PCA.vue?f464","webpack:///./src/api/rest.ts","webpack:///./src/App.vue","webpack:///./src/components/NavBar.vue","webpack:///./src/components/FilterSearch.vue","webpack:///./src/components/FilterSearch.vue?130e","webpack:///./src/components/FilterSearch.vue?b90a","webpack:///./src/components/FilterSearch.vue?d392","webpack:///./src/components/NavBar.vue?ca92","webpack:///./src/components/NavBar.vue?908c","webpack:///./src/components/NavBar.vue?bca4","webpack:///src/App.vue","webpack:///./src/App.vue?2ef9","webpack:///./src/App.vue?315a","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./src/components/TabForm.vue?0e2a","webpack:///./src/store/constants.ts","webpack:///./src/reader/constraints.ts","webpack:///./src/components/DataList.vue?8ed4","webpack:///./src/views/DatasetSelect.vue?b731"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","loadingState","ref","renderLoading","currentError","vtkInstance","allDatasets","selectedDataset","allProjectsForDataset","selectedProject","editingProject","allSubjectsForDataset","allDataObjectsInDataset","anatomies","selectedDataObjects","orientationIndicator","vtkAnnotatedCubeActor","newInstance","particleSize","reconstructionsForOriginalDataObjects","particlesForOriginalDataObjects","groomedShapesForOriginalDataObjects","analysis","analysisFilesShown","currentAnalysisParticlesFiles","meanAnalysisParticlesFiles","layersShown","goodBadAngles","goodBadMaxAngle","showGoodBadParticlesMode","showDifferenceFromMeanMode","cachedMarchingCubes","cachedParticleComparisonVectors","cachedParticleComparisonColors","landmarkInfo","landmarksLoading","landmarkSize","allSetLandmarks","currentLandmarkPlacement","constraintInfo","constraintsLoading","constraintsShown","allSetConstraints","currentConstraintPlacement","constraintPaintRadius","constraintPaintExclusion","currentTasks","jobProgressPoll","analysisExpandedTab","analysisAnimate","imageViewMode","imageViewIntersectMode","imageViewIntersectCropMode","imageViewAxis","imageViewSlices","x","y","z","imageViewSliceRanges","imageViewCroppedSliceRanges","imageViewWindow","imageViewWindowRange","imageViewLevel","imageViewLevelRange","deepSSMResult","deepSSMDataTab","deepSSMAugDataShown","deepSSMLoadingData","groomFormData","optimizationFormData","uniformScale","deepSSMErrorGlobalRange","deepSSMSamplePage","url","vtkPolyData","resp","fetch","text","lines","trim","split","pointArray","map","f","parseFloat","flat","points","Float32Array","from","polyData","getPoints","setData","groupBy","xs","reduce","rv","shortDateString","date","shortFileName","file","getDistance","one","two","signed","dimSum","squaredDimSum","Math","sqrt","hexToRgb","hex","exec","parseInt","rgbToHex","rgb","components","toString","join","distance","a","b","pow","async","parseCSVFromURL","then","response","splitstring","row","isNaN","generateMapper","shape","mapper","vtkMapper","getClassName","setInputData","console","error","resetState","undefined","loadDataset","_selectedDataset$valu","id","datasetId","getDataset","getAllDatasets","searchText","router","currentRoute","params","getDatasets","sort","created","loadProjectForDataset","refreshProject","projectId","proj","getProjectFileContents","contents","file_contents","spawnJobProgressPoll","loadProjectsForDataset","getProjectsForDataset","selectProject","find","project","loadParticlesForObject","type","_selectedProject$valu","particles","getOptimizedParticlesForDataObject","loadGroomedShapeForObject","_selectedProject$valu2","groomed","getGroomedShapeForDataObject","loadReconstructedSamplesForProject","_selectedProject$valu3","getReconstructedSamplesForProject","loadDeepSSMDataForProject","results","Promise","all","getDeepSSMResultForProject","getDeepSSMAugPairsForProject","getDeepSSMTrainingPairsForProject","getDeepSSMTrainingImagesForProject","getDeepSSMTestImagesForProject","aug_pairs","training_pairs","images","test_pairs","jobAlreadyDone","action","_layers$value","_layers$value2","layer","layers","available","spawnJob","payload","_selectedProject$valu4","_await$groomProject","_await$optimizeProjec","_await$analyzeProject","_await$deepssmRunProj","filter","groomProject","optimizeProject","analyzeProject","deepssmRunProject","clearInterval","setInterval","pollJobProgress","getTasksForProject","tasks","refreshedTasks","forEach","task","abort","percent_complete","fetchJobResults","taskName","refreshedProject","layerName","loadFunction","last_cached_analysis","good_bad_angles","dataObject","fromEntries","entries","cachedLabel","includes","abortTask","switchTab","tabName","calculateComparisons","currentPoints","meanPoints","vectorValues","colorValues","currentParticle","meanParticle","pointLocations","getInputData","getData","normals","getPointData","getArrayByName","Array","keys","colorVal","location","normal","nearbyParticles","nearestParticleIndex","weight","cacheComparison","particleComparisonKey","cacheAllComparisons","comparisons","cachePrep","g","domain","compareToPoints","pointsReader","currentMesh","imageReader","particleUrl","current","compareTo","isShapeShown","subjectID","some","subject","anatomy_type","replace","toggleSubjectShown","getWidgetInfo","item","subjectName","widgetID","getLandmarkLocation","setLandmarkLocation","reassignLandmarkIDsByIndex","reassignedIds","info","index","assign","subjectRecords","domainRecords","lId","lData","reassignLandmarkNumSetValues","reassign","newInfo","lInfo","newNumSet","num_set","getLandmarks","_selectedProject$valu5","landmarks","landmarks_info","color","COLORS","landmarksObject","pointData","locationData","locations","lInfos","getConstraintLocation","setConstraintLocation","reassignConstraintNumSetValues","reassignConstraintIDsByIndex","cId","cData","cInfo","getConstraints","_selectedProject$valu6","constraints","_constraintsObject$an","constraintsObject","constraintsData","constraintsReader","constraintType","newConstraintsOfType","existingConstraintsOfType","staticClass","attrs","scopedSlots","fn","_b","callback","tab","expression","_vm","_c","_v","on","refreshRender","style","renderAreaStyle","rows","staticRenderFns","render","_self","_setup","directives","showColorScale","_e","manipulators","dataKDTrees","shapeKDTrees","seedWidgets","planeWidgets","paintWidgets","initializeWidgets","this","vtk","widgetManagers","renderers","label","renderer","wm","vtkWidgetManager","setRenderer","disablePicking","getActors","actor","_actor$getMapper","getMapper","getFieldData","vtkPickerManipulator","getPicker","addPickList","existingWidgets","values","ws","w","widgetHandle","addWidget","setScaleInPixels","onEndInteractionEvent","seedWidgetEndInteraction","initializeConstraintColormap","stylePlaneWidget","planeWidgetEndInteraction","landmarkInfoUpdated","constraintInfoUpdated","setLookupTable","ctfun","vtkColorTransferFunction","defaultColor","getProperty","getColor","addRGBPoint","setMappingRange","updateRange","setColorByArrayName","inputData","allPoints","colorArray","vtkDataArray","getNumberOfPoints","addArray","getWidgetManager","getManipulator","getDataKDTree","field","scalarPoints","kdTree","getShapeKDTree","shapeData","treePoints","getSeedWidget","createSeedWidget","getPlaneWidget","createPlaneWidget","getPaintWidget","createPaintWidget","manipulator","widgetManager","widget","vtkSeedWidget","setManipulator","pickList","getPickList","bounds","getBounds","vtkImplicitPlaneWidget","placeWidget","setPlaceFactor","getRepresentations","setLabels","vtkPaintWidget","paintWidgetEndInteraction","setHandleSizeRatio","setAxisScale","setRepresentationStyle","static","outline","opacity","subjectWidgets","shapeWidgets","landmarkCoord","getWidgetState","getMoveHandle","getOrigin","releaseFocus","previousLocation","v","widgetState","origin","getNormal","updateConstraintColors","tree","numPoints","getPoint","scalars","fill","paintedPoints","getTrailList","state","currentPoint","nearest","pointIndex","findIndex","validWidgets","records","handle","setOrigin","getColor3","setColor3","getScale1","setScale1","labelRecords","shapeRecords","seedWidget","removeWidget","landmarkSizeUpdated","currentLandmarkPlacementUpdated","newPlacement","grabFocus","_cData$data","_cData$data2","setNormal","setVisibility","planeWidget","constraintsShownUpdated","currentConstraintPlacementUpdated","setRadius","getHandle","setVisible","setActive","shapeManipulators","allPointColors","Uint8Array","dot","point","pointColor","getValue","dotProduct","setValue","currentPointObj","nearests","modified","watchWidgetStates","watch","_","debounce","slices","createSlice","sliceActor","vtkImageSlice","imageMapper","vtkImageMapper","cutPlane","vtkPlane","cutter","vtkCutter","cutMapper","cutActor","vtkActor","cropFilter","vtkImageCropFilter","particleFilter","vtkCalculator","filteredParticleSphere","vtkSphereSource","filteredParticleActor","filteredParticleMapper","vtkGlyph3DMapper","setMapper","addActor","setCutFunction","setInputConnection","getOutputPort","cutProperty","setRepresentation","vtkProperty","Representation","WIREFRAME","setLighting","setColor","setLineWidth","setFormula","getArrays","input","FieldDataTypes","COORDINATE","output","POINT","dataType","attribute","AttributeTypes","SCALARS","numberOfComponents","evaluate","arraysIn","arraysOut","coords","visible","imageBounds","currentAxis","axisBounds","getSlicingMode","sliceRange","currentSlice","numSlices","sliceThickness","slicePosition","axisCoord","setScaleModeToScaleByMagnitude","setScaleFactor","glyphSize","setScaleArray","updateSlice","cameraPosition","cameraDirection","cameraViewUp","camera","getActiveCamera","center","getCenter","setSlicingMode","setISlice","setJSlice","setKSlice","setPosition","setDirectionOfProjection","setViewUp","updateCuttingPlane","resetCamera","updateIntersection","intersectionShape","fullBounds","fullSlices","padding","cropToBounds","cropToProportions","minIndex","floor","maxIndex","padValue","cropToSlices","axis","min","max","setCroppingPlanes","reset","_particleFilter$getIn","sliceBounds","getBoundsForSlice","updateGlyphSize","addImage","imageData","setColorWindow","setColorLevel","dataRange","getScalars","getRange","extent","getExtent","imageViewIntersectModeUpdated","imageViewModeUpdated","resize","imageViewAxisUpdated","imageViewSliceUpdated","imageViewWindowUpdated","imageViewLevelUpdated","watchImageStates","deep","resetImageSlices","resetIntersections","GOOD_BAD_COLORS","widgetSync","imageSync","$nextTick","renderWindow","updateSize","el","$refs","width","height","getBoundingClientRect","openglRenderWindow","setSize","newOrientationCube","interactor","vtkOrientationMarkerWidget","viewportSize","minPixelSize","maxPixelSize","viewportCorner","Corners","TOP_RIGHT","initializeCameras","initialCameraStates","position","viewUp","getReferenceByName","getCameraDelta","positionDelta","viewUpDelta","targetCamera","rendererIndex","indexOf","targetRendererID","initialCameraPosition","initialCameraViewUp","newCameraPosition","newCameraViewUp","num","applyCameraDelta","rendererID","old","resetCameraClippingRange","syncCameras","animation","targetRenderer","pokedRenderer","createColorFilter","domainIndex","goodBad","_analysisFilesShown$v","addPoints","size","source","thetaResolution","SPHERE_RESOLUTION","phiResolution","scaleMode","SCALE_BY_CONSTANT","scaleFactor","pointMappers","addShapes","shapes","shapeDatas","_analysisFilesShown$v2","vtkShapesByType","numLayers","cacheLabel","colorMode","ColorMode","MAP_SCALARS","scalarMode","ScalarMode","USE_POINT_FIELD_DATA","marchingCube","vtkImageMarchingCubes","contourValue","computeNormals","mergePoints","getOutputData","showDifferenceFromMean","normalizeRange","normalizedData","normalizedArray","lookupTable","setOpacity","metaData","targetMetaData","mean","vectorMapper","vectorActor","vectorSource","vectorShape","vtkArrowSource","verts","Uint32Array","orientations","colors","dx","dy","dz","getVerts","addInputConnection","setOrientationArray","prepareColorScales","canvasDiv","titleDiv","colorsTitle","labelsDiv","colorsLabels","innerHTML","canvas","document","createElement","right","appendChild","labels","range","prepareColorScale","y1","x2","y2","grid","top","arr","zIndex","context","getContext","willReadFrequently","pixelsArea","getImageData","colorsData","getUint8Table","getMappingRange","set","putImageData","labelProportions","display","flexDirection","justifyContent","alignItems","textAlign","child","round","prepareLabelCanvas","labelCanvas","labelCanvasContext","clientWidth","clientHeight","clearRect","font","fillStyle","populateRenderer","pointSet","vtkCamera","setActiveCamera","renderGrid","disable","removeRenderer","orientationCube","setEnabled","newRenderer","vtkRenderer","background","fillText","setViewport","addRenderer","columns","setParentRenderer","enable","setTimeout","enablePicking","props","required","Number","currentTab","String","drawerWidth","computed","nx","ny","xmin","ymin","xmax","ymax","beforeDestroy","unbindEvents","delete","setContainer","vtkRenderWindow","vtkOpenGLRenderWindow","addView","vtkRenderWindowInteractor","setView","initialize","setInteractorStyle","vtkInteractorStyleTrackballCamera","onAnimation","applyColorMap","vtkColorMaps","getPresetByName","mounted","bindEvents","updated","methods","component","model","$$v","selectedAnatomies","nativeOn","$event","selectedSubjects","$set","headers","dataset","autoSelectAll","Boolean","default","autoSelectOne","setup","cellClass","fetchData","getSubjectsForDataset","getDataObjectsForSubject","dataObj","assignments","subjectIds","updateSelectedObjects","selectedObjectsUpdated","uniqueAnatomies","Set","uniqueSubjects","JSON","stringify","onMounted","staticStyle","showAnalysisOptions","captureThumbnail","resetView","imageViewSliceRange","changeImageViewSlice","setDefaultStyle","fontStyle","fontFamily","fontColor","faceColor","faceRotation","edgeThickness","edgeColor","resolution","axisSystemOptions","xPlus","xMinus","yPlus","yMinus","zPlus","zMinus","axes","axisSystem","changeAxisSystem","newSystemValue","newSystem","system","setXPlusFaceProperty","setXMinusFaceProperty","setYPlusFaceProperty","setYMinusFaceProperty","setZPlusFaceProperty","setZMinusFaceProperty","emit","thumbnailTarget","encoded","captureImages","thumbnail","setDatasetThumbnail","setProjectThumbnail","showSamplePageSelector","maxSamplePage","_deepSSMResult$value","ceil","DEEPSSM_SAMPLES_PER_PAGE","showUniformScaleOption","imageIntersectAllowed","imageViewSlice","changeSamplePage","page","onChangeSamplePage","form","formValid","formSchema","_u","formData","fullKey","resetForm","openTab","currentlyCaching","charts","_l","chart","title","generateChart","lineChartOptions","decimalPlaces","roundTo","textStyle","dataZoom","xAxisIndex","tooltip","trigger","formatter","toolbox","show","orient","showTitle","feature","saveAsImage","toLowerCase","excludedComponents","dataView","readOnly","optionToContent","showData","restore","xAxis","x_label","nameLocation","nameTextStyle","axisLabel","align","boundaryGap","splitLine","lineStyle","yAxis","y_label","axisLine","axisTick","scale","series","copyData","CSVText","getTextAsCSV","navigator","clipboard","writeText","log","err","getDownloadURL","csvstring","csvarray","idx","blob","Blob","URL","createObjectURL","rowindex","search","h","dataTable","className","thead","theadRow","insertRow","theadOne","insertCell","theadTwo","tbody","csvtext","cellOne","cellTwo","div","copybtn","onclick","downloadbtn","downloadlink","href","download","replaceAll","click","place","factor","use","SVGRenderer","LineChart","TitleComponent","TooltipComponent","GridComponent","ToolboxComponent","DataZoomComponent","AnalysisTabs","validator","every","val","VChart","init","groupSet","groupRatio","animate","currGroup","stopAnimating","groupDiff","currPairing","left","prevPairing","inject","intervalId","step","pairingIsInverted","group1","group2","updateCurrGroup","_analysis$value","groups","ratio","toFixed","setDefaultPairing","_allGroupSets$value","allGroupSets","groupPairings","updateGroupSelections","updateGroupFileShown","filesShown","_analysis$value2","meanParticles","_analysis$value3","mean_shapes","_analysis$value4","allInPairing","animateSlider","Groups","cacheAllGroupComparisons","_analysis$value5","_analysis$value6","group","triggerAnimate","changeMaxAngle","angle","pcaInfo","stdDev","menu","showConfirmation","modeOptions","modes","currMode","currPCAs","_currMode$value","pca_values","pca_value","toPrecision","stdDevRange","numSteps","pcaValues","numDomains","_currPCAs$value","items","lambda_value","eigen_value","explained_variance","class","cumulative_explained_variance","updateFileShown","allInMode","PCA","cacheAllPCAComparisons","Charts","Particles","TaskInfo","formDefaults","steps","pca","provide","openPanel","deleteLandmark","backgroundColor","colorStrings","getColorObject","_s","changesMade","sortable","expandedRows","dialogs","getPlacementStatus","placement","coordStrings","beginPlacement","newLandmark","_landmarkInfo$value","_landmarkInfo$value2","newID","landmark","comment","newAddition","updateLandmarkInfo","landmarkIndex","updateLandmarkColor","rgba","updateLandmarks","submit","_allSubjectsForDatase","infoData","saveLandmarkData","curr","stopPropagation","constraintErrors","saveWarning","toggleConstraintShown","toggleCurrentPlacement","validateConstraint","newConstraint","_constraintInfo$value","_constraintInfo$value2","constraint","deleteConstraint","shapeInfos","shapeLocations","convertConstraintDataForDB","noneSetConstraints","plural","constraintLabels","saveConstraintData","Landmarks","Constraints","updateLayersShown","openExpansionPanel","controlsTabs","testing_split","prepData","augmentationData","aug_sampler_type","trainingData","train_epochs","_vm$deepSSMResult$res","_vm$deepSSMResult$res2","_vm$deepSSMResult$res3","_vm$deepSSMResult$res4","Sampler","LossFunction","showAbortConfirmation","validation_split","percent_variability","image_spacing","aug_num_samples","Gaussian","train_loss_function","MSE","train_learning_rate","train_batch_size","train_decay_learning_rate","train_fine_tuning","train_fine_tuning_epochs","train_fine_tuning_learning_rate","dataTables","aug_table","aug_headers","training_table","training_headers","testing_table","testing_headers","getFormSection","obj","getFormData","prepFormData","augFormData","trainFormData","overwriteFormDefaultsFromProjectFile","section","getCSVDataFromURL","aug_total_data","training_data_table","testing_distances","res","aug_values","newRow","pop","e","ShapeViewer","DataList","InfoTab","RenderControls","TabForm","AnalysisTab","DeepSSMTab","drawer","cols","renderData","renderMetaData","onResize","toSelectPage","prepareDrawer","$el","querySelector","cursor","addEventListener","preventDefault","offsetX","transition","setDrawerWidth","body","removeEventListener","clientX","_currentAnalysisParti","_meanAnalysisParticle","landmarksPromise","constraintsPromise","newRenderData","newRenderMetaData","groupedSelections","currParticles","labelledGroups","trainingImages","augImages","paginatedAugPairs","acc","example_type","validation","order","aKey","aVal","bKey","bVal","subjectId","dataObjects","filteredDataObjects","image_type","sample_num","shapePromises","shapeURL","imageURL","particleURL","mesh","image","startsWith","_augImages$find","_trainingImages$find","image_id","fetchedDataObject","_groomedShapesForOrig","targetReconstruction","reconstructed","originalId","groomed_mesh","groomed_segmentation","segmentation","_particlesForOriginal","local","particleData","landmarkData","constraintData","numGroups","renderAreaWidth","innerWidth","renderAreaHeight","innerHeight","renderAreaRatio","nextTick","onBeforeUnmount","debouncedRefreshRender","rawName","keyword","deleting","creating","editMode","readonly","privated","description","keywords","cancel","private","submitFunction","createProject","editProject","status","catch","ProjectForm","selectOrDeselectProject","cloneProj","cloneProject","deleteProj","deleteProject","back","updateSelectedDataset","selectOrDeselectDataset","selectingSubsetOf","submitForm","targetDataset","selected","newDataset","subsetDataset","SubsetSelection","Vue","VueRouter","castDatasetAndSubjectProps","route","routes","path","Main","ProjectSelect","DatasetSelect","redirect","reader","vtkXMLPolyDataReader","setUrl","binary","setActiveScalars","convertItkToVtkImage","ITKHelper","readDeepSSMScalars","vtkPolyDataReader","content","axios","header","line_values","line","filename","metadata","arrayBuffer","responseType","endsWith","vtkPLYReader","parseAsArrayBuffer","readImageArrayBuffer","shapeReader","vtkSTLReader","fieldData","str","vtkStringArray","apiClient","baseURL","oauthClient","OauthClient","process","restoreLogin","maybeRestoreLogin","interceptors","request","config","authHeaders","_error$response","_error$response2","_error$response3","logout","post","withCredentials","resetDisabled","showSubmissionConfirmation","disabled","alreadyDone","taskData","oldValue","submitDisabled","confirmed","next","encoding","_await$apiClient$get$","projectFileURL","json","_await$apiClient$get$2","dataTypes","_response$data","_await$apiClient$get$3","_await$apiClient$get$4","_await$apiClient$get$5","_await$apiClient$get$6","_await$apiClient$get$7","_await$apiClient$get$8","_await$apiClient$get$9","page_size","_await$apiClient$get$10","put","taskId","landmarkLocations","constraintLocations","navigateToResults","targetUrl","beforeEach","to","FilterSearch","logInOrOut","isLoggedIn","reload","redirectToLogin","navigateToHome","NavBar","logIn","Vuetify","theme","dark","login","vuetify","App","$mount","prerequisite","Function","prerequisite_unfulfilled","VJsf","ajv","Ajv","newDefaults","parseNewDefaults","sName","sData","fetchFormSchema","formName","types","defaults","evaluateExpression","expressionFunc","eval","schemaOptions","rootDisplay","autoFocus","sliderProps","thumbLabel","tooltipProps","openOnHover","simplifyFormData","_reconstructionsForOr","crossProduct","v1","v2","addVectors","subtractVectors","normalizeVector","magnitude","constraintJSON","indexForShape","planes","p1","p2","p3","planeData","paintData","free_form_constraints","constraintList","_json$planes"],"mappings":"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","file":"js/app.37c32a8c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import vtkAnnotatedCubeActor from 'vtk.js/Sources/Rendering/Core/AnnotatedCubeActor';\nimport {\n    DataObject, Dataset, Subject,\n    Particles, GroomedShape, Project,\n    ReconstructedSample, VTKInstance,\n    Analysis, Task, LandmarkInfo, Constraints\n} from '@/types'\nimport { ref } from 'vue'\n\nexport * from './methods'\n\nexport * from './constants'\n\nexport const loadingState = ref<boolean>(false)\n\nexport const renderLoading = ref<boolean>(false)\n\nexport const currentError = ref<string>()\n\nexport const vtkInstance = ref<VTKInstance>()\n\nexport const allDatasets = ref<Dataset[]>([])\n\nexport const selectedDataset = ref<Dataset>()\n\nexport const allProjectsForDataset = ref<Project[]>([])\n\nexport const selectedProject = ref<Project>()\n\nexport const editingProject = ref<undefined | Project>();\n\nexport const allSubjectsForDataset = ref<Subject[]>([])\n\nexport const allDataObjectsInDataset = ref<DataObject[]>([])\n\nexport const anatomies = ref<string[]>([]);\n\nexport const selectedDataObjects = ref<DataObject[]>([])\n\nexport const orientationIndicator = ref<vtkAnnotatedCubeActor>(vtkAnnotatedCubeActor.newInstance())\n\nexport const particleSize = ref<number>(2)\n\nexport const reconstructionsForOriginalDataObjects = ref<ReconstructedSample[]>([])\n\nexport const particlesForOriginalDataObjects = ref<Record<string, Record<number, Particles | undefined>>>({})\n\nexport const groomedShapesForOriginalDataObjects = ref<Record<string, Record<number, GroomedShape| undefined>>>({})\n\nexport const analysis = ref<Analysis>();\n\nexport const analysisFilesShown = ref<string[]>();\n\nexport const currentAnalysisParticlesFiles = ref<string[]>();\n\nexport const meanAnalysisParticlesFiles = ref<string[]>();\n\nexport const layersShown = ref<string[]>([\"Original\"])\n\nexport const goodBadAngles = ref<number[][]>();\n\nexport const goodBadMaxAngle = ref<number>(45);\n\nexport const showGoodBadParticlesMode = ref<boolean>(false);\n\nexport const showDifferenceFromMeanMode = ref<boolean>(false);\n\nexport const cachedMarchingCubes = ref({})\n\nexport const cachedParticleComparisonVectors = ref<{[key: string]: number[][]}>({})\n\nexport const cachedParticleComparisonColors = ref<{[key: string]: number[]}>({})\n\nexport const landmarkInfo = ref<LandmarkInfo[]>([]);\n\nexport const landmarksLoading = ref(true);\n\nexport const landmarkSize = ref(2);\n\nexport const allSetLandmarks = ref<Record<string, object>>();\n\nexport const currentLandmarkPlacement = ref();\n\nexport const constraintInfo = ref<Constraints[]>([]);\n\nexport const constraintsLoading = ref(true);\n\nexport const constraintsShown = ref([]);\n\nexport const allSetConstraints = ref<Record<string, object>>();\n\nexport const currentConstraintPlacement = ref();\n\nexport const constraintPaintRadius = ref(3);\n\nexport const constraintPaintExclusion = ref(true);\n\nexport const currentTasks = ref<Record<number, Record<string, Task| undefined>>>({})\n\nexport const jobProgressPoll = ref();\n\nexport const analysisExpandedTab = ref(0);\n\nexport const analysisAnimate = ref<boolean>(false);\n\nexport const imageViewMode = ref<boolean>(false);\n\nexport const imageViewIntersectMode = ref<boolean>(false);\n\nexport const imageViewIntersectCropMode = ref<boolean>(false);\n\nexport const imageViewAxis = ref<string>('Z');\n\nexport const imageViewSlices = ref({x: 0, y: 0, z: 0});\n\nexport const imageViewSliceRanges = ref({x: [0, 1], y: [0, 1], z: [0, 1]});\n\nexport const imageViewCroppedSliceRanges = ref({x: [0, 1], y: [0, 1], z: [0, 1]});\n\nexport const imageViewWindow = ref<number>(0);\n\nexport const imageViewWindowRange = ref<number[]>([0, 1]);\n\nexport const imageViewLevel = ref<number>(0);\n\nexport const imageViewLevelRange = ref<number[]>([0, 1]);\n\nexport const deepSSMResult = ref<Record<string, any>>();\n\nexport const deepSSMDataTab = ref<number>(-1);\n\nexport const deepSSMAugDataShown = ref<'Original' | 'Generated'>('Generated');\n\nexport const deepSSMLoadingData = ref<boolean>(false);\n\nexport const groomFormData = ref({});\n\nexport const optimizationFormData = ref({});\n\nexport const uniformScale = ref<boolean>(true);\n\nexport const deepSSMErrorGlobalRange = ref<number[]>([0, 1]);\n\nexport const deepSSMSamplePage = ref<number>(1);\n","import vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\n\nexport default async function (url: string | undefined) {\n  if(!url) return vtkPolyData.newInstance()\n  const resp = await fetch(url);\n  const data = await resp.text();\n  const lines = data.trim().split('\\n');\n  const pointArray = lines.map((l) => l.trim().split(/\\s+/).map((f) => parseFloat(f))).flat();\n  const points = Float32Array.from(pointArray);\n\n  const polyData = vtkPolyData.newInstance();\n  polyData.getPoints().setData(points, 3);\n  return polyData;\n}\n","// Helper functions that may come in handy in component or view files\n\n/**\n * Groups an array of objects by a specified key.\n * @param xs The array of objects to be grouped.\n * @param key The key to group the objects by.\n * @returns An object where the keys are unique values of the specified key, and the values are arrays of objects with that key value.\n */\nexport function groupBy(xs: any[], key: string) {\n    return xs.reduce(function(rv, x) {\n        (rv[x[key]] = rv[x[key]] || []).push(x);\n        return rv;\n    }, {});\n}\n\n/**\n * Returns the short date string from a given date string.\n * @param date The date string.\n * @returns The short date string.\n */\nexport function shortDateString(date: string) {\n    return date.split('T')[0]\n}\n\n/**\n * Returns the short file name from a given file path.\n * @param file The file path.\n * @returns The short file name.\n */\nexport function shortFileName(file: string) {\n    const split = file.split('?')[0].split('/')\n    return split[split.length-1]\n}\n\n/**\n * Calculates the Euclidean distance between two points in n-dimensional space.\n * @param one The coordinates of the first point.\n * @param two The coordinates of the second point.\n * @param signed (Optional) Whether to return a signed distance. Defaults to false.\n * @returns The Euclidean distance between the two points.\n */\nexport function getDistance(\n    one: number[], two: number[], signed=false\n){\n    let dimSum = 0\n    let squaredDimSum = 0\n    for (let i = 0; i< one.length; i++){\n        const d = two[i] - one[i]\n        dimSum += d\n        squaredDimSum += d * d\n    }\n    if (signed && dimSum < 0) {\n        return -Math.sqrt(squaredDimSum);\n    }\n    return Math.sqrt(squaredDimSum);\n}\n\n/**\n * Converts a hexadecimal color code to an RGB array.\n * @param hex The hexadecimal color code.\n * @returns The RGB array representation of the color.\n */\nexport function hexToRgb(hex: string) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? [\n      parseInt(result[1], 16),\n      parseInt(result[2], 16),\n      parseInt(result[3], 16)\n    ] : [0, 0, 0];\n}\n\nexport function rgbToHex(rgb) {\n    const components = rgb.map((c) => {\n        const hex = c.toString(16);\n        return hex.length == 1 ? \"0\" + hex : hex;\n    })\n    return \"#\" + components.join(\"\");\n  }\n\nexport function distance(a, b){\n    return Math.pow(a.x - b.x, 2) +  Math.pow(a.y - b.y, 2) +  Math.pow(a.z - b.z, 2);\n}\n\n/**\n * Parses a CSV file from the specified URL and returns the data as an array of objects.\n * @param url - The URL of the CSV file to parse.\n * @returns A promise that resolves to an array of objects representing the CSV data.\n */\nexport async function parseCSVFromURL(url: string) {\n    return fetch(url)\n    .then(response => response.text())\n    .then(text => {\n        // last value of the substring is blank, so we remove it\n        const splitstring = text.split('\\n').slice(0, -1);\n\n        const data: {[x: string]: any} = [];\n        for (let i = 1; i < splitstring.length; i++) {\n            const d = {};\n            const row = splitstring[i].split(',');\n            for (let j = 0; j < row.length; j++) {\n                // parseFloat if row[j] is a number, otherwise keep it as a string\n                d[j] = isNaN(parseFloat(row[j])) ? row[j] : parseFloat(row[j]);\n            }\n            data.push(d);\n        }\n        return data;\n    })\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=style&index=0&id=addf5cb4&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=style&index=0&id=2a5819ca&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=style&index=0&id=680984d8&prod&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=style&index=0&id=3e171041&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=style&index=0&id=44107574&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=style&index=0&id=692056fc&prod&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=style&index=0&id=06c87e7c&prod&lang=css\"","import vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\n// import vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\n\n\nexport default function generateMapper(shape: vtkPolyData | vtkImageData) {\n    const mapper = vtkMapper.newInstance();\n\n    if (shape.getClassName() == 'vtkPolyData') {\n        mapper.setInputData(shape as vtkPolyData);\n    } else if (shape.getClassName() == 'vtkImageData') {\n        console.error(\"Unexpected analysis mesh type\");\n    }\n\n    return mapper;\n}   ","import { AnalysisParams, CacheComparison, Project, Task } from \"@/types\";\nimport {\n     loadingState,\n     selectedDataset,\n     selectedProject,\n     allProjectsForDataset,\n     layersShown,\n     particlesForOriginalDataObjects,\n     allDataObjectsInDataset,\n     analysis,\n     cachedMarchingCubes,\n     currentTasks,\n     groomedShapesForOriginalDataObjects,\n     jobProgressPoll,\n     reconstructionsForOriginalDataObjects,\n     cachedParticleComparisonColors,\n     cachedParticleComparisonVectors,\n     allDatasets,\n     goodBadAngles,\n     landmarkInfo,\n     analysisExpandedTab,\n     selectedDataObjects,\n     particleSize,\n     analysisFilesShown,\n     meanAnalysisParticlesFiles,\n     currentAnalysisParticlesFiles,\n     goodBadMaxAngle,\n     showDifferenceFromMeanMode,\n     showGoodBadParticlesMode,\n     analysisAnimate,\n     allSetLandmarks,\n     allSubjectsForDataset,\n     constraintInfo,\n     allSetConstraints,\n     deepSSMResult,\n     deepSSMDataTab,\n} from \".\";\nimport imageReader from \"@/reader/image\";\nimport pointsReader from \"@/reader/points\";\nimport generateMapper from \"@/reader/mapper\";\nimport constraintsReader from \"@/reader/constraints\";\nimport {\n    abortTask,\n    analyzeProject,\n    getDataset,\n    getDatasets,\n    getGroomedShapeForDataObject, getOptimizedParticlesForDataObject,\n    getProjectsForDataset,\n    getReconstructedSamplesForProject,\n    groomProject, optimizeProject, refreshProject,\n    deepssmRunProject,\n    getDeepSSMResultForProject,\n    getDeepSSMAugPairsForProject,\n    getDeepSSMTestImagesForProject,\n    getDeepSSMTrainingPairsForProject,\n    getDeepSSMTrainingImagesForProject,\n    getTasksForProject,\n    getProjectFileContents,\n} from '@/api/rest';\nimport { layers, COLORS } from \"./constants\";\nimport { getDistance, hexToRgb } from \"@/helper\";\nimport router from \"@/router\";\n\nexport const resetState = () => {\n    selectedDataObjects.value = [];\n    layersShown.value = ['Original'];\n    landmarkInfo.value = [];\n    currentTasks.value = {};\n    jobProgressPoll.value = undefined;\n    particleSize.value = 2;\n    analysis.value = undefined;\n    analysisExpandedTab.value = 0;\n    analysisFilesShown.value = undefined;\n    currentAnalysisParticlesFiles.value = undefined;\n    meanAnalysisParticlesFiles.value = undefined;\n    goodBadAngles.value = undefined;\n    goodBadMaxAngle.value = 45;\n    showGoodBadParticlesMode.value = false;\n    showDifferenceFromMeanMode.value = false;\n    cachedMarchingCubes.value = {};\n    cachedParticleComparisonVectors.value = {};\n    cachedParticleComparisonColors.value = {};\n    analysisExpandedTab.value = 0;\n    analysisAnimate.value = false;\n}\n\nexport const loadDataset = async (datasetId: number) => {\n    // Only reload if something has changed\n    if (selectedDataset.value?.id != datasetId) {\n        loadingState.value = true;\n        selectedDataset.value = await getDataset(datasetId);\n        loadingState.value = false;\n    }\n}\n\nexport async function getAllDatasets() {\n    const searchText = router.currentRoute.params.searchText;\n    loadingState.value = true;\n    allDatasets.value = (await getDatasets(searchText)).sort((a, b) => {\n        if(a.created < b.created) return 1;\n        if(a.created > b.created) return -1;\n        return 0;\n    });\n    loadingState.value = false;\n}\n\nexport const loadProjectForDataset = async (projectId: number) => {\n    refreshProject(projectId).then((proj) => {\n        if (proj.file){\n            getProjectFileContents(proj.file).then((contents) => {\n                proj.file_contents = contents\n                selectedProject.value = proj\n            })\n        } else {\n            selectedProject.value = proj\n        }\n    });\n    spawnJobProgressPoll()\n}\n\nexport const loadProjectsForDataset = async (datasetId: number) => {\n    const searchText = router.currentRoute.params.searchText;\n    loadingState.value = true;\n    allProjectsForDataset.value = (await getProjectsForDataset(searchText, datasetId)).sort((a, b) => {\n        if(a.created < b.created) return 1;\n        if(a.created > b.created) return -1;\n        return 0;\n    });\n    loadingState.value = false;\n}\n\nexport const selectProject = (projectId: number | undefined) => {\n    if (projectId) {\n        resetState();\n        selectedProject.value = allProjectsForDataset.value.find(\n            (project: Project) => project.id == projectId,\n        )\n    }\n}\n\nexport const loadParticlesForObject = async (type: string, id: number) => {\n    let particles = await getOptimizedParticlesForDataObject(\n        type, id, selectedProject.value?.id\n    )\n    if (particles && particles.length > 0) {\n        particles = particles[0]\n        if (!particlesForOriginalDataObjects.value[type]) {\n            particlesForOriginalDataObjects.value[type] = {}\n        }\n        particlesForOriginalDataObjects.value[type][id] = particles\n    } else if (\n        particlesForOriginalDataObjects.value[type] &&\n        particlesForOriginalDataObjects.value[type][id]\n    ){\n        particlesForOriginalDataObjects.value[type][id] = undefined\n    }\n}\n\nexport const loadGroomedShapeForObject = async (type: string, id: number) => {\n    let groomed = await getGroomedShapeForDataObject(\n        type, id, selectedProject.value?.id\n    )\n    if (groomed && groomed.length > 0) {\n        groomed = groomed[0]\n        if (!groomedShapesForOriginalDataObjects.value[type]) {\n            groomedShapesForOriginalDataObjects.value[type] = {}\n        }\n        groomedShapesForOriginalDataObjects.value[type][id] = groomed\n    }else if (\n        groomedShapesForOriginalDataObjects.value[type] &&\n        groomedShapesForOriginalDataObjects.value[type][id]\n    ){\n        groomedShapesForOriginalDataObjects.value[type][id] = undefined\n    }\n}\n\nexport const loadReconstructedSamplesForProject = async (type: string, id: number) => {\n    if (selectedProject.value) {\n        reconstructionsForOriginalDataObjects.value = await getReconstructedSamplesForProject(\n            type, id, selectedProject.value?.id\n        )\n    }\n}\n\nexport const loadDeepSSMDataForProject = async () => {\n    if (selectedProject.value) {\n        const results = await Promise.all([\n            await getDeepSSMResultForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMAugPairsForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTrainingPairsForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTrainingImagesForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTestImagesForProject(\n                selectedProject.value.id\n            )]\n        )\n\n        deepSSMResult.value = {\n            result: results[0][0],\n            aug_pairs: results[1],\n            training_pairs: results[2],\n            images: results[3],\n            test_pairs: results[4]\n        }\n    }\n}\n\nexport function jobAlreadyDone(action: string): Boolean {\n    let layer;\n    switch (action) {\n        case 'groom':\n            layer = layers.value?.find((layer) => layer.name === 'Groomed')\n            return layer ? layer.available() : false\n        case 'optimize':\n            layer = layers.value?.find((layer) => layer.name === 'Particles')\n            return layer ? layer.available() : false\n        case 'analyze':\n            return false;\n        default:\n            return false;\n    }\n}\n\nexport async function spawnJob(action: string, payload: Record<string, any>): Promise<any> {\n    const projectId = selectedProject.value?.id;\n    if (!projectId) return undefined\n    switch (action) {\n        case 'groom':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Groomed'\n            )\n            return (await groomProject(projectId, payload))?.data\n        case 'optimize':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Particles'\n            )\n            return (await optimizeProject(projectId, payload))?.data\n        case 'analyze':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Reconstructed'\n            )\n            return (await analyzeProject(projectId, payload as AnalysisParams))?.data\n        case 'deepssm':\n            return (await deepssmRunProject(projectId, payload))?.data\n        default:\n            break;\n    }\n    return undefined;\n}\n\nexport async function spawnJobProgressPoll() {\n    if (jobProgressPoll.value) clearInterval(jobProgressPoll.value)\n    jobProgressPoll.value = setInterval(pollJobProgress, 1000)\n}\n\nexport function pollJobProgress() {\n    if (selectedProject.value) {\n        const projectId = selectedProject.value.id\n        getTasksForProject(projectId).then((tasks) => {\n            if (tasks) {\n                const refreshedTasks = {}\n                tasks.forEach((task) => {\n                    if (task.name && !task.abort && !task.error && task.percent_complete !== 100) {\n                        refreshedTasks[`${task.name}`] = task\n                    }\n                })\n                currentTasks.value = {\n                    ...currentTasks.value,\n                    ...{[projectId]: refreshedTasks}\n                }\n            }\n        })\n    }\n}\n\nexport async function fetchJobResults(taskName: string) {\n    if (!selectedProject.value) {\n        return;\n    }\n    const refreshedProject = await refreshProject(selectedProject.value.id)\n    let layerName: string = ''\n    let loadFunction: Function | undefined = undefined\n    switch (taskName) {\n        case 'groom':\n            layerName = 'Groomed'\n            loadFunction = loadGroomedShapeForObject\n            break;\n        case 'optimize':\n            layerName = 'Particles'\n            loadFunction = loadParticlesForObject\n            break;\n        case 'analyze':\n            layerName = 'Reconstructed'\n            loadFunction = loadReconstructedSamplesForProject\n            analysis.value = refreshedProject?.last_cached_analysis\n            if (analysis.value) {\n                if (analysis.value.good_bad_angles) {\n                    goodBadAngles.value = analysis.value.good_bad_angles\n                }\n            }\n            break;\n        case 'deepssm':\n            loadFunction = loadDeepSSMDataForProject\n            break;\n    }\n    if (layerName && loadFunction) {\n        if (layerName) {\n            await Promise.all(allDataObjectsInDataset.value.map(\n                (dataObject) => loadFunction ? loadFunction(dataObject.type, dataObject.id) : undefined\n            ))\n            cachedMarchingCubes.value = Object.fromEntries(\n                Object.entries(cachedMarchingCubes.value).filter(\n                    ([cachedLabel]) => !cachedLabel.includes(layerName)\n                )\n            )\n            const layer = layers.value.find((l) => l.name === layerName)\n            if (layer?.available() && !layersShown.value.includes(layerName)) {\n                layersShown.value = [...layersShown.value, layerName]\n            }\n        } else {\n            loadFunction()\n        }\n    }\n}\n\nexport async function abort(task: Task | undefined) {\n    if (task && task.id) abortTask(task.id)\n}\n\nexport async function switchTab(tabName: string) {\n    if (!selectedProject.value) {\n        return;\n    }\n    deepSSMDataTab.value = -1;\n    const refreshedProject = await refreshProject(selectedProject.value.id)\n    switch (tabName) {\n        // add any other tab-switching updates here\n        case 'analyze':\n            if (refreshedProject) {\n                analysis.value = refreshedProject.last_cached_analysis\n                if (analysis.value) {\n                    if (analysis.value.good_bad_angles) {\n                        goodBadAngles.value = analysis.value.good_bad_angles\n                    }\n                }\n            }\n    }\n}\n\nexport function calculateComparisons(mapper: any, currentPoints: number[], meanPoints: number[]) {\n    const vectorValues: number[][] = []\n    let colorValues: number[] = []\n    for (let i = 0; i < currentPoints.length; i += 3){\n        const currentParticle = currentPoints.slice(i, i+3)\n        const meanParticle = meanPoints.slice(i, i+3)\n        const distance = getDistance(currentParticle as number[], meanParticle as number[], true)\n        vectorValues.push([...currentParticle, distance])\n    }\n\n    const pointLocations = mapper.getInputData().getPoints().getData()\n    const normals = mapper.getInputData().getPointData().getArrayByName('Normals').getData()\n    colorValues = Array.from(\n        [...Array(pointLocations.length / 3).keys()].map(\n        (i) =>  {\n            let colorVal = 0;\n            const location = pointLocations.slice(i * 3, i * 3 + 3)\n            const normal = normals.slice(i * 3, i * 3 + 3)\n            const nearbyParticles = vectorValues.map(\n            (p, i) => [getDistance(p.slice(0, 3), location), i, ...p]\n            ).sort((a, b) => a[0] - b[0]).slice(0, 10)\n            const nearestParticleIndex = nearbyParticles[0][1]\n            if (vectorValues[nearestParticleIndex].length < 5){\n            vectorValues[nearestParticleIndex].push(...normal)\n            }\n            colorVal = nearbyParticles[0][5]\n            nearbyParticles.slice(1).forEach((p) => {\n            const weight = 1 / p[0];\n            colorVal = (colorVal * (1 - weight)) + (p[5] * weight)\n            })\n            return colorVal/10 + 0.5\n        }\n        )\n    )\n\n    return { colorValues: colorValues, vectorValues: vectorValues }\n}\n\nexport function cacheComparison(colorValues: number[], vectorValues: number[][], particleComparisonKey: string) {\n    cachedParticleComparisonColors.value[particleComparisonKey] = colorValues\n    cachedParticleComparisonVectors.value[particleComparisonKey] = vectorValues\n}\n\nexport async function cacheAllComparisons(comparisons: CacheComparison[][]) {\n    if (comparisons !== undefined) {\n        const cachePrep = await Promise.all(comparisons?.map(async (g) => {\n            return await Promise.all(\n                g.map(async (domain, i) => {\n                    if(meanAnalysisParticlesFiles.value && meanAnalysisParticlesFiles.value.length > i){\n                        const particleComparisonKey = domain.particles;\n\n                        if (!cachedParticleComparisonColors.value[particleComparisonKey]) { // if the comparison is NOT already cached\n                            const compareToPoints = await pointsReader(meanAnalysisParticlesFiles.value[i]);\n                            const currentPoints = await pointsReader(domain.particles);\n\n                            const currentMesh = await imageReader(domain.file, \"current_mesh.vtk\");\n\n                            return {\n                                \"compareTo\": {\n                                    points: compareToPoints.getPoints().getData(),\n                                    particleUrl: domain,\n                                },\n                                \"current\":  {\n                                    points: currentPoints.getPoints().getData(),\n                                    mapper: generateMapper(currentMesh),\n                                    particleUrl: domain.particles,\n                                },\n                            }\n                        }\n                    }\n                })\n            )\n        }))\n\n        cachePrep.forEach((g) => {\n            if (g !== undefined) {\n                g.forEach((c) => {\n                    if (c){\n                        const { current, compareTo } = c;\n                        const comparisons = calculateComparisons(current.mapper, current.points as number[], compareTo.points as number[])\n                        cacheComparison(comparisons.colorValues, comparisons.vectorValues, current.particleUrl);\n                    }\n                })\n            }\n        })\n    }\n}\n\n\nexport function isShapeShown(subjectID, domain) {\n    return selectedDataObjects.value.some((d) => (\n        d.subject === subjectID && d.anatomy_type.replace('anatomy_', '') === domain\n    ))\n}\n\nexport function toggleSubjectShown(subjectID, domain) {\n    const shape = allDataObjectsInDataset.value.find((d) => (\n        d.subject === subjectID && d.anatomy_type.replace('anatomy_', '') === domain\n    ))\n    if (shape) {\n        if (selectedDataObjects.value.includes(shape)) {\n            selectedDataObjects.value = selectedDataObjects.value.filter(\n                (s) => s !== shape\n            )\n        } else {\n            selectedDataObjects.value = [\n                ...selectedDataObjects.value,\n                shape\n            ]\n        }\n    }\n}\n\nexport function getWidgetInfo(subject, item) {\n    return {\n        subjectName: subject.name,\n        domain: item.domain,\n        widgetID: item.id,\n    }\n}\n\nexport function getLandmarkLocation(subject, item) {\n    if (\n        allSetLandmarks.value &&\n        allSetLandmarks.value[subject.name]\n        && allSetLandmarks.value[subject.name][item.domain]\n    )\n    return allSetLandmarks.value[subject.name][item.domain][item.id]\n}\n\nexport function setLandmarkLocation(subject, item, location) {\n    if (!allSetLandmarks.value) allSetLandmarks.value = {}\n    if (!allSetLandmarks.value[subject.name]) allSetLandmarks.value[subject.name] = {}\n    if (!allSetLandmarks.value[subject.name][item.domain]) allSetLandmarks.value[subject.name][item.domain] = {}\n    allSetLandmarks.value[subject.name][item.domain][item.id] = location\n}\n\n\nexport function reassignLandmarkIDsByIndex() {\n    const reassignedIds = {}\n    landmarkInfo.value = landmarkInfo.value.map((info, index) => {\n        if (info.id !== undefined) reassignedIds[info.id] = index\n        return Object.assign(info, {id: index})\n    })\n    if (allSetLandmarks.value) {\n        allSetLandmarks.value = Object.fromEntries(\n            Object.entries(allSetLandmarks.value)\n            .map(([subjectName, subjectRecords]) => {\n                return [subjectName, Object.fromEntries(\n                    Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                        domainRecords = Object.fromEntries(\n                            Object.entries(domainRecords)\n                            .filter(([lId,]) => Object.keys(reassignedIds).includes(lId))\n                            .map(([lId, lData]) => {\n                                return [reassignedIds[lId], lData]\n                            })\n                        )\n                        return [domain, domainRecords]\n                    })\n                )]\n            })\n        )\n    }\n}\n\nexport function reassignLandmarkNumSetValues() {\n    // only reassign if a value has changed\n    const reassign = false\n    const newInfo = landmarkInfo.value.map((lInfo) => {\n        const newNumSet = allSubjectsForDataset.value.filter((s) => !!getLandmarkLocation(s, lInfo)).length\n        if (newNumSet != lInfo.num_set) {\n            lInfo.num_set = newNumSet\n        }\n        return lInfo\n    })\n    if (reassign) landmarkInfo.value = newInfo\n}\n\n\nexport async function getLandmarks() {\n    allSetLandmarks.value = {}\n    if(selectedProject.value?.landmarks) {\n        landmarkInfo.value = selectedProject.value.landmarks_info.map((lInfo, index) => {\n            if (!lInfo.id) {\n                lInfo.id = index\n            }\n            if (!lInfo.name) {\n                lInfo.name = `L${index}`\n            }\n            if (!lInfo.color) {\n                lInfo.color = COLORS[index % COLORS.length]\n            }\n            if (lInfo.color.toString().includes('#')) {\n                lInfo.color = hexToRgb(lInfo.color.toString())\n            }\n            lInfo.num_set = 0\n            return lInfo\n        })\n\n        for (let i = 0; i < selectedProject.value.landmarks.length; i++) {\n            const landmarksObject = selectedProject.value.landmarks[i]\n            const subject = allSubjectsForDataset.value.find((s) => s.id === landmarksObject.subject)\n            const pointData = await pointsReader(landmarksObject.file)\n            const locationData = pointData.getPoints().getData()\n            const locations: number[][] = []\n            for (let p = 0; p < locationData.length; p+=3) {\n                const location = locationData.slice(p, p+3) as number[]\n                locations.push(location)\n            }\n            const lInfos = landmarkInfo.value.filter((lInfo) => lInfo.domain === landmarksObject.anatomy_type.replace('anatomy_', ''))\n            locations.forEach((location, index) => {\n                const lInfo = lInfos[index]\n                setLandmarkLocation(subject, lInfo, location)\n            })\n        }\n        // reassign store var for listeners\n        allSetLandmarks.value = Object.assign({}, allSetLandmarks.value)\n        reassignLandmarkNumSetValues();\n    }\n}\n\nexport function getConstraintLocation(subject, item) {\n    if (\n        allSetConstraints.value &&\n        allSetConstraints.value[subject.name]\n        && allSetConstraints.value[subject.name][item.domain]\n    )\n    return allSetConstraints.value[subject.name][item.domain][item.id]\n}\n\nexport function setConstraintLocation(subject, item, location) {\n    if (!allSetConstraints.value) allSetConstraints.value = {}\n    if (!allSetConstraints.value[subject.name]) allSetConstraints.value[subject.name] = {}\n    if (!allSetConstraints.value[subject.name][item.domain]) allSetConstraints.value[subject.name][item.domain] = {}\n    allSetConstraints.value[subject.name][item.domain][item.id] = location\n    allSetConstraints.value = Object.assign({}, allSetConstraints.value)\n    reassignConstraintNumSetValues()\n}\n\n\nexport function reassignConstraintIDsByIndex() {\n    const reassignedIds = {}\n    constraintInfo.value = constraintInfo.value.map((info, index) => {\n        if (info.id !== undefined) reassignedIds[info.id] = index\n        return Object.assign(info, {id: index})\n    })\n    if (allSetConstraints.value) {\n        allSetConstraints.value = Object.fromEntries(\n            Object.entries(allSetConstraints.value)\n            .map(([subjectName, subjectRecords]) => {\n                return [subjectName, Object.fromEntries(\n                    Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                        domainRecords = Object.fromEntries(\n                            Object.entries(domainRecords)\n                            .filter(([cId,]) => Object.keys(reassignedIds).includes(cId))\n                            .map(([cId, cData]) => {\n                                return [reassignedIds[cId], cData]\n                            })\n                        )\n                        return [domain, domainRecords]\n                    })\n                )]\n            })\n        )\n    }\n}\n\nexport function reassignConstraintNumSetValues() {\n    // only reassign if a value has changed\n    const reassign = false\n    const newInfo = constraintInfo.value.map((cInfo) => {\n        const newNumSet = allSubjectsForDataset.value.filter((s) => !!getConstraintLocation(s, cInfo)).length\n        if (newNumSet != cInfo.num_set) {\n            cInfo.num_set = newNumSet\n        }\n        return cInfo\n    })\n    if (reassign) constraintInfo.value = newInfo\n}\n\nexport async function getConstraints() {\n    allSetConstraints.value = {}\n    constraintInfo.value = []\n    if(selectedProject.value?.constraints) {\n        for (let i = 0; i < selectedProject.value.constraints.length; i++) {\n            const constraintsObject = selectedProject.value.constraints[i]\n            const subject = allSubjectsForDataset.value.find((s) => s.id === constraintsObject.subject)\n            const domain = constraintsObject.anatomy_type?.replace('anatomy_', '') || '0'\n            if (subject) {\n                const constraintsData = await constraintsReader(constraintsObject.file);\n                ['plane', 'paint'].forEach((constraintType) => {\n                    const newConstraintsOfType = constraintsData.filter((cData) => cData.type === constraintType)\n                    const existingConstraintsOfType = constraintInfo.value.filter((cData) => cData.type === constraintType && cData.domain === domain)\n                    for(let i=0; i<newConstraintsOfType.length; i++) {\n                        let cInfo;\n                        const cData = newConstraintsOfType[i]\n                        if (i >= existingConstraintsOfType.length) {\n                            cInfo = {\n                                id: constraintInfo.value.length,\n                                type: constraintType,\n                                name: cData.name,\n                                domain\n                            }\n                            constraintInfo.value.push(cInfo)\n                        } else {\n                            cInfo = existingConstraintsOfType[i]\n                        }\n                        if(cInfo) setConstraintLocation(subject, cInfo, cData)\n                    }\n                })\n            }\n        }\n        // reassign store var for listeners\n        allSetConstraints.value = Object.assign({}, allSetConstraints.value)\n        reassignConstraintNumSetValues();\n    }\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4b64ca4f&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=style&index=0&id=6c4072e7&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.selectedDataset)?_c('div',{staticClass:\"content-area\",staticStyle:{\"height\":\"100%\"}},[_c('v-navigation-drawer',{ref:\"drawer\",attrs:{\"width\":_vm.drawerWidth,\"permanent\":\"\",\"absolute\":\"\"}},[_c('v-list-item',[_c('v-list-item-title',{staticClass:\"text-h6\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({attrs:{\"dark\":\"\"},on:{\"click\":_vm.toSelectPage}},'v-icon',attrs,false),on),[_vm._v(\" mdi-arrow-left \")])]}}],null,false,1881277058)},[_c('span',[_vm._v(\"Return to dataset/project selection\")])]),_vm._v(\" Dataset: \"+_vm._s(_vm.selectedDataset.name)+\" \")],1)],1),_c('v-list-item',[_c('v-icon'),_c('v-tabs',{attrs:{\"fixed-tabs\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab',{attrs:{\"href\":\"#data\"}},[_vm._v(\"Data\")]),_c('v-tab-item',{attrs:{\"value\":\"data\"}},[_c('data-list',{attrs:{\"dataset\":_vm.dataset,\"autoSelectOne\":\"\"}})],1),_c('v-tab',{attrs:{\"href\":\"#info\"}},[_vm._v(\"Info\")]),_c('v-tab-item',{attrs:{\"value\":\"info\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No operations may be performed. \")]):_c('info-tab')],1),_c('v-tab',{attrs:{\"href\":\"#groom\"}},[_vm._v(\"Groom\")]),_c('v-tab-item',{attrs:{\"value\":\"groom\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No grooming or optimizing may be performed. \")]):_c('tab-form',{attrs:{\"form\":\"groom\"},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#optimize\"}},[_vm._v(\"Optimize\")]),_c('v-tab-item',{attrs:{\"value\":\"optimize\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No grooming or optimizing may be performed. \")]):_c('tab-form',{attrs:{\"form\":\"optimize\",\"prerequisite\":() => _vm.jobAlreadyDone('groom'),\"prerequisite_unfulfilled\":\"Perform a groom operation before optimizing.\"},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#analyze\"}},[_vm._v(\"Analyze\")]),_c('v-tab-item',{attrs:{\"value\":\"analyze\"}},[_c('analysis-tab',{attrs:{\"currentTab\":_vm.tab || ''},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#deepssm\"}},[_vm._v(\"DeepSSM\")]),_c('v-tab-item',{attrs:{\"value\":\"deepssm\"}},[_c('DeepSSMTab',{on:{\"change\":_vm.refreshRender}})],1)],1)],1),_c('br')],1),_c('v-card',{staticClass:\"px-3 render-controls\",style:(_vm.renderAreaStyle)},[_c('render-controls',{attrs:{\"currentTab\":_vm.tab || ''},on:{\"change\":_vm.refreshRender}})],1),_c('v-card',{staticClass:\"pa-3\",style:(_vm.renderAreaStyle)},[(_vm.selectedDataObjects.length > 0 || _vm.analysisFilesShown && _vm.analysisFilesShown.length)?[_c('shape-viewer',{attrs:{\"data\":_vm.renderData,\"metaData\":_vm.renderMetaData,\"rows\":_vm.rows,\"columns\":_vm.cols,\"glyph-size\":_vm.particleSize,\"currentTab\":_vm.tab || '',\"drawerWidth\":_vm.drawerWidth}})]:_c('span',[_vm._v(\"Select any number of data objects\")]),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":!_vm.loadingState && _vm.renderLoading,\"stop-propagation\":true}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1)],2)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.resize),expression:\"resize\"}],ref:\"vtk\",staticClass:\"render-area\"},[_c('canvas',{ref:\"labels\",staticClass:\"labels-canvas\"}),(_vm.showColorScale)?_c('div',{ref:\"colors\",staticClass:\"color-scales\"}):_vm._e(),(_vm.showColorScale)?_c('div',{ref:\"colorsTitle\",staticClass:\"color-scale-title\"}):_vm._e(),(_vm.showColorScale)?_c('div',{ref:\"colorsLabels\",staticClass:\"color-scale-labels\"}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from 'lodash';\n\nimport vtkPickerManipulator from 'vtk.js/Sources/Widgets/Manipulators/PickerManipulator';\nimport vtkWidgetManager from 'vtk.js/Sources/Widgets/Core/WidgetManager';\nimport vtkSeedWidget from 'vtk.js/Sources/Widgets/Widgets3D/SeedWidget';\nimport vtkPaintWidget from 'vtk.js/Sources/Widgets/Widgets3D/PaintWidget';\nimport vtkImplicitPlaneWidget from 'vtk.js/Sources/Widgets/Widgets3D/ImplicitPlaneWidget'\nimport vtkColorTransferFunction from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction';\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\n\nimport { kdTree } from 'kd-tree-javascript';\nimport { distance } from '@/helper'\nimport { ref, watch } from 'vue'\n\nimport {\n    layersShown,\n    landmarkInfo, landmarkSize, currentLandmarkPlacement,\n    getLandmarkLocation, setLandmarkLocation,\n    allSetLandmarks, reassignLandmarkNumSetValues,\n    constraintInfo, constraintsShown, allSetConstraints, currentConstraintPlacement,\n    getConstraintLocation, setConstraintLocation,\n    constraintPaintRadius, constraintPaintExclusion,\n} from '@/store';\n\nconst manipulators = ref({});  // organized by label, domain\nconst dataKDTrees = ref({});   // organized by label, domain\nconst shapeKDTrees = ref({});   // organized by label, domain\nconst seedWidgets = ref({});  // organized by label, domain, id\nconst planeWidgets = ref({});  // organized by label, domain, id\nconst paintWidgets = ref({});  // organized by label, domain, id\n\nexport default {\n    // ---------------------\n    // Initialization\n    // ---------------------\n    initializeWidgets() {\n        // called when shapes or layers shown have changed\n        this.vtk.widgetManagers = {}\n        Object.entries(this.vtk.renderers).forEach(([label, renderer]) => {\n            manipulators.value[label] = {}\n            const wm = vtkWidgetManager.newInstance()\n            wm.setRenderer(renderer)\n            wm.disablePicking();\n            this.vtk.widgetManagers[label] = wm\n            renderer.getActors().forEach((actor) => {\n                const domain = actor.getMapper()?.getInputData()?.getFieldData()?.getArrayByName('domain')?.getData()[0]\n                if (!manipulators.value[label][domain]) {\n                    const m = vtkPickerManipulator.newInstance()\n                    m.getPicker().addPickList(actor)\n                    manipulators.value[label][domain] = m\n                }\n                if (layersShown.value.includes('Landmarks')) {\n                    const existingWidgets = seedWidgets.value[label]\n                    if (existingWidgets) {\n                        Object.values(existingWidgets).forEach((ws) => {\n                            Object.values(ws).forEach((w) => {\n                                const widgetHandle = wm.addWidget(w)\n                                widgetHandle.setScaleInPixels(false)\n                                widgetHandle.onEndInteractionEvent(() => {\n                                    this.seedWidgetEndInteraction(w)\n                                })\n                            })\n                        })\n                    }\n                }\n                if (layersShown.value.includes('Constraints')) {\n                    this.initializeConstraintColormap(actor)\n                    const existingWidgets = planeWidgets.value[label]\n                    if (existingWidgets) {\n                        Object.values(existingWidgets).forEach((ws) => {\n                            Object.values(ws).forEach((w) => {\n                                const widgetHandle = wm.addWidget(w)\n                                this.stylePlaneWidget(widgetHandle)\n                                widgetHandle.onEndInteractionEvent(() => {\n                                    this.planeWidgetEndInteraction(w)\n                                })\n                            })\n                        })\n                    }\n                }\n            })\n        })\n        if (layersShown.value.includes('Landmarks')) {\n            this.landmarkInfoUpdated(landmarkInfo.value)\n        }\n        if (layersShown.value.includes('Constraints')) {\n            this.constraintInfoUpdated(constraintInfo.value)\n        }\n    },\n    initializeConstraintColormap(actor) {\n        const mapper = actor.getMapper()\n        if (!mapper.setLookupTable) return undefined\n\n        const ctfun = vtkColorTransferFunction.newInstance();\n        let defaultColor = [255, 255, 255]\n        if (actor.getProperty() && actor.getProperty().getColor) {\n            defaultColor = actor.getProperty().getColor()\n        }\n        ctfun.addRGBPoint(1, ...defaultColor); // 0: default color has not been excluded\n        ctfun.addRGBPoint(0, 0.5, 0.5, 0.5); // 1: gray has been excluded\n        ctfun.setMappingRange(0, 1)\n        ctfun.updateRange()\n\n        mapper.setLookupTable(ctfun)\n        mapper.setColorByArrayName('color')\n\n        const inputData = mapper.getInputData()\n        const allPoints = inputData.getPoints()\n        const colorArray = vtkDataArray.newInstance({\n            name: 'color',\n            values: Array.from(\n                { length: allPoints.getNumberOfPoints() }, () => 1\n            )\n        })\n        inputData.getPointData().addArray(colorArray)\n    },\n\n    // ---------------------\n    // Getters\n    // ---------------------\n    getWidgetManager(label) {\n        return this.vtk.widgetManagers[label]\n    },\n    getManipulator(label, domain) {\n        if (!manipulators.value[label]) manipulators.value[label] = {}\n        return manipulators.value[label][domain]\n    },\n    getDataKDTree(label, domain, cData) {\n        if (!dataKDTrees.value[label]) dataKDTrees.value[label] = {}\n        if (!dataKDTrees.value[label][domain]) {\n            const { points } = cData.data.field\n            const scalarPoints = points.map((p, i) => ({ x: p[0], y: p[1], z: p[2], i }))\n            dataKDTrees.value[label][domain] = new kdTree(scalarPoints, distance, ['x', 'y', 'z', 'i']);\n        }\n        return dataKDTrees.value[label][domain]\n    },\n    getShapeKDTree(label, domain, shapeData) {\n        if (!shapeKDTrees.value[label]) shapeKDTrees.value[label] = {}\n        if (!shapeKDTrees.value[label][domain]) {\n            const pointData = Array.prototype.slice.call(shapeData.getPoints().getData())\n            const allPoints = Array.from({ length: pointData.length / 3 }, () => pointData.splice(0, 3));\n            const treePoints = allPoints.map((p) => ({ x: p[0], y: p[1], z: p[2] }))\n            shapeKDTrees.value[label][domain] = new kdTree(\n                treePoints,\n                distance,\n                ['x', 'y', 'z']\n            )\n        }\n        return shapeKDTrees.value[label][domain]\n    },\n    getSeedWidget(label, domain, lInfo) {\n        if (!seedWidgets.value[label]) seedWidgets.value[label] = {}\n        if (!seedWidgets.value[label][domain]) seedWidgets.value[label][domain] = {}\n        if (!seedWidgets.value[label][domain][lInfo.id]) {\n            this.createSeedWidget(label, domain, lInfo)\n        }\n        return seedWidgets.value[label][domain][lInfo.id]\n    },\n    getPlaneWidget(label, domain, cInfo) {\n        if (!planeWidgets.value[label]) planeWidgets.value[label] = {}\n        if (!planeWidgets.value[label][domain]) planeWidgets.value[label][domain] = {}\n        if (!planeWidgets.value[label][domain][cInfo.id]) {\n            this.createPlaneWidget(label, domain, cInfo)\n        }\n        return planeWidgets.value[label][domain][cInfo.id]\n    },\n    getPaintWidget(label, domain, cInfo, inputData) {\n        if (!paintWidgets.value[label]) paintWidgets.value[label] = {}\n        if (!paintWidgets.value[label][domain]) paintWidgets.value[label][domain] = {}\n        // always create new paint widget\n        this.createPaintWidget(label, domain, cInfo, inputData)\n        return paintWidgets.value[label][domain][cInfo.id]\n    },\n\n    // ---------------------\n    // Widget creation\n    // ---------------------\n    createSeedWidget(label, domain, lInfo) {\n        const renderer = this.vtk.renderers[label]\n        const manipulator = this.getManipulator(label, domain)\n        const widgetManager = this.getWidgetManager(label)\n        if (renderer && manipulator) {\n            const widget = vtkSeedWidget.newInstance()\n            const widgetHandle = widgetManager.addWidget(widget)\n            widget.setManipulator(manipulator)\n            widgetHandle.setScaleInPixels(false)\n            widgetHandle.onEndInteractionEvent(() => {\n                this.seedWidgetEndInteraction(widget)\n            })\n            seedWidgets.value[label][domain][lInfo.id] = widget\n        }\n    },\n    createPlaneWidget(label, domain, cInfo) {\n        const renderer = this.vtk.renderers[label]\n        const manipulator = this.getManipulator(label, domain)\n        const widgetManager = this.getWidgetManager(label)\n        if (renderer && manipulator) {\n            const pickList = manipulator.getPicker().getPickList()\n            if (pickList.length > 0) {\n                const actor = pickList[0]\n                const bounds = actor.getBounds()\n                const widget = vtkImplicitPlaneWidget.newInstance()\n                widget.placeWidget(bounds)\n                widget.setPlaceFactor(2)\n                const widgetHandle = widgetManager.addWidget(widget)\n                widgetHandle.getRepresentations()[0].setLabels({\n                    'subject': label,\n                    'domain': domain\n                })\n                this.stylePlaneWidget(widgetHandle)\n                widgetHandle.onEndInteractionEvent(() => {\n                    this.planeWidgetEndInteraction(widget)\n                })\n                planeWidgets.value[label][domain][cInfo.id] = widget\n            }\n        }\n    },\n    createPaintWidget(label, domain, cInfo, inputData) {\n        const widgetManager = this.getWidgetManager(label)\n        const manipulator = this.getManipulator(label, domain)\n        if (manipulator) {\n            const widget = vtkPaintWidget.newInstance({ manipulator });\n            const widgetHandle = widgetManager.addWidget(widget)\n            paintWidgets.value[label][domain][cInfo.id] = widget\n            widgetHandle.onEndInteractionEvent(() => {\n                this.paintWidgetEndInteraction(widget, inputData)\n            })\n        }\n    },\n    stylePlaneWidget(widgetHandle) {\n        widgetHandle.setHandleSizeRatio(0.08)\n        widgetHandle.setAxisScale(0.25)\n        widgetHandle.setRepresentationStyle({\n            static: {\n                outline: {\n                    opacity: 0\n                }\n            }\n        })\n    },\n\n    // ---------------------\n    // Widget interaction events\n    // ---------------------\n\n    seedWidgetEndInteraction(widget) {\n        Object.entries(seedWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const lInfo = { domain, id }\n                        const wm = this.getWidgetManager(label)\n                        // When widget moved, update value in allSetLandmarks\n                        const landmarkCoord = widget.getWidgetState().getMoveHandle().getOrigin()\n                        if (landmarkCoord) {\n                            wm.releaseFocus(widget);\n                            const previousLocation = getLandmarkLocation({ name: label }, lInfo, landmarkCoord)\n                            if (!previousLocation || previousLocation.some((v, i) => landmarkCoord[i] != v)) {\n                                setLandmarkLocation({ name: label }, lInfo, landmarkCoord)\n                                // reassign store var for listeners\n                                allSetLandmarks.value = Object.assign({}, allSetLandmarks.value)\n                                reassignLandmarkNumSetValues()\n                                currentLandmarkPlacement.value = undefined;\n                            }\n                        }\n\n                    }\n                })\n            })\n        })\n    },\n    planeWidgetEndInteraction(widget) {\n        Object.entries(planeWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const cInfo = { domain, id }\n                        // When widget moved, update value in allSetConstraints\n                        const widgetState = widget.getWidgetState()\n                        setConstraintLocation({ name: label }, cInfo, {\n                            type: 'plane',\n                            data: {\n                                origin: widgetState.getOrigin(),\n                                normal: widgetState.getNormal(),\n                            }\n                        })\n                        this.updateConstraintColors()\n                    }\n                })\n            })\n        })\n    },\n    paintWidgetEndInteraction(widget, inputData) {\n        Object.entries(paintWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const cInfo = { domain, id }\n                        const allPoints = inputData.getPoints()\n                        const tree = this.getShapeKDTree(label, domain, inputData)\n                        let cData = getConstraintLocation({ name: label }, cInfo)\n                        if (!cData) {\n                            const numPoints = allPoints.getNumberOfPoints()\n                            const points = Array.from({ length: numPoints }).map((v, i) => allPoints.getPoint(i))\n                            cData = {\n                                type: 'paint',\n                                data: {\n                                    field: {\n                                        points,\n                                        scalars: Array.from({ length: numPoints }).fill(1),\n                                    }\n                                }\n                            }\n                        }\n                        let paintedPoints = []\n                        widget.getWidgetState().getTrailList().forEach((state) => {\n                            const currentPoint = state.getOrigin()\n                            if (currentPoint) {\n                                paintedPoints = [\n                                    ...paintedPoints,\n                                    ...tree.nearest(\n                                        { x: currentPoint[0], y: currentPoint[1], z: currentPoint[2] },\n                                        allPoints.getNumberOfPoints(),\n                                        constraintPaintRadius.value * 2\n                                    )\n                                ]\n                            }\n                        })\n                        paintedPoints.forEach(([{ x, y, z },]) => {\n                            const pointIndex = cData.data.field.points.findIndex(\n                                (p) => p[0] === x && p[1] === y && p[2] === z\n                            )\n                            if (pointIndex >= 0 && pointIndex < cData.data.field.scalars.length) {\n                                cData.data.field.scalars[pointIndex] = constraintPaintExclusion.value ? 0 : 1\n                            }\n                        })\n                        setConstraintLocation({ name: label }, cInfo, cData)\n                        this.updateConstraintColors()\n                    }\n                })\n            })\n        })\n    },\n\n    // ---------------------\n    // Update widget states\n    // ---------------------\n    landmarkInfoUpdated(newInfo) {\n        const validWidgets = []\n        Object.entries(manipulators.value).forEach(([label, records]) => {\n            Object.entries(records).forEach(([domain,]) => {\n                newInfo.filter((lInfo) => lInfo.domain === domain).forEach((lInfo) => {\n                    const widget = this.getSeedWidget(label, domain, lInfo)\n                    const handle = widget.getWidgetState().getMoveHandle();\n                    validWidgets.push(widget)\n\n                    const location = getLandmarkLocation({ name: label }, lInfo)\n                    if (location && (\n                        !handle.getOrigin() ||\n                        handle.getOrigin().some((v, i) => v !== location[i])\n                    )) {\n                        handle.setOrigin(location)\n                    }\n                    if (handle.getColor3().some((v, i) => v !== lInfo.color[i])) {\n                        handle.setColor3(...lInfo.color);\n                    }\n                    if (handle.getScale1() != landmarkSize.value) {\n                        handle.setScale1(landmarkSize.value);\n                    }\n                })\n            })\n        })\n        seedWidgets.value = Object.fromEntries(\n            Object.entries(seedWidgets.value).map(([label, labelRecords]) => {\n                return [label, Object.fromEntries(\n                    Object.entries(labelRecords).map(([domain, shapeRecords]) => {\n                        return [domain, Object.fromEntries(\n                            Object.entries(shapeRecords).map(([id, seedWidget]) => {\n                                if (!validWidgets.includes(seedWidget)) {\n                                    this.getWidgetManager(label).removeWidget(seedWidget)\n                                    return [id, undefined]\n                                }\n                                return [id, seedWidget]\n                            })\n                        )]\n                    })\n                )]\n            })\n        )\n        this.render()\n    },\n    landmarkSizeUpdated() {\n        Object.values(seedWidgets.value).forEach((subjectWidgets) => {\n            Object.values(subjectWidgets).forEach((shapeWidgets) => {\n                Object.values(shapeWidgets).forEach((widget) => {\n                    const handle = widget.getWidgetState().getMoveHandle();\n                    if (handle.getScale1() != landmarkSize.value) {\n                        handle.setScale1(landmarkSize.value);\n                    }\n                })\n            })\n        })\n        this.render()\n    },\n    currentLandmarkPlacementUpdated(newPlacement) {\n        if (newPlacement) {\n            const label = newPlacement.subjectName\n            const domain = newPlacement.domain\n            const id = newPlacement.widgetID\n            const widgetManager = this.getWidgetManager(label)\n            const manipulator = this.getManipulator(label, domain)\n            if (manipulator) {\n                const widget = this.getSeedWidget(label, domain, { id, domain })\n                const pickList = manipulator.getPicker().getPickList()\n                if (pickList.length > 0) {\n                    const actor = pickList[0]\n                    widget.placeWidget(actor.getBounds());\n                    widgetManager.grabFocus(widget)\n                }\n            }\n        }\n    },\n    constraintInfoUpdated(newInfo) {\n        const validWidgets = []\n        Object.entries(manipulators.value).forEach(([label, records]) => {\n            Object.entries(records).forEach(([domain,]) => {\n                newInfo.filter((cInfo) => cInfo.domain === domain).forEach((cInfo) => {\n                    if (cInfo.type === 'plane') {\n                        const widget = this.getPlaneWidget(label, domain, cInfo)\n                        const widgetState = widget.getWidgetState()\n                        const cData = getConstraintLocation({ name: label }, cInfo)\n                        validWidgets.push(widget)\n\n                        let origin = cData?.data?.origin\n                        if (origin && widgetState.getOrigin().some((v, i) => v != origin[i])) {\n                            widgetState.setOrigin(origin)\n                        }\n                        let normal = cData?.data?.normal\n                        if (normal && widgetState.getNormal().some((v, i) => v != normal[i])) {\n                            widgetState.setNormal(normal)\n                        }\n\n                        widget.setVisibility(origin && normal && constraintsShown.value.includes(cInfo.id))\n                    }\n                })\n            })\n        })\n        planeWidgets.value = Object.fromEntries(\n            Object.entries(planeWidgets.value).map(([label, labelRecords]) => {\n                return [label, Object.fromEntries(\n                    Object.entries(labelRecords).map(([domain, shapeRecords]) => {\n                        return [domain, Object.fromEntries(\n                            Object.entries(shapeRecords).map(([id, planeWidget]) => {\n                                if (!validWidgets.includes(planeWidget)) {\n                                    this.getWidgetManager(label).removeWidget(planeWidget)\n                                    return [id, undefined]\n                                }\n                                return [id, planeWidget]\n                            })\n                        )]\n                    })\n                )]\n            })\n        )\n        this.updateConstraintColors()\n        this.render()\n    },\n    constraintsShownUpdated() {\n        this.constraintInfoUpdated(constraintInfo.value)\n    },\n    currentConstraintPlacementUpdated(newPlacement) {\n        if (newPlacement) {\n            const label = newPlacement.subjectName\n            const domain = newPlacement.domain\n            const id = newPlacement.widgetID\n            const widgetManager = this.getWidgetManager(label)\n            const manipulator = this.getManipulator(label, domain)\n            const cInfo = constraintInfo.value.find((c) =>\n                c.id == id && c.domain == domain\n            )\n            if (manipulator) {\n                const pickList = manipulator.getPicker().getPickList()\n                if (pickList.length > 0) {\n                    const actor = pickList[0]\n                    if (cInfo?.type === 'plane') {\n                        const bounds = actor.getBounds()\n                        const origin = [\n                            (bounds[0] + bounds[1]) / 2,\n                            (bounds[2] + bounds[3]) / 2,\n                            (bounds[4] + bounds[5]) / 2,\n                        ]\n                        const normal = [0, 0, 1]\n                        setConstraintLocation(\n                            { name: label },\n                            { id, domain },\n                            { type: 'plane', data: { origin, normal } },\n                        )\n                        currentConstraintPlacement.value = undefined\n                        this.constraintInfoUpdated(constraintInfo.value)\n                    } else if (manipulator && cInfo?.type === 'paint') {\n                        const mapper = actor.getMapper()\n                        const inputData = mapper.getInputData()\n                        const widget = this.getPaintWidget(label, domain, cInfo, inputData)\n                        widget.setRadius(constraintPaintRadius.value)\n                        widget.getWidgetState().getHandle().setVisible(true)\n                        widgetManager.grabFocus(widget);\n                        widget.getWidgetState().setActive(true)\n                    }\n                }\n            }\n        } else {\n            Object.entries(paintWidgets.value).forEach(([label, subjectRecords]) => {\n                const widgetManager = this.getWidgetManager(label)\n                if (widgetManager) {\n                    Object.values(subjectRecords).forEach((shapeRecords) => {\n                        Object.values(shapeRecords).forEach((widget) => {\n                            widget.getWidgetState().getHandle().setVisible(false)\n                            widget.getWidgetState().setActive(false)\n                            widgetManager.releaseFocus(widget)\n                        })\n                    })\n                }\n            })\n        }\n    },\n    updateConstraintColors() {\n        Object.entries(manipulators.value).forEach(([label, shapeManipulators]) => {\n            if (!allSetConstraints.value[label]) return\n            Object.entries(shapeManipulators).forEach(([domain, manipulator]) => {\n                const pickList = manipulator.getPicker().getPickList()\n                if (!pickList.length || !allSetConstraints.value[label][domain]) return\n                const actor = pickList[0]\n                const mapper = actor.getMapper()\n                const inputData = mapper.getInputData()\n                const allPoints = inputData.getPoints()\n                const allPointColors = inputData.getPointData().getArrayByName('color')\n                allPointColors.setData(\n                    new Uint8Array(allPoints.getNumberOfPoints()).fill(1)\n                )\n                Object.entries(allSetConstraints.value[label][domain]).forEach(\n                    ([id, cData]) => {\n                        if (constraintsShown.value.includes(parseInt(id))) {\n                            if (cData?.type === 'plane') {\n                                const { normal, origin } = cData.data\n                                let dot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\n                                for (let i = 0; i < allPoints.getNumberOfPoints(); i++) {\n                                    const point = allPoints.getPoint(i)\n                                    const pointColor = allPointColors.getValue(i)\n                                    if (pointColor == 1) {\n                                        // has not been excluded yet, check for exclusion\n                                        const dotProduct = dot(normal, [\n                                            origin[0] - point[0],\n                                            origin[1] - point[1],\n                                            origin[2] - point[2],\n                                        ])\n                                        if (dotProduct <= 0) {\n                                            // negative dotProduct means point is below plane\n                                            allPointColors.setValue(i, 0)\n                                        }\n                                    }\n                                }\n                            } else if (cData?.type === 'paint') {\n                                const { scalars } = cData.data.field\n                                const tree = this.getDataKDTree(label, domain, cData)\n                                if (scalars.length === allPoints.getNumberOfPoints()) {\n                                    for (let i = 0; i < scalars.length; i++) {\n                                        const pointColor = allPointColors.getValue(i)\n                                        if (pointColor == 1) {\n                                            // has not been excluded yet, check for exclusion\n                                            const currentPoint = allPoints.getPoint(i)\n                                            const currentPointObj = {\n                                                x: currentPoint[0],\n                                                y: currentPoint[1],\n                                                z: currentPoint[2],\n                                            }\n                                            const nearests = tree.nearest(currentPointObj, 1)\n                                            if (nearests.length) {\n                                                const [nearest,] = nearests[0]\n                                                if (nearest.i && nearest.i >= 0 && nearest.i < cData.data.field.scalars.length) {\n                                                    allPointColors.setValue(i, cData.data.field.scalars[nearest.i])\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                )\n                allPointColors.modified()\n                inputData.modified()\n            })\n        })\n        this.render()\n    },\n\n    // ---------------------\n    // Listeners\n    // ---------------------\n    watchWidgetStates() {\n        watch(landmarkInfo, _.debounce(this.landmarkInfoUpdated, 1000))\n        watch(landmarkSize, _.debounce(this.landmarkSizeUpdated, 1000))\n        watch(currentLandmarkPlacement, _.debounce(this.currentLandmarkPlacementUpdated, 1000))\n        watch(constraintInfo, _.debounce(this.constraintInfoUpdated, 1000))\n        watch(constraintsShown, _.debounce(this.constraintsShownUpdated, 1000))\n        watch(currentConstraintPlacement, _.debounce(this.currentConstraintPlacementUpdated, 1000))\n        watch(allSetConstraints, _.debounce(this.updateConstraintColors, 1000))\n    },\n}\n","import vtkImageMapper from 'vtk.js/Sources/Rendering/Core/ImageMapper';\nimport vtkImageSlice from 'vtk.js/Sources/Rendering/Core/ImageSlice';\nimport vtkImageCropFilter from 'vtk.js/Sources/Filters/General/ImageCropFilter';\nimport vtkCutter from 'vtk.js/Sources/Filters/Core/Cutter';\nimport vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\nimport vtkPlane from 'vtk.js/Sources/Common/DataModel/Plane';\nimport vtkActor from 'vtk.js/Sources/Rendering/Core/Actor';\nimport vtkProperty from 'vtk.js/Sources/Rendering/Core/Property';\nimport vtkCalculator from 'vtk.js/Sources/Filters/General/Calculator';\nimport vtkGlyph3DMapper from 'vtk.js/Sources/Rendering/Core/Glyph3DMapper';\nimport vtkSphereSource from 'vtk.js/Sources/Filters/Sources/SphereSource';\nimport { FieldDataTypes } from 'vtk.js/Sources/Common/DataModel/DataSet/Constants';\nimport { AttributeTypes } from 'vtk.js/Sources/Common/DataModel/DataSetAttributes/Constants';\n\n\nimport { ref, watch } from 'vue'\nimport {\n    imageViewMode,\n    imageViewIntersectMode,\n    imageViewIntersectCropMode,\n    imageViewAxis,\n    imageViewSlices,\n    imageViewSliceRanges,\n    imageViewCroppedSliceRanges,\n    imageViewWindow,\n    imageViewWindowRange,\n    imageViewLevel,\n    imageViewLevelRange,\n} from '@/store'\n\nconst slices = ref([])\n\nexport default {\n    createSlice(renderer) {\n        const sliceActor = vtkImageSlice.newInstance();\n        const imageMapper = vtkImageMapper.newInstance();\n        const cutPlane = vtkPlane.newInstance();\n        const cutter = vtkCutter.newInstance();\n        const cutMapper = vtkMapper.newInstance();\n        const cutActor = vtkActor.newInstance();\n        const cropFilter = vtkImageCropFilter.newInstance();\n        const particleFilter = vtkCalculator.newInstance();\n        const filteredParticleSphere = vtkSphereSource.newInstance();\n        const filteredParticleActor = vtkActor.newInstance();\n        const filteredParticleMapper = vtkGlyph3DMapper.newInstance();\n\n        sliceActor.setMapper(imageMapper);\n        renderer.addActor(sliceActor);\n\n        cutter.setCutFunction(cutPlane);\n        cutMapper.setInputConnection(cutter.getOutputPort());\n        cutActor.setMapper(cutMapper);\n\n        const cutProperty = cutActor.getProperty();\n        cutProperty.setRepresentation(vtkProperty.Representation.WIREFRAME);\n        cutProperty.setLighting(false);\n        cutProperty.setColor(0, 1, 0);\n        cutProperty.setLineWidth(5);\n        cutActor.setVisibility(false);\n\n        particleFilter.setFormula({\n            getArrays: () => ({\n                input: [{\n                    location: FieldDataTypes.COORDINATE,\n                }],\n                output: [{\n                    location: FieldDataTypes.POINT,\n                    name: 'visible',\n                    dataType: Float32Array,\n                    attribute: AttributeTypes.SCALARS,\n                    numberOfComponents: 1,\n                }]\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [visible] = arraysOut.map((d) => d.getData());\n\n                const imageBounds = cropFilter.getInputData().getBounds()\n                let currentAxis;\n                let axisBounds;\n                switch (imageMapper.getSlicingMode()) {\n                    case 0:\n                        currentAxis = 'x';\n                        axisBounds = imageBounds.slice(0, 2);\n                        break;\n                    case 1:\n                        currentAxis = 'y'\n                        axisBounds = imageBounds.slice(2, 4)\n                        break;\n                    default:\n                        currentAxis = 'z'\n                        axisBounds = imageBounds.slice(4, 6)\n                        break;\n                }\n                const sliceRange = imageViewSliceRanges.value[currentAxis]\n                const currentSlice = imageViewSlices.value[currentAxis]\n                const numSlices = sliceRange[1] - sliceRange[0]\n                const sliceThickness = (axisBounds[1] - axisBounds[0]) / numSlices\n                const slicePosition = (\n                    (currentSlice - sliceRange[0]) / (sliceRange[1] - sliceRange[0])\n                    * (axisBounds[1] - axisBounds[0]) + axisBounds[0]\n                )\n\n                for (var i = 0; i < visible.length; i++) {\n                    const location = coords.slice(i * 3, i * 3 + 3)\n                    const axisCoord = location[imageMapper.getSlicingMode()]\n                    if (\n                        axisCoord >= slicePosition &&\n                        axisCoord < (slicePosition + sliceThickness)\n                    ) {\n                        visible[i] = 1\n                    }\n                }\n\n                arraysOut.forEach(x => x.modified())\n            }\n        })\n        filteredParticleMapper.setScaleModeToScaleByMagnitude();\n        filteredParticleMapper.setScaleFactor(this.glyphSize);\n        filteredParticleMapper.setScaleArray('visible')\n        filteredParticleMapper.setInputConnection(particleFilter.getOutputPort(), 0)\n        filteredParticleMapper.setInputConnection(filteredParticleSphere.getOutputPort(), 1)\n        filteredParticleActor.setMapper(filteredParticleMapper);\n\n        const slice = {\n            renderer,\n            sliceActor,\n            imageMapper,\n            cutPlane,\n            cutter,\n            cutMapper,\n            cutActor,\n            cropFilter,\n            particleFilter,\n            filteredParticleMapper,\n            filteredParticleActor,\n        }\n        slices.value.push(slice)\n        return slice\n    },\n    updateSlice(slice) {\n        const { sliceActor, imageMapper, renderer } = slice;\n\n        let cameraPosition, cameraDirection, cameraViewUp;\n        const camera = renderer.getActiveCamera();\n        const center = sliceActor.getCenter();\n        const distance = camera.getDistance();\n\n        if (['X', 'L'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('I');\n            imageMapper.setISlice(imageViewSlices.value.x);\n            cameraPosition = [\n                center[0] + distance,\n                center[1],\n                center[2],\n            ]\n            cameraDirection = [-1, 0, 0]\n            cameraViewUp = [0, 1, 0]\n        } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('J');\n            imageMapper.setJSlice(imageViewSlices.value.y);\n            cameraPosition = [\n                center[0],\n                center[1] + distance,\n                center[2],\n            ]\n            cameraDirection = [0, -1, 0]\n            cameraViewUp = [0, 0, -1]\n        } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('K');\n            imageMapper.setKSlice(imageViewSlices.value.z);\n            cameraPosition = [\n                center[0],\n                center[1],\n                center[2] + distance,\n            ]\n            cameraDirection = [0, 0, -1]\n            cameraViewUp = [0, 1, 0]\n        }\n\n        if (cameraPosition && cameraDirection && cameraViewUp) {\n            camera.setPosition(...cameraPosition)\n            camera.setDirectionOfProjection(...cameraDirection)\n            camera.setViewUp(...cameraViewUp)\n        }\n\n        if (imageViewIntersectMode.value) {\n            this.updateCuttingPlane(slice)\n        }\n        renderer.resetCamera()\n    },\n    updateIntersection(slice) {\n        const {\n            renderer, cutter, cutActor,\n            filteredParticleActor, particleFilter, cropFilter,\n        } = slice\n\n        const intersectionShape = renderer.getActors().find((actor) => actor.getClassName() != \"vtkImageSlice\")\n        if (intersectionShape) {\n            if (imageViewIntersectCropMode.value) {\n                // Compare bounds to find crop proportions, apply proportion to image slices\n                const fullBounds = cropFilter.getInputData().getBounds()\n                const fullSlices = [\n                    ...imageViewSliceRanges.value.x,\n                    ...imageViewSliceRanges.value.y,\n                    ...imageViewSliceRanges.value.z,\n                ]\n                const padding = 0.01 // pad crop by 1%\n                const cropToBounds = intersectionShape.getBounds()\n                const cropToProportions = cropToBounds.map((v, i) => {\n                    const minIndex = Math.floor((i) / 2) * 2\n                    const maxIndex = minIndex + 1\n                    const padValue = i % 2 === 0 ? 0 - padding : padding\n                    return (v - fullBounds[minIndex]) / (fullBounds[maxIndex] - fullBounds[minIndex]) + padValue\n                })\n                const cropToSlices = cropToProportions.map((v, i) => {\n                    const minIndex = Math.floor((i) / 2) * 2\n                    const maxIndex = minIndex + 1\n                    return v * (fullSlices[maxIndex] - fullSlices[minIndex]) + fullSlices[minIndex]\n                })\n                imageViewCroppedSliceRanges.value = {\n                    x: cropToSlices.slice(0, 2),\n                    y: cropToSlices.slice(2, 4),\n                    z: cropToSlices.slice(4, 6),\n                }\n                // clamp current slices to cropped ranges\n                imageViewSlices.value = Object.fromEntries(\n                    Object.entries(imageViewSlices.value).map(([axis, slice]) => {\n                        const [min, max] = imageViewCroppedSliceRanges.value[axis]\n                        if (slice < min) return [axis, min]\n                        if (slice > max) return [axis, max]\n                        return [axis, slice]\n                    })\n                )\n                cropFilter.setCroppingPlanes(cropToSlices)\n            } else {\n                cropFilter.reset()\n            }\n            cutter.setInputData(intersectionShape.getMapper().getInputData())\n            cutActor.setVisibility(imageViewIntersectMode.value)\n            cutActor.setPosition(1, 1, 1) // ensure cutActor is always in front of sliceActor\n            intersectionShape.setVisibility(!imageViewIntersectMode.value)\n            renderer.addActor(cutActor);\n            renderer.resetCamera()\n        }\n\n        // If particles shown, filter by slice bounds\n        const particles = renderer.getActors().map(\n            (a) => ({\n                mapper: a.getMapper(),\n                actor: a\n            })\n        ).find(\n            ({ mapper }) => mapper.getClassName() === 'vtkGlyph3DMapper'\n        )\n        if (particles) {\n            particles.actor.setVisibility(!imageViewIntersectMode.value);\n            particleFilter.setInputData(particles.mapper.getInputData())\n            filteredParticleActor.setVisibility(imageViewIntersectMode.value)\n            renderer.addActor(filteredParticleActor)\n        } else {\n            filteredParticleActor.setVisibility(false)\n        }\n        this.render()\n    },\n    updateCuttingPlane(slice) {\n        const { imageMapper, cutPlane, particleFilter } = slice;\n\n        const sliceBounds = imageMapper.getBoundsForSlice()\n        let origin = [sliceBounds[0], sliceBounds[2], sliceBounds[4]]\n        let normal = [0, 0, 0]\n        normal[imageMapper.getSlicingMode()] = 1\n        cutPlane.setOrigin(origin)\n        cutPlane.setNormal(normal)\n\n        // If filtering particles, call modified to trigger filter evaluation\n        particleFilter.getInputData()?.modified()\n    },\n    updateGlyphSize(glyphSize) {\n        slices.value.forEach(({ filteredParticleMapper }) => {\n            filteredParticleMapper.setScaleFactor(glyphSize)\n        })\n        this.render()\n    },\n    addImage(imageData, renderer) {\n        let slice = slices.value.find((s) => s.renderer == renderer)\n        if (!slice) slice = this.createSlice(renderer)\n\n        imageViewMode.value = true\n\n        slice.cropFilter.setInputData(imageData)\n        slice.cropFilter.reset()\n        slice.imageMapper.setInputConnection(slice.cropFilter.getOutputPort())\n        slice.sliceActor.getProperty().setColorWindow(imageViewWindow.value)\n        slice.sliceActor.getProperty().setColorLevel(imageViewLevel.value)\n\n        const dataRange = imageData.getPointData().getScalars().getRange();\n        imageViewLevelRange.value = dataRange\n        imageViewLevel.value = (dataRange[1] - dataRange[0]) / 2 + dataRange[0]\n        imageViewWindowRange.value = [0, (dataRange[1] - dataRange[0])]\n        imageViewWindow.value = imageViewWindowRange.value[1]\n\n        const extent = imageData.getExtent();\n        imageViewSliceRanges.value = {\n            x: [extent[0], extent[1]],\n            y: [extent[2], extent[3]],\n            z: [extent[4], extent[5]],\n        }\n        imageViewCroppedSliceRanges.value = imageViewSliceRanges.value\n\n        if (imageViewIntersectMode.value || imageViewIntersectCropMode.value) this.imageViewIntersectModeUpdated()\n        this.updateSlice(slice)\n    },\n    imageViewModeUpdated() {\n        // resize render window when visibility of image render options changes\n        this.resize();\n        this.render();\n    },\n    imageViewAxisUpdated() {\n        slices.value.forEach((slice) => {\n            this.updateSlice(slice)\n        })\n        this.render()\n    },\n    imageViewSliceUpdated() {\n        if (!imageViewAxis.value) {\n            return undefined\n        }\n        slices.value.forEach((slice) => {\n            const { imageMapper } = slice;\n\n            if (['X', 'L'].includes(imageViewAxis.value)) {\n                imageMapper.setISlice(imageViewSlices.value.x);\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                imageMapper.setJSlice(imageViewSlices.value.y);\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                imageMapper.setKSlice(imageViewSlices.value.z);\n            }\n            if (imageViewIntersectMode.value) {\n                this.updateCuttingPlane(slice)\n            }\n        })\n        this.render()\n    },\n    imageViewWindowUpdated() {\n        slices.value.forEach(({ sliceActor }) => {\n            sliceActor.getProperty().setColorWindow(imageViewWindow.value)\n        })\n        this.render()\n    },\n    imageViewLevelUpdated() {\n        slices.value.forEach(({ sliceActor }) => {\n            sliceActor.getProperty().setColorLevel(imageViewLevel.value)\n        })\n        this.render()\n    },\n    imageViewIntersectModeUpdated() {\n        slices.value.forEach((slice) => {\n            this.updateIntersection(slice);\n            this.updateCuttingPlane(slice);\n        })\n        this.render()\n    },\n    watchImageStates() {\n        watch(imageViewMode, this.imageViewModeUpdated)\n        watch(imageViewAxis, this.imageViewAxisUpdated)\n        watch(imageViewSlices, this.imageViewSliceUpdated, { deep: true })\n        watch(imageViewWindow, this.imageViewWindowUpdated)\n        watch(imageViewLevel, this.imageViewLevelUpdated)\n        watch(imageViewIntersectMode, this.imageViewIntersectModeUpdated)\n        watch(imageViewIntersectCropMode, this.imageViewIntersectModeUpdated)\n    },\n    resetImageSlices() {\n        slices.value = []\n    },\n    resetIntersections() {\n        slices.value.forEach(this.updateIntersection)\n    }\n}\n","import vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkRenderer from 'vtk.js/Sources/Rendering/Core/Renderer';\nimport vtkSphereSource from 'vtk.js/Sources/Filters/Sources/SphereSource';\nimport vtkImageMarchingCubes from 'vtk.js/Sources/Filters/General/ImageMarchingCubes';\nimport vtkOrientationMarkerWidget from 'vtk.js/Sources/Interaction/Widgets/OrientationMarkerWidget';\nimport vtkArrowSource from 'vtk.js/Sources/Filters/Sources/ArrowSource'\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\nimport vtkActor from 'vtk.js/Sources/Rendering/Core/Actor';\nimport vtkCalculator from 'vtk.js/Sources/Filters/General/Calculator';\nimport vtkCamera from 'vtk.js/Sources/Rendering/Core/Camera';\nimport vtkGlyph3DMapper from 'vtk.js/Sources/Rendering/Core/Glyph3DMapper';\nimport { AttributeTypes } from 'vtk.js/Sources/Common/DataModel/DataSetAttributes/Constants';\nimport { ColorMode, ScalarMode } from 'vtk.js/Sources/Rendering/Core/Mapper/Constants';\nimport { FieldDataTypes } from 'vtk.js/Sources/Common/DataModel/DataSet/Constants';\n\nimport {\n    renderLoading, layers, layersShown, orientationIndicator, imageViewIntersectMode,\n    cachedMarchingCubes, cachedParticleComparisonColors, vtkShapesByType,\n    analysisFilesShown, currentAnalysisParticlesFiles, meanAnalysisParticlesFiles,\n    showDifferenceFromMeanMode, cachedParticleComparisonVectors,\n    cacheComparison, calculateComparisons, deepSSMDataTab, uniformScale,\n    showGoodBadParticlesMode, goodBadMaxAngle, goodBadAngles, deepSSMErrorGlobalRange,\n} from '@/store';\nimport { SPHERE_RESOLUTION } from '@/store/constants';\nimport widgetSync from './widgetSync';\nimport imageSync from './imageSync';\n\nexport const GOOD_BAD_COLORS = [\n    [0, 255, 0],\n    [255, 0, 0],\n];\nconst COLORS = [\n    [166, 206, 227],\n    [31, 120, 180],\n    [178, 223, 138],\n    [51, 160, 44],\n    [251, 154, 153],\n    [227, 26, 28],\n    [253, 191, 111],\n    [255, 127, 0],\n    [202, 178, 214],\n    [106, 61, 154],\n    [255, 255, 153],\n    [177, 89, 40],\n];\n\nexport default {\n    ...widgetSync,\n    ...imageSync,\n    async resize() {\n        await this.$nextTick();\n        if (this.vtk.renderWindow) {\n            this.updateSize();\n        }\n    },\n    updateSize() {\n        const el = this.$refs.vtk;\n        if (el) {\n            const { width, height } = el.getBoundingClientRect();\n            this.vtk.openglRenderWindow.setSize(width, height);\n            this.render();\n        }\n    },\n    newOrientationCube(interactor) {\n        return vtkOrientationMarkerWidget.newInstance({\n            actor: orientationIndicator.value,\n            interactor: interactor,\n            viewportSize: 0.1,\n            minPixelSize: 100,\n            maxPixelSize: 300,\n            viewportCorner: vtkOrientationMarkerWidget.Corners.TOP_RIGHT,\n        });\n    },\n    initializeCameras() {\n        this.initialCameraStates = {\n            position: {},\n            viewUp: {},\n        }\n        Object.values(this.vtk.renderers).forEach((renderer, index) => {\n            const camera = renderer.getActiveCamera();\n            this.initialCameraStates.position[`renderer_${index}`] = [...camera.getReferenceByName('position')]\n            this.initialCameraStates.viewUp[`renderer_${index}`] = [...camera.getReferenceByName('viewUp')]\n        })\n    },\n    getCameraDelta(renderer) {\n        if (!renderer) return {\n            positionDelta: undefined,\n            viewUpDelta: undefined,\n        }\n        const targetCamera = renderer.getActiveCamera();\n        const rendererIndex = Object.values(this.vtk.renderers).indexOf(renderer)\n\n        if (rendererIndex >= 0) {\n            const targetRendererID = `renderer_${rendererIndex}`\n            this.initialCameraPosition = this.initialCameraStates.position[targetRendererID]\n            this.initialCameraViewUp = this.initialCameraStates.viewUp[targetRendererID]\n            this.newCameraPosition = targetCamera.getReferenceByName('position')\n            this.newCameraViewUp = targetCamera.getReferenceByName('viewUp')\n        }\n        const positionDelta = [...this.newCameraPosition].map(\n            (num, index) => num - this.initialCameraPosition[index]\n        )\n        const viewUpDelta = [...this.newCameraViewUp].map(\n            (num, index) => num - this.initialCameraViewUp[index]\n        )\n        return {\n            positionDelta,\n            viewUpDelta,\n        }\n    },\n    applyCameraDelta(renderer, positionDelta, viewUpDelta) {\n        const camera = renderer.getActiveCamera();\n        const rendererIndex = Object.values(this.vtk.renderers).indexOf(renderer)\n        const rendererID = `renderer_${rendererIndex}`\n        if (this.initialCameraStates.position[rendererID]) {\n            camera.setPosition(\n                ...this.initialCameraStates.position[rendererID].map(\n                    (old, index) => old + positionDelta[index]\n                )\n            )\n            camera.setViewUp(\n                ...this.initialCameraStates.viewUp[rendererID].map(\n                    (old, index) => old + viewUpDelta[index]\n                )\n            )\n        }\n        renderer.resetCameraClippingRange()\n    },\n    syncCameras(animation) {\n        const targetRenderer = animation.pokedRenderer;\n        const { positionDelta, viewUpDelta } = this.getCameraDelta(targetRenderer)\n\n        Object.values(this.vtk.renderers).filter(\n            (renderer) => renderer !== targetRenderer\n        ).forEach((renderer) => {\n            this.applyCameraDelta(renderer, positionDelta, viewUpDelta)\n        })\n    },\n    createColorFilter(domainIndex = 0, goodBad = false) {\n        const filter = vtkCalculator.newInstance()\n        filter.setFormula({\n            getArrays() {\n                return {\n                    input: [{ location: FieldDataTypes.COORDINATE }],\n                    output: [{\n                        location: FieldDataTypes.POINT,\n                        name: 'color',\n                        dataType: 'Uint8Array',\n                        attribute: AttributeTypes.SCALARS,\n                        numberOfComponents: 3,\n                    }],\n                };\n            },\n            evaluate(input, output) {\n                const [coords] = input.map((d) => d.getData());\n                const [color] = output.map((d) => d.getData());\n\n                const n = coords.length / 3;\n                for (let i = 0; i < n; i += 1) {\n                    let c = COLORS[i % COLORS.length];\n\n                    if (goodBad && analysisFilesShown.value?.length) {\n                        if (goodBadAngles.value[domainIndex][i] < goodBadMaxAngle.value) {\n                            c = GOOD_BAD_COLORS[0] // green\n                        } else {\n                            c = GOOD_BAD_COLORS[1] // red\n                        }\n                    }\n                    if (c) {\n                        color[3 * i] = c[0];\n                        color[3 * i + 1] = c[1];\n                        color[3 * i + 2] = c[2];\n                    }\n                }\n                input.forEach((x) => x.modified());\n            },\n        });\n        return filter;\n    },\n    addPoints(renderer, points, i) {\n        let size = this.glyphSize\n        let source = vtkSphereSource.newInstance({\n            thetaResolution: SPHERE_RESOLUTION,\n            phiResolution: SPHERE_RESOLUTION,\n        });\n        const mapper = vtkGlyph3DMapper.newInstance({\n            scaleMode: vtkGlyph3DMapper.SCALE_BY_CONSTANT,\n            scaleFactor: size,\n        });\n        const actor = vtkActor.newInstance();\n        const filter = this.createColorFilter(i, showGoodBadParticlesMode.value);\n\n        filter.setInputData(points, 0);\n        mapper.setInputConnection(filter.getOutputPort(), 0);\n        mapper.setInputConnection(source.getOutputPort(), 1);\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        this.vtk.pointMappers.push(mapper);\n    },\n    addShapes(renderer, shapes) {\n        let label;\n        Object.entries(this.vtk.renderers).forEach(([l, r]) => {\n            if (renderer == r) label = l\n        })\n        shapes.forEach(\n            (shapeDatas, domainIndex) => {\n                shapeDatas.forEach(\n                    (shapeData) => {\n                        let layerName = Object.entries(vtkShapesByType.value).filter(\n                            ([, shapes]) => shapes.includes(shapeData)\n                        ).map(\n                            ([layerName,]) => layerName\n                        )\n                        layerName = layerName.length ? layerName[0] : \"Original\"\n                        const type = layers.value.find((layer) => layer.name === layerName)\n                        let opacity = 1;\n                        if (!analysisFilesShown.value?.length) {\n                            const numLayers = layersShown.value.filter(\n                                (layerName) => layers.value.find((layer) => layer.name == layerName).rgb\n                            ).length\n                            if (numLayers > 0) opacity /= numLayers\n                        }\n                        const cacheLabel = `${label}_${layerName}_${domainIndex}`\n\n                        const mapper = vtkMapper.newInstance({\n                            colorMode: ColorMode.MAP_SCALARS,\n                            scalarMode: ScalarMode.USE_POINT_FIELD_DATA,\n                        });\n                        if (shapeData.getClassName() == 'vtkImageData') {\n                            this.addImage(shapeData, renderer)\n                        } else {\n                            if (shapeData.getClassName() == 'vtkPolyData') {\n                                mapper.setInputData(shapeData);\n                            } else if (cachedMarchingCubes.value[cacheLabel]) {\n                                mapper.setInputData(cachedMarchingCubes.value[cacheLabel])\n                            } else {\n                                const marchingCube = vtkImageMarchingCubes.newInstance({\n                                    contourValue: 0.001,\n                                    computeNormals: true,\n                                    mergePoints: true,\n                                });\n                                marchingCube.setInputData(shapeData)\n                                mapper.setInputConnection(marchingCube.getOutputPort());\n                                cachedMarchingCubes.value[cacheLabel] = marchingCube.getOutputData()\n                            }\n                            if (showDifferenceFromMeanMode.value) {\n                                this.showDifferenceFromMean(mapper, renderer, label, domainIndex)\n                            }\n                            if ([1, 2].includes(deepSSMDataTab.value)) {\n                                let data;\n                                if (shapeData.getPointData().getArrayByName('deepssm_error')) {\n                                    data = shapeData.getPointData().getArrayByName('deepssm_error').getData()\n                                }\n\n                                if (data) {\n                                    let normalizeRange;\n                                    if (uniformScale.value) {\n                                        normalizeRange = deepSSMErrorGlobalRange.value\n                                    } else {\n                                        normalizeRange = [Math.min(...data), Math.max(...data)]\n                                    }\n                                    const normalizedData = data.map((v) => v / (normalizeRange[1] - normalizeRange[0]))\n                                    const normalizedArray = vtkDataArray.newInstance({\n                                        name: 'deepssm_error_normalized',\n                                        values: normalizedData,\n                                    })\n                                    shapeData.getPointData().addArray(normalizedArray)\n                                    mapper.setColorByArrayName('deepssm_error_normalized')\n                                    mapper.setLookupTable(this.lookupTable)\n                                }\n                            }\n                            const actor = vtkActor.newInstance();\n                            if (type) actor.getProperty().setColor(...type.rgb);\n                            actor.getProperty().setOpacity(opacity);\n                            actor.setMapper(mapper);\n                            renderer.addActor(actor);\n                        }\n                    }\n                )\n            }\n        )\n    },\n    showDifferenceFromMean(mapper, renderer, label, index) {\n        if (!analysisFilesShown.value\n            || !currentAnalysisParticlesFiles.value\n            || !meanAnalysisParticlesFiles.value\n            || !this.metaData[label]\n            || !this.metaData[label][index]) return\n\n        // color values should be between 0 and 1\n        // 0.5 is green, representing no difference between particles\n        const targetMetaData = this.metaData[label][index]\n        const currentPoints = targetMetaData.current.points.getPoints().getData()\n        const meanPoints = targetMetaData.mean.points.getPoints().getData()\n\n        const particleComparisonKey = currentAnalysisParticlesFiles.value[index]\n        let colorValues;\n        let vectorValues;\n        if (\n            particleComparisonKey in cachedParticleComparisonColors.value\n            && particleComparisonKey in cachedParticleComparisonVectors.value\n        ) {\n            colorValues = cachedParticleComparisonColors.value[particleComparisonKey]\n            vectorValues = cachedParticleComparisonVectors.value[particleComparisonKey]\n        } else {\n            const comparisons = calculateComparisons(mapper, currentPoints, meanPoints);\n            colorValues = comparisons.colorValues;\n            vectorValues = comparisons.vectorValues;\n\n            cacheComparison(colorValues, vectorValues, particleComparisonKey);\n        }\n\n        if (vectorValues) {\n            const vectorMapper = vtkGlyph3DMapper.newInstance({\n                colorMode: ColorMode.MAP_SCALARS,\n                scalarMode: ScalarMode.USE_POINT_FIELD_DATA,\n            })\n            const vectorActor = vtkActor.newInstance()\n            const vectorSource = vtkPolyData.newInstance()\n            const vectorShape = vtkArrowSource.newInstance();\n\n            const verts = new Uint32Array(vectorValues.length + 1)\n            verts[0] = vectorValues.length\n            for (let i = 0; i < vectorValues.length; i++) {\n                verts[i + 1] = i\n            }\n            let locations = []\n            let orientations = []\n            let colors = []\n\n            for (let i = 0; i < vectorValues.length; i++) {\n                const [x, y, z, d, dx, dy, dz] = vectorValues[i]\n                if (d < 0) {\n                    const shift = 3  // based on arrow size\n                    locations.push([x + dx * shift, y + dy * shift, z + dz * shift])\n                    orientations.push([-dx, -dy, -dz])\n                    colors.push(d / 10 + 0.5)\n                } else if (d > 0) {\n                    locations.push([x + dx, y + dy, z + dz])\n                    orientations.push([dx, dy, dz])\n                    colors.push(d / 10 + 0.5)\n                }\n            }\n\n            vectorSource.getPointData().addArray(\n                vtkDataArray.newInstance({\n                    name: 'color',\n                    values: colors\n                })\n            )\n            vectorSource.getPointData().addArray(\n                vtkDataArray.newInstance({\n                    name: 'normal',\n                    values: orientations.flat(),\n                    numberOfComponents: 3\n                })\n            )\n            vectorSource.getPoints().setData(locations.flat(), 3)\n            vectorSource.getVerts().setData(verts);\n            vectorActor.setMapper(vectorMapper)\n            vectorMapper.setInputData(vectorSource)\n            vectorMapper.addInputConnection(vectorShape.getOutputPort(), 1)\n            vectorMapper.setScaleFactor(5)\n            vectorMapper.setColorByArrayName('color')\n            vectorMapper.setOrientationArray('normal')\n            vectorMapper.setLookupTable(this.lookupTable)\n            renderer.addActor(vectorActor)\n        }\n\n        const colorArray = vtkDataArray.newInstance({\n            name: 'color',\n            values: colorValues\n        })\n        mapper.getInputData().getPointData().addArray(colorArray)\n        mapper.getInputData().modified()\n        mapper.setLookupTable(this.lookupTable)\n        mapper.setColorByArrayName('color')\n\n        if (showDifferenceFromMeanMode.value) {\n            this.lookupTable.setMappingRange(0, 1)\n            this.lookupTable.updateRange();\n            this.prepareColorScales()\n        }\n\n        this.render()\n    },\n    prepareColorScales() {\n        const canvasDiv = this.$refs.colors\n        const titleDiv = this.$refs.colorsTitle\n        const labelsDiv = this.$refs.colorsLabels\n        canvasDiv.innerHTML = \"\"\n        titleDiv.innerHTML = \"\"\n        labelsDiv.innerHTML = \"\"\n        if (showDifferenceFromMeanMode.value || uniformScale.value) {\n            const canvas = document.createElement('canvas')\n            canvas.style.right = \"10px\"\n            canvas.style.height = \"100%\"\n            canvas.style.width = \"20px\"\n            canvasDiv.appendChild(canvas)\n\n            const labels = document.createElement('div')\n            labels.style.right = \"35px\"\n            labels.style.height = \"100%\"\n            labelsDiv.appendChild(labels)\n\n            let range = [-5, 5]\n            if (showDifferenceFromMeanMode.value) {\n                titleDiv.innerHTML = \"Distance from particle on mean shape\"\n            } else if (uniformScale.value) {\n                titleDiv.innerHTML = \"DeepSSMError\"\n                range = deepSSMErrorGlobalRange.value\n            }\n            this.prepareColorScale(canvas, labels, range)\n        } else {\n            Object.entries(this.data).forEach(([, data], i) => {\n                // if the shape (vtk only) doesn't have the deepssm_error array, don't show the color scale\n                if (data[0].shape.filter((shape) => shape.getClassName() === 'vtkPolyData' && !shape.getPointData().getArrayByName('deepssm_error')).length > 0) {\n                    return;\n                }\n                const [, y1, x2, y2] = this.grid[i]\n                const canvas = document.createElement('canvas')\n                canvas.style.top = `calc(${(1 - y2) * 100}%)`\n                canvas.style.right = `calc(${(1 - x2) * 100}% + 10px)`\n                canvas.style.height = `${(y2 - y1) * 96}%`\n                canvas.style.width = \"10px\"\n                canvasDiv.appendChild(canvas)\n\n                const labels = document.createElement('div')\n                labels.style.top = `calc(${(1 - y2) * 100}%)`\n                labels.style.right = `calc(${(1 - x2) * 100}% + 35px)`\n                labels.style.height = `${(y2 - y1) * 96}%`\n                labelsDiv.appendChild(labels)\n\n                let range = [-5, 5]\n                data[0].shape.forEach((shape) => {\n                    if (shape.getClassName() === 'vtkPolyData') {\n                        const arr = shape.getPointData().getArrayByName('deepssm_error').getData()\n                        if (arr) range = [Math.min(...arr), Math.max(...arr)]\n                    }\n                })\n                this.prepareColorScale(canvas, labels, range)\n            })\n        }\n    },\n    prepareColorScale(canvas, labels, range) {\n        if (canvas && labels) {\n            canvas.style.position = \"absolute\"\n            canvas.style.zIndex = \"1\"\n            const { width, height } = canvas\n            const context = canvas.getContext('2d', { willReadFrequently: true });\n            const pixelsArea = context.getImageData(0, 0, width, height);\n            const colorsData = this.lookupTable.getUint8Table(\n                ...this.lookupTable.getMappingRange(),\n                height * width,\n                true\n            )\n            pixelsArea.data.set(colorsData)\n            context.putImageData(pixelsArea, 0, 0)\n\n            const labelProportions = [1, 0.75, 0.5, 0.25, 0];\n            labels.innerHTML = ''\n            labels.style.position = \"absolute\"\n            labels.style.display = \"flex\"\n            labels.style.flexDirection = \"column\"\n            labels.style.justifyContent = \"space-between\"\n            labels.style.alignItems = \"flex-end\"\n            labels.style.textAlign = \"right\"\n            labelProportions.forEach((p) => {\n                const child = document.createElement('span');\n                child.innerHTML = Math.round(p * (range[1] - range[0]) + range[0]);\n                labels.appendChild(child);\n            })\n        }\n    },\n    prepareLabelCanvas() {\n        const labelCanvas = this.$refs.labels\n        const labelCanvasContext = labelCanvas.getContext('2d')\n        const { clientWidth, clientHeight } = this.$refs.vtk;\n        // increase the resolution of the canvas so text isn't blurry\n        labelCanvas.width = clientWidth;\n        labelCanvas.height = clientHeight;\n\n        labelCanvasContext.clearRect(0, 0, labelCanvas.width, labelCanvas.height)\n        labelCanvasContext.font = \"16px Arial\";\n        labelCanvasContext.fillStyle = \"white\";\n    },\n    populateRenderer(renderer, shapes) {\n        this.addShapes(renderer, shapes.map(({ shape }) => shape));\n        shapes.map(({ points }) => points).forEach((pointSet, i) => {\n            if (pointSet.getNumberOfPoints() > 0) {\n                this.addPoints(renderer, pointSet, i);\n            }\n        })\n\n        const camera = vtkCamera.newInstance();\n        renderer.setActiveCamera(camera);\n        renderer.resetCamera();\n    },\n    renderGrid() {\n        this.vtk.interactor.disable()\n        Object.values(this.vtk.widgetManagers).forEach((wm) => {\n            wm.disablePicking()\n        })\n\n        this.resetImageSlices()\n        this.prepareLabelCanvas();\n        let positionDelta, viewUpDelta\n\n        const renderers = Object.values(this.vtk.renderers)\n        for (let i = 0; i < renderers.length; i += 1) {\n            if (!positionDelta || !viewUpDelta) {\n                ({ positionDelta, viewUpDelta } = this.getCameraDelta(Object.values(this.vtk.renderers)[0]))\n            }\n            this.vtk.renderWindow.removeRenderer(renderers[i]);\n        }\n        if (this.vtk.orientationCube) this.vtk.orientationCube.setEnabled(false)\n        this.vtk.renderers = {};\n        this.vtk.pointMappers = [];\n\n        const data = Object.entries(this.data)\n        for (let i = 0; i < data.length; i += 1) {\n            const [label, shapes] = data[i];\n            const newRenderer = vtkRenderer.newInstance({ background: [0.115, 0.115, 0.115] });\n            const bounds = this.grid[i];\n\n            const labelCanvas = this.$refs.labels\n            const labelCanvasContext = labelCanvas.getContext('2d')\n            labelCanvasContext.fillText(\n                label,\n                labelCanvas.width * bounds[0],\n                labelCanvas.height * (1 - bounds[1]) - 20\n            );\n            newRenderer.setViewport.apply(newRenderer, bounds);\n            this.vtk.renderers[label] = newRenderer;\n            this.vtk.renderWindow.addRenderer(newRenderer);\n            if (i < data.length) {\n                this.populateRenderer(newRenderer, shapes)\n            }\n        }\n        this.initializeCameras()\n        this.initializeWidgets()\n\n        if (positionDelta && viewUpDelta) {\n            Object.values(this.vtk.renderers).forEach((renderer) => {\n                this.applyCameraDelta(renderer, positionDelta, viewUpDelta)\n            })\n        }\n\n        // layers shown may have changed intersections\n        // this should be done after all layers are added\n        if (imageViewIntersectMode.value) this.resetIntersections()\n\n        else if ([1, 2].includes(deepSSMDataTab.value)) {\n            this.prepareColorScales()\n        }\n\n        if (!this.showColorScale) {\n            const targetRenderer = Object.values(this.vtk.renderers)[this.columns - 1]\n            if (targetRenderer) {\n                this.vtk.orientationCube.setParentRenderer(targetRenderer)\n                this.vtk.orientationCube.setEnabled(true);\n            }\n        }\n        this.vtk.interactor.enable()\n        this.render();\n        renderLoading.value = false;\n        setTimeout(\n            () => {\n                Object.values(this.vtk.widgetManagers).forEach((wm) => {\n                    wm.enablePicking()\n                })\n            }, 100\n        )\n    },\n    render() {\n        this.vtk.renderWindow.render();\n    },\n}\n","import 'vtk.js/Sources/Rendering/Profiles/All';\nimport vtkInteractorStyleTrackballCamera from 'vtk.js/Sources/Interaction/Style/InteractorStyleTrackballCamera';\nimport vtkOpenGLRenderWindow from 'vtk.js/Sources/Rendering/OpenGL/RenderWindow';\nimport vtkRenderWindow from 'vtk.js/Sources/Rendering/Core/RenderWindow';\nimport vtkRenderWindowInteractor from 'vtk.js/Sources/Rendering/Core/RenderWindowInteractor';\nimport vtkColorTransferFunction from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction';\nimport vtkColorMaps from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction/ColorMaps';\n\nimport methods from './methods';\nimport { vtkInstance, showDifferenceFromMeanMode, deepSSMDataTab } from '@/store';\n\n\nexport default {\n    props: {\n        data: {\n            type: Object,\n            required: true,\n        },\n        metaData: {\n            type: Object,\n            required: false,\n        },\n        rows: {\n            type: Number,\n            required: true,\n        },\n        columns: {\n            type: Number,\n            required: true,\n        },\n        glyphSize: {\n            type: Number,\n            required: true,\n        },\n        currentTab: {\n            type: String,\n            required: true,\n        },\n        drawerWidth: {\n            type: Number,\n            required: false,\n        },\n    },\n    computed: {\n        grid() {\n            const grid = [];\n            const nx = this.columns;\n            const ny = this.rows;\n            for (let y = 0; y < ny; y += 1) {\n                for (let x = 0; x < nx; x += 1) {\n                    const xmin = x / nx;\n                    const ymin = y / ny;\n                    const xmax = (x + 1) / nx;\n                    const ymax = (y + 1) / ny;\n                    grid.push([xmin, 1 - ymax, xmax, 1 - ymin]);\n                }\n            }\n            return grid;\n        },\n        showDifferenceFromMeanMode() {\n            return showDifferenceFromMeanMode.value\n        },\n        deepSSMDataTab() {\n            return deepSSMDataTab.value\n        },\n        showColorScale() {\n            return showDifferenceFromMeanMode.value || deepSSMDataTab.value >= 0\n        }\n    },\n    watch: {\n        data() {\n            this.renderGrid();\n        },\n        grid() {\n            this.renderGrid();\n        },\n        glyphSize() {\n            this.updateGlyphSize(this.glyphSize)\n            this.vtk.pointMappers.forEach((mapper) => {\n                mapper.setScaleFactor(this.glyphSize);\n            });\n            this.render();\n        },\n        drawerWidth() {\n            this.updateSize()\n        }\n    },\n    beforeDestroy() {\n        this.vtk.interactor.unbindEvents();\n        this.vtk.orientationCube.delete();\n        this.vtk.openglRenderWindow.setContainer(null);\n    },\n    created() {\n        const renderWindow = vtkRenderWindow.newInstance();\n        const openglRenderWindow = vtkOpenGLRenderWindow.newInstance();\n        renderWindow.addView(openglRenderWindow);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(openglRenderWindow);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n        interactor.onAnimation(this.syncCameras)\n        interactor.disable()\n\n        const orientationCube = this.newOrientationCube(interactor)\n\n        this.lookupTable = vtkColorTransferFunction.newInstance();\n        this.lookupTable.applyColorMap(\n            vtkColorMaps.getPresetByName('erdc_rainbow_bright')\n        );\n        this.lookupTable.setMappingRange(0, 1)\n        this.lookupTable.updateRange();\n\n        this.vtk = {\n            renderWindow,\n            interactor,\n            openglRenderWindow,\n            orientationCube,\n            renderers: {},\n            pointMappers: [],\n            widgetManagers: {},\n        };\n\n        vtkInstance.value = this.vtk\n    },\n    mounted() {\n        const el = this.$refs.vtk;\n        this.vtk.openglRenderWindow.setContainer(el);\n        this.vtk.interactor.bindEvents(el);\n\n        this.updateSize();\n        this.renderGrid();\n        this.watchWidgetStates();\n        this.watchImageStates();\n    },\n    updated() {\n        if (this.showColorScale) {\n            this.prepareColorScale()\n        }\n    },\n    methods,\n};\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./scripting.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./scripting.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./viewer.vue?vue&type=template&id=3e171041&scoped=true\"\nimport script from \"./scripting.js?vue&type=script&lang=js&external\"\nexport * from \"./scripting.js?vue&type=script&lang=js&external\"\nimport style0 from \"./viewer.vue?vue&type=style&index=0&id=3e171041&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e171041\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"width\":\"100%\"}},[_c('v-list',{attrs:{\"dense\":\"\",\"shaped\":\"\"}},[_c('v-subheader',[_vm._v(\"ANATOMIES\")]),_c('v-list-item-group',_vm._l((_vm.anatomies),function(anatomy_type){return _c('v-list-item',{key:anatomy_type},[_c('v-checkbox',{attrs:{\"color\":\"primary\",\"value\":anatomy_type},model:{value:(_vm.selectedAnatomies),callback:function ($$v) {_vm.selectedAnatomies=$$v},expression:\"selectedAnatomies\"}}),_c('v-list-item-title',[_vm._v(\" \"+_vm._s(anatomy_type)+\" \")])],1)}),1),_c('v-subheader',[_vm._v(\"SUBJECTS\")]),_c('v-list-item-group',_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('v-list-group',{key:subject.id,scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-checkbox',{attrs:{\"color\":\"primary\",\"value\":subject.id},nativeOn:{\"click\":function($event){return $event.stopPropagation()}},model:{value:(_vm.selectedSubjects),callback:function ($$v) {_vm.selectedSubjects=$$v},expression:\"selectedSubjects\"}}),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-list-item-title',_vm._g(_vm._b({},'v-list-item-title',attrs,false),on),[_vm._v(\" Subject: \"+_vm._s(subject.name)+\" \")])]}}],null,true)},[_c('span',[_vm._v(\" ID: \"+_vm._s(subject.id)+\" | Created: \"+_vm._s(_vm.shortDateString(subject.created))+\" | Modified: \"+_vm._s(_vm.shortDateString(subject.modified))+\" \")])])]},proxy:true}],null,true),model:{value:(subject.showDetails),callback:function ($$v) {_vm.$set(subject, \"showDetails\", $$v)},expression:\"subject.showDetails\"}},[(subject.groups && Object.keys(subject.groups).length > 0)?_c('div',{staticClass:\"pa-3\"},[_vm._v(\" Subject Groups \"+_vm._s(JSON.stringify(subject.groups) .replace(/\"/g, '').replace(/:/g, ': ').replace(/,/g, ', '))+\" \")]):_vm._e(),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.allDataObjectsInDataset.filter((obj) => obj.subject === subject.id),\"item-key\":\"uid\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.file\",fn:function({ item }){return [_c('span',[_vm._v(_vm._s(_vm.shortFileName(item.file)))])]}}],null,true)})],1)}),1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { groupBy, shortDateString, shortFileName } from '../helper';\nimport { getDataObjectsForSubject } from '@/api/rest';\nimport { onMounted, ref, watch } from 'vue';\nimport { Subject } from '@/types';\nimport { getSubjectsForDataset } from '@/api/rest'\nimport {\n    selectedDataset,\n    allSubjectsForDataset,\n    allDataObjectsInDataset,\n    anatomies,\n    selectedDataObjects,\n    loadingState,\n    loadReconstructedSamplesForProject,\n} from '@/store';\n\n\nexport default {\n    props: {\n        dataset: {\n            type: Number,\n            required: true,\n        },\n        autoSelectAll: {\n            type: Boolean,\n            default: false,\n        },\n        autoSelectOne: {\n            type: Boolean,\n            default: false,\n        }\n    },\n    setup(props) {\n\n        const selectedAnatomies = ref<string[]>([]);\n        const selectedSubjects = ref<number[]>([])\n        const headers =  [\n            {text: 'ID', value: 'id'},\n            {text: 'Anatomy', value: 'anatomy_type'},\n            {text: 'Type', value: 'type'},\n            {text: 'File Name', value: 'file', cellClass: 'file-column'},\n        ];\n\n        async function fetchData(datasetId: number) {\n            loadingState.value = true;\n            allSubjectsForDataset.value = (await getSubjectsForDataset(datasetId)).sort((a, b) => {\n                if(a.created < b.created) return 1;\n                if(a.created > b.created) return -1;\n                return 0;\n            });\n            allDataObjectsInDataset.value =  (await Promise.all(\n                allSubjectsForDataset.value.map(\n                    async (subject: Subject) => (await getDataObjectsForSubject(subject.id)).map(\n                        (dataObj) => {\n                            let assignments = {'uid': `${dataObj.type}_${dataObj.id}`}\n                            return Object.assign(dataObj, assignments)\n                        }\n                    )\n                )\n            )).flat()\n            loadReconstructedSamplesForProject('', 0)\n            anatomies.value = Object.keys(\n                groupBy(allDataObjectsInDataset.value, 'anatomy_type')\n            ).filter((key) => key !== 'undefined')\n            selectedAnatomies.value = anatomies.value;\n            if(allSubjectsForDataset.value.length > 0) {\n                const subjectIds = allSubjectsForDataset.value.map(\n                    (subject: Subject) => subject.id\n                )\n                if(props.autoSelectAll){\n                    selectedSubjects.value = subjectIds\n                }\n                if(props.autoSelectOne && allSubjectsForDataset.value.length > 0) {\n                    selectedSubjects.value = [subjectIds[0]]\n                }\n            }\n            loadingState.value = false;\n        }\n\n        function updateSelectedObjects() {\n            selectedDataObjects.value = allDataObjectsInDataset.value.filter(\n                (dataObject) => {\n                    return (\n                        (\n                            !selectedAnatomies.value.length ||\n                            selectedAnatomies.value.includes(dataObject.anatomy_type)\n                        ) && selectedSubjects.value.includes(dataObject.subject)\n                    )\n                }\n            )\n        }\n\n        function selectedObjectsUpdated() {\n            const uniqueAnatomies = [...new Set(selectedDataObjects.value.map(item => item.anatomy_type))]\n            const uniqueSubjects = [...new Set(selectedDataObjects.value.map(item => item.subject))]\n            if (JSON.stringify(uniqueAnatomies) !== JSON.stringify(selectedAnatomies.value)) {\n                selectedAnatomies.value = uniqueAnatomies\n            }\n            if (JSON.stringify(uniqueSubjects) !== JSON.stringify(selectedSubjects.value)) {\n                selectedSubjects.value = uniqueSubjects\n            }\n        }\n\n        onMounted(async () => {\n            if(!selectedDataset.value) {\n                await fetchData(props.dataset)\n            } else {\n                await fetchData(selectedDataset.value.id)\n            }\n        })\n\n        watch(selectedAnatomies, updateSelectedObjects)\n        watch(selectedSubjects, updateSelectedObjects)\n        watch(selectedDataObjects, selectedObjectsUpdated)\n\n        return {\n            anatomies,\n            selectedAnatomies,\n            allSubjectsForDataset,\n            selectedSubjects,\n            headers,\n            allDataObjectsInDataset,\n            selectedDataObjects,\n            shortFileName,\n            shortDateString,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DataList.vue?vue&type=template&id=2c7f5574\"\nimport script from \"./DataList.vue?vue&type=script&lang=ts\"\nexport * from \"./DataList.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DataList.vue?vue&type=style&index=0&id=2c7f5574&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"render-control-row\"},[(!_vm.showAnalysisOptions)?_c('v-select',{staticStyle:{\"width\":\"500px\"},attrs:{\"items\":_vm.layers,\"item-disabled\":(layer) => !layer.available(),\"item-value\":\"name\",\"label\":\"Layers shown\",\"multiple\":\"\",\"small-chips\":\"\",\"item-text\":\"name\"},scopedSlots:_vm._u([{key:\"selection\",fn:function({ item }){return [_c('v-chip',{attrs:{\"close\":\"\",\"color\":item.color,\"text-color\":item.color === 'white' ? 'black' : 'white'},on:{\"click:close\":function($event){_vm.layersShown = _vm.layersShown.filter((l) => l !== item.name)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])]}}],null,false,97843889),model:{value:(_vm.layersShown),callback:function ($$v) {_vm.layersShown=$$v},expression:\"layersShown\"}}):_vm._e(),_c('v-text-field',{staticStyle:{\"width\":\"80px\"},attrs:{\"label\":\"Particle Size\",\"type\":\"number\",\"step\":\"0.5\",\"min\":\"0.5\",\"max\":\"10\",\"hide-details\":\"\"},model:{value:(_vm.particleSize),callback:function ($$v) {_vm.particleSize=_vm._n($$v)},expression:\"particleSize\"}}),_c('v-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"value\":_vm.axisSystem,\"items\":_vm.axisSystemOptions,\"label\":\"Axis System\"},on:{\"change\":_vm.changeAxisSystem}}),(_vm.showAnalysisOptions && _vm.currentTab === 'analyze')?_c('v-switch',{attrs:{\"label\":\"Show difference from mean\"},model:{value:(_vm.showDifferenceFromMeanMode),callback:function ($$v) {_vm.showDifferenceFromMeanMode=$$v},expression:\"showDifferenceFromMeanMode\"}}):_vm._e(),(_vm.showSamplePageSelector)?_c('v-text-field',{attrs:{\"value\":_vm.deepSSMSamplePage,\"label\":\"Sample Page\",\"min\":\"0\",\"step\":\"1\",\"type\":\"number\"},on:{\"input\":_vm.onChangeSamplePage}}):_vm._e(),(_vm.showUniformScaleOption)?_c('v-switch',{attrs:{\"label\":\"Uniform Scale\"},model:{value:(_vm.uniformScale),callback:function ($$v) {_vm.uniformScale=$$v},expression:\"uniformScale\"}}):_vm._e(),(!_vm.showAnalysisOptions && _vm.selectedDataObjects.length === 1)?_c('v-btn',{staticClass:\"my-5\",on:{\"click\":_vm.captureThumbnail}},[_vm._v(\" Set \"+_vm._s(_vm.thumbnailTarget.type)+\" thumbnail \")]):_vm._e(),_c('v-btn',{staticClass:\"my-5\",on:{\"click\":_vm.resetView}},[_vm._v(\" Reset view \")])],1),(_vm.imageViewMode && _vm.axisSystem)?_c('div',{staticClass:\"render-control-row\"},[(_vm.imageIntersectAllowed)?_c('div',[_c('v-checkbox',{staticClass:\"mt-0 pt-0\",attrs:{\"label\":\"Intersect\",\"dense\":true,\"hide-details\":true},model:{value:(_vm.imageViewIntersectMode),callback:function ($$v) {_vm.imageViewIntersectMode=$$v},expression:\"imageViewIntersectMode\"}}),_c('v-checkbox',{attrs:{\"label\":\"Crop\",\"dense\":true,\"hide-details\":true},model:{value:(_vm.imageViewIntersectCropMode),callback:function ($$v) {_vm.imageViewIntersectCropMode=$$v},expression:\"imageViewIntersectCropMode\"}})],1):_vm._e(),_c('v-select',{staticStyle:{\"width\":\"25%\"},attrs:{\"items\":_vm.axisSystem.axes,\"label\":\"Axis\",\"hide-details\":true},model:{value:(_vm.imageViewAxis),callback:function ($$v) {_vm.imageViewAxis=$$v},expression:\"imageViewAxis\"}}),(_vm.imageViewSliceRange)?_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"value\":_vm.imageViewSlice,\"min\":_vm.imageViewSliceRange[0],\"max\":_vm.imageViewSliceRange[1],\"thumb-label\":true,\"label\":\"Slice\",\"hide-details\":true},on:{\"input\":_vm.changeImageViewSlice}}):_vm._e(),_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"min\":_vm.imageViewWindowRange[0],\"max\":_vm.imageViewWindowRange[1],\"thumb-label\":true,\"label\":\"Window\",\"hide-details\":true},model:{value:(_vm.imageViewWindow),callback:function ($$v) {_vm.imageViewWindow=$$v},expression:\"imageViewWindow\"}}),_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"min\":_vm.imageViewLevelRange[0],\"max\":_vm.imageViewLevelRange[1],\"thumb-label\":true,\"label\":\"Level\",\"hide-details\":true},model:{value:(_vm.imageViewLevel),callback:function ($$v) {_vm.imageViewLevel=$$v},expression:\"imageViewLevel\"}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { setDatasetThumbnail, setProjectThumbnail } from '@/api/rest';\nimport { computed, ref, watch } from 'vue';\nimport _ from 'lodash';\nimport {\n    particleSize,\n    layers,\n    layersShown,\n    orientationIndicator,\n    selectedDataObjects,\n    selectedDataset,\n    selectedProject,\n    vtkInstance,\n    allDatasets,\n    allProjectsForDataset,\n    showDifferenceFromMeanMode,\n    analysisFilesShown,\n    showGoodBadParticlesMode,\n    goodBadMaxAngle,\n    imageViewMode,\n    imageViewIntersectMode,\n    imageViewIntersectCropMode,\n    imageViewAxis,\n    imageViewSlices,\n    imageViewSliceRanges,\n    imageViewCroppedSliceRanges,\n    imageViewWindow,\n    imageViewWindowRange,\n    imageViewLevel,\n    imageViewLevelRange,\n    deepSSMResult,\n    deepSSMDataTab,\n    deepSSMSamplePage,\n    uniformScale,\n    DEEPSSM_SAMPLES_PER_PAGE,\n} from '@/store';\n\n\nexport default {\n    props: {\n        currentTab: {\n            type: String,\n            required: true,\n        }\n    },\n    setup(props, context) {\n        orientationIndicator.value.setDefaultStyle({\n            fontStyle: 'bold',\n            fontFamily: 'Arial',\n            fontColor: 'black',\n            faceColor: '#ffffff',\n            faceRotation: 0,\n            edgeThickness: 0.1,\n            edgeColor: 'black',\n            resolution: 400,\n        })\n\n        const axisSystemOptions = [\n            {\n                text: 'XYZ',\n                value: 'xyz',\n                xPlus: '+X',\n                xMinus: '-X',\n                yPlus: '+Y',\n                yMinus: '-Y',\n                zPlus: '+Z',\n                zMinus: '-Z',\n                axes: ['X', 'Y', 'Z'],\n            },\n            {\n                text: 'Medical',\n                value: 'slp',\n                xPlus: 'L',\n                xMinus: 'R',\n                yPlus: 'P',\n                yMinus: 'A',\n                zPlus: 'S',\n                zMinus: 'I',\n                axes: ['L', 'P', 'S'],\n            }\n        ]\n        const axisSystem = ref()\n\n        function changeAxisSystem(newSystemValue: string){\n            const newSystem = axisSystemOptions.find(\n                (system) => system.value == newSystemValue\n            )\n            axisSystem.value = newSystem\n            if(newSystem){\n                orientationIndicator.value.setXPlusFaceProperty({\n                    text: newSystem.xPlus\n                })\n                orientationIndicator.value.setXMinusFaceProperty({\n                    text: newSystem.xMinus\n                })\n                orientationIndicator.value.setYPlusFaceProperty({\n                    text: newSystem.yPlus\n                })\n                orientationIndicator.value.setYMinusFaceProperty({\n                    text: newSystem.yMinus\n                })\n                orientationIndicator.value.setZPlusFaceProperty({\n                    text: newSystem.zPlus\n                })\n                orientationIndicator.value.setZMinusFaceProperty({\n                    text: newSystem.zMinus\n                })\n                context.emit(\"change\")\n            }\n        }\n        changeAxisSystem('xyz')\n\n        function resetView() {\n            context.emit(\"change\")\n        }\n        watch(showDifferenceFromMeanMode, resetView)\n        watch(showGoodBadParticlesMode, resetView)\n        watch(goodBadMaxAngle, resetView)\n\n        const thumbnailTarget = computed(() => {\n            if(layersShown.value.length === 1 && layersShown.value[0] === \"Original\") {\n                // showing only original data object, valid for dataset thumbnail\n                return {\n                    type: 'Dataset',\n                    id: selectedDataset.value?.id\n                }\n            } else {\n                // valid for project thumbnail\n                return {\n                    type: 'Project',\n                    id: selectedProject.value?.id\n                }\n            }\n        })\n\n        async function captureThumbnail() {\n            if(vtkInstance.value) {\n                vtkInstance.value.orientationCube.setEnabled(false)\n                const encoded = (await Promise.all(\n                    // method signature for captureImages is defined as returning void,\n                    // but it returns a list of promises.\n                    // @ts-ignore\n                    vtkInstance.value.renderWindow.captureImages(\n                        \"image/png\",\n                        {\n                            size: [100, 100]\n                        }\n                    )\n                ))[0] as String\n                const thumbnail = encoded.split(',')[1]\n                if (thumbnailTarget.value.type === 'Dataset') {\n                    if (thumbnailTarget.value.id) {\n                        let dataset = await setDatasetThumbnail(thumbnailTarget.value.id, thumbnail)\n                        if(dataset) {\n                            allDatasets.value = allDatasets.value.map((d) => {\n                                if (d.id === dataset.id) return dataset\n                                return d\n                            })\n                            selectedDataset.value = dataset;\n                        }\n                    }\n                } else {\n                    if (thumbnailTarget.value.id) {\n                        let project = await setProjectThumbnail(thumbnailTarget.value.id, thumbnail)\n                        if(project) {\n                            allProjectsForDataset.value = allProjectsForDataset.value.map((p) => {\n                                if (p.id === project.id) return project\n                                return p\n                            })\n                            selectedProject.value = project;\n                        }\n                    }\n                }\n                vtkInstance.value.orientationCube.setEnabled(true)\n            }\n        }\n\n        const showAnalysisOptions = computed(() => {\n            if (props.currentTab === 'deepssm' && deepSSMResult.value) {\n                return true;\n            } else if (props.currentTab === 'analyze' && analysisFilesShown.value?.length) {\n                return true;\n            }\n            return false;\n        })\n\n        const showSamplePageSelector = computed(() => {\n            return deepSSMDataTab.value === 0 && deepSSMSamplePage.value;\n        })\n\n        const maxSamplePage = computed(() => {\n            return Math.ceil(Object.values(deepSSMResult.value?.aug_pairs).length / DEEPSSM_SAMPLES_PER_PAGE);\n        })\n\n        const showUniformScaleOption = computed(() => {\n            return deepSSMDataTab.value >= 1; // deepssm data tab training or testing\n        })\n\n        const imageIntersectAllowed = computed(() => {\n            return layersShown.value.includes('Groomed') || deepSSMDataTab.value > -1;\n        })\n\n        const imageViewSlice = computed(() => {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.x\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.y\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.z\n            }\n        })\n\n        const imageViewSliceRange = computed(() => {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.x : imageViewSliceRanges.value.x\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.y : imageViewSliceRanges.value.y\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.z : imageViewSliceRanges.value.z\n            }\n        })\n\n        function changeImageViewSlice(value) {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.x = value\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.y = value\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.z = value\n            }\n        }\n\n        watch(imageIntersectAllowed, (value) => {\n            if (!value) {\n                imageViewIntersectMode.value = false\n                imageViewIntersectCropMode.value = false\n            }\n        })\n\n        function changeSamplePage(page: number) {\n            if (page < 1) {\n                page = 1\n            } else if (page > maxSamplePage.value) {\n                page = maxSamplePage.value\n            }\n\n            deepSSMSamplePage.value = page\n        }\n\n        return {\n            particleSize,\n            layersShown,\n            layers,\n            axisSystem,\n            axisSystemOptions,\n            imageViewMode,\n            imageViewIntersectMode,\n            imageViewIntersectCropMode,\n            imageIntersectAllowed,\n            imageViewAxis,\n            imageViewSlice,\n            imageViewSliceRange,\n            imageViewLevel,\n            imageViewLevelRange,\n            imageViewWindow,\n            imageViewWindowRange,\n            changeImageViewSlice,\n            changeAxisSystem,\n            resetView,\n            selectedDataObjects,\n            captureThumbnail,\n            thumbnailTarget,\n            showDifferenceFromMeanMode,\n            showAnalysisOptions,\n            showUniformScaleOption,\n            uniformScale,\n            deepSSMSamplePage,\n            onChangeSamplePage: _.debounce(changeSamplePage, 1000),\n            showSamplePageSelector,\n            maxSamplePage,\n            currentTab: props.currentTab,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./RenderControls.vue?vue&type=template&id=680984d8&scoped=true\"\nimport script from \"./RenderControls.vue?vue&type=script&lang=ts\"\nexport * from \"./RenderControls.vue?vue&type=script&lang=ts\"\nimport style0 from \"./RenderControls.vue?vue&type=style&index=0&id=680984d8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"680984d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.props.prerequisite())?_c('div',[_c('task-info',{attrs:{\"taskName\":_vm.props.form,\"formData\":_vm.simplifyFormData(_vm.formData)},on:{\"resetForm\":_vm.resetForm}}),_c('v-form',{staticClass:\"pa-3\",model:{value:(_vm.formValid),callback:function ($$v) {_vm.formValid=$$v},expression:\"formValid\"}},[(_vm.formSchema && _vm.formData)?_c('v-jsf',{attrs:{\"schema\":_vm.formSchema,\"options\":_vm.schemaOptions},scopedSlots:_vm._u([{key:\"custom-conditional\",fn:function(context){return [(_vm.evaluateExpression(context.schema['x-display-if']))?_c('v-jsf',_vm._b({scopedSlots:_vm._u([{key:\"custom-readonly\",fn:function(context){return [_c('div',{staticStyle:{\"display\":\"flex\",\"width\":\"100%\",\"justify-content\":\"space-between\"}},[_c('p',[_vm._v(_vm._s(context.label))]),_c('p',[_vm._v(_vm._s(context.value)+_vm._s(context.schema['x-display-append']))])])]}}],null,true),model:{value:(_vm.formData[context.fullKey.split('.')[0]][context.fullKey.split('.')[1]]),callback:function ($$v) {_vm.$set(_vm.formData[context.fullKey.split('.')[0]], context.fullKey.split('.')[1], $$v)},expression:\"formData[context.fullKey.split('.')[0]][context.fullKey.split('.')[1]]\"}},'v-jsf',context,false)):_vm._e()]}}],null,false,1776082980),model:{value:(_vm.formData),callback:function ($$v) {_vm.formData=$$v},expression:\"formData\"}}):_vm._e(),_c('br')],1)],1):_c('div',{staticClass:\"pa-3\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.props.prerequisite_unfulfilled))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TabForm.vue?vue&type=template&id=283c19b6\"\nimport script from \"./TabForm.vue?vue&type=script&lang=ts\"\nexport * from \"./TabForm.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TabForm.vue?vue&type=style&index=0&id=283c19b6&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.jobAlreadyDone('optimize'))?_c('div',[_c('v-expansion-panels',{attrs:{\"value\":_vm.analysis ? 1 : 0}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Controls\")]),_c('v-expansion-panel-content',[_c('task-info',{attrs:{\"taskName\":\"analyze\",\"formData\":_vm.formData,\"disabled\":!_vm.analysis},on:{\"resetForm\":_vm.resetForm}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"1.0\",\"max\":\"10.0\",\"min\":\"1.0\",\"label\":\"Std. Dev. Range\",\"hide-details\":\"\",\"disabled\":!_vm.analysis},model:{value:(_vm.formData.range),callback:function ($$v) {_vm.$set(_vm.formData, \"range\", _vm._n($$v))},expression:\"formData.range\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"1.0\",\"min\":\"1.0\",\"max\":\"100.0\",\"label\":\"Number of steps\",\"hide-details\":\"\",\"disabled\":!_vm.analysis},model:{value:(_vm.formData.steps),callback:function ($$v) {_vm.$set(_vm.formData, \"steps\", _vm._n($$v))},expression:\"formData.steps\"}})],1)],1),(_vm.analysis)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Results\")]),_c('v-expansion-panel-content',[_c('div',{staticClass:\"pa-3\"},[_vm._v(\" Review shape analysis \"),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({},'v-icon',attrs,false),on),[_vm._v(\" mdi-information \")])]}}],null,false,3439555294)},[_c('span',[_c('v-subheader',[_vm._v(\"Last analysis run at \"+_vm._s(_vm.analysis.modified))])],1)]),_c('v-expansion-panels',{model:{value:(_vm.openTab),callback:function ($$v) {_vm.openTab=$$v},expression:\"openTab\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" View PCA \")]),_c('v-expansion-panel-content',[_c('PCA',{ref:\"pca\",attrs:{\"currentTab\":_vm.currentTab,\"openTab\":_vm.openTab}}),_c('charts',{attrs:{\"charts\":_vm.analysis.charts}})],1)],1),_c('v-expansion-panel',{attrs:{\"disabled\":_vm.analysis.groups.length <= 0,\"id\":\"groups-panel\"}},[_c('v-expansion-panel-header',[_vm._v(\" Group Difference \")]),_c('v-expansion-panel-content',[_c('groups',{ref:\"groups\",attrs:{\"currentTab\":_vm.currentTab,\"openTab\":_vm.openTab}})],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Particles \")]),_c('v-expansion-panel-content',[_c('particles')],1)],1)],1),_c('div',{staticClass:\"loading-dialog\"},[_c('v-dialog',{attrs:{\"width\":\"10%\"},model:{value:(_vm.currentlyCaching),callback:function ($$v) {_vm.currentlyCaching=$$v},expression:\"currentlyCaching\"}},[_vm._v(\"Calculating... \"),_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"align-center\":\"\"}})],1)],1)],1)])],1):_vm._e()],1)],1):_c('div',{staticClass:\"pa-3\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Perform optimization before analyzing.\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.charts.length > 0)?_c('div',_vm._l((_vm.charts),function(chart,index){return _c('v-chart',{key:chart.title,staticClass:\"chart\",attrs:{\"option\":_vm.methods.generateChart(index)}})}),1):_c('div',[_vm._v(\" No charts generated... \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { AnalysisChart } from \"@/types\";\n\n// functions for generating analysis charts\nexport function lineChartOptions (data: AnalysisChart) {\n    // decimal place rounding could be specified for each chart\n    const decimalPlaces = 3;\n\n    // rounds each y value to specified decimal place\n    // x will always be integer\n    data.y.forEach((n, i) => {\n        data.y[i] = roundTo(n, decimalPlaces);\n    });\n\n    return ({\n        title: {\n            text: data.title,\n            textStyle: {\n                color: \"#999999\"\n            }\n        },\n        dataZoom: [\n            {\n                id: 'xAxisZoom',\n                type: 'inside',\n                xAxisIndex: [0]\n            },\n        ],\n        tooltip: {\n            trigger: 'axis',\n            formatter: '# Modes: {b}<br />Value: {c}' // b is x value, c is y value\n        },\n        toolbox: {\n            show: true,\n            orient: 'horizontal',\n            showTitle: true,\n            feature: {\n                saveAsImage: {\n                    type: 'svg',\n                    name: data.title.toLowerCase() + \"_chart\",\n                    excludedComponents: ['toolbox', 'title'],\n                },\n                dataView: {\n                    show: true,\n                    title: \"View Data\",\n                    readOnly: true,\n                    optionToContent: () => showData(data)\n                },\n                dataZoom: {\n                    show: true,\n                },\n                restore: {\n                    show: true\n                },\n            }\n        },\n        xAxis: {\n            type: 'category',\n            name: data.x_label,\n            nameLocation: 'center',\n            nameTextStyle: {\n                padding: [5,0,0,0],\n                color: \"#bbbbbb\"\n            },\n            axisLabel: {\n                align: 'center',\n                color: \"#a3a3a3\"\n            },\n            boundaryGap: false,\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    type: \"dashed\",\n                    opacity: 0.5,\n                }\n            },\n            data: data.x\n        },\n        yAxis: {\n            name: data.y_label,\n            nameTextStyle: {\n                align: 'left',\n                color: \"#bbbbbb\"\n            },\n            axisLine: {\n                show: true\n            },\n            axisLabel: {\n                align: 'right',\n                color: \"#a3a3a3\"\n            },\n            axisTick: {\n                lineStyle: {\n                    color: \"#a3a3a3\"\n                }\n            },\n            scale: true,\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    type: \"dashed\",\n                    opacity: 0.5,\n                }\n            },\n        },\n        series: {\n            type:'line',\n            data: data.y\n        }\n    })\n}\n\nfunction copyData(text: string) {\n    const CSVText = getTextAsCSV(text);\n    navigator.clipboard.writeText(CSVText).then(function() {\n        console.log('Copying to clipboard was successful!');\n    }, function(err) {\n    console.error('Could not copy data: ', err);\n    });\n}\n\nfunction getDownloadURL(text: string) {\n    const csvstring = getTextAsCSV(text);\n    const csvarray = csvstring.split(/\\n/g).map((v, idx) => idx ? v + '\\n' : v);\n\n    const blob = new Blob(csvarray);\n\n    return URL.createObjectURL(blob);\n}\n\nfunction getTextAsCSV(text: string) {\n    const splitstring = text.split('\\n');\n\n    splitstring.forEach((row, rowindex) => {\n        if (row.search(/\\s/ig) >= 0) { // if the current row contains any spaces or non-whitespace special char (\\n\\r\\t\\f)\n            const h = row.split(',');\n            h.forEach((value, i) => {\n                h[i] = '\"' + value + '\"';\n            });\n            splitstring[rowindex] = h.join(',');\n        }\n    })\n\n    return splitstring.join('\\n');\n}\n\nfunction showData(data: AnalysisChart) {\n    const dataTable = document.createElement('TABLE');\n    dataTable.className = 'datatable'\n    const thead = document.createElement('thead');\n    dataTable.appendChild(thead);\n    const theadRow = thead.insertRow(0);\n    theadRow.className = 'datatable-row';\n    const theadOne = theadRow.insertCell(0);\n    theadOne.innerHTML = '<b># Modes</b>';\n    const theadTwo = theadRow.insertCell(1);\n    theadTwo.innerHTML = `<b>${data.y_label}</b>`;\n    const tbody = document.createElement('tbody');\n    dataTable.appendChild(tbody);\n\n    let csvtext = `# Modes:,${data.y_label}\\n`\n\n    for (let i = 0; i < data.x.length; i++) {\n        const row = tbody.insertRow(-1); // -1 index == last position\n        row.className = 'datatable-row';\n        const cellOne = row.insertCell(0);\n        cellOne.innerHTML = `${data.x[i]}`;\n        const cellTwo = row.insertCell(1);\n        cellTwo.innerHTML = `${data.y[i]}`;\n\n        csvtext += `${data.x[i]},${data.y[i]}\\n`\n    }\n\n    const div = document.createElement('div');\n    div.className = \"dataview\";\n\n    const copybtn = document.createElement('button');\n    copybtn.className = 'dataview-button copy-button';\n    copybtn.innerHTML = 'Copy to Clipboard';\n    copybtn.onclick = () => copyData(csvtext);\n\n    const downloadbtn = document.createElement('button');\n    downloadbtn.className = 'dataview-button download-button';\n    downloadbtn.innerHTML = 'Download';\n\n    const downloadlink = document.createElement('a');\n    downloadlink.href = getDownloadURL(csvtext);\n    downloadlink.download = data.y_label.toLowerCase().replaceAll(\" \", \"_\") + '.csv';\n\n    downloadbtn.appendChild(downloadlink);\n    downloadbtn.onclick = () => downloadlink.click();\n\n    div.appendChild(dataTable);\n    div.appendChild(copybtn);\n    div.appendChild(downloadbtn);\n\n    return (\n        div\n    );\n}\n\nfunction roundTo(num: number, place: number) {\n    const factor = 10 ** place;\n    return Math.round(num * factor) / factor;\n}\n","\nimport { use } from 'echarts/core';\nimport { SVGRenderer } from 'echarts/renderers';\nimport { LineChart } from 'echarts/charts';\nimport {\n  TitleComponent,\n  TooltipComponent,\n  GridComponent,\n  ToolboxComponent,\n  DataZoomComponent\n} from 'echarts/components';\nimport VChart from 'vue-echarts';\nimport { lineChartOptions } from './charts'\nimport { AnalysisChart } from '@/types';\n\n// registers required echarts components\nuse([SVGRenderer,LineChart,TitleComponent,TooltipComponent,GridComponent,ToolboxComponent,DataZoomComponent]);\n\nexport default {\n    name: \"Charts\",\n    props: {\n      charts: {\n        type: Array,\n        default: () => [],\n        validator: (value: any) => {\n          // Check that every item in the array is a valid AnalysisChart object\n          return value.every((chart: any) => {\n            return (\n              typeof chart === 'object' &&\n              chart !== null &&\n              typeof chart.title === 'string' &&\n              typeof chart.type === 'string' &&\n              typeof chart.x_label === 'string' &&\n              typeof chart.y_label === 'string' &&\n              chart.x.every((val: any) => typeof val === 'number') &&\n              chart.y.every((val: any) => typeof val === 'number')\n            );\n          });\n        },\n        required: true\n      }\n    },\n    components: {\n      VChart\n    },\n    setup(props) {\n      const data = {};\n\n      const methods = {\n        generateChart: (index: number) => {\n            return lineChartOptions(props.charts[index] as AnalysisChart);\n        }\n      };\n\n      const computed = {};\n\n      const init = () => {};\n\n      init();\n\n      return {\n        data,\n        methods,\n        computed,\n      };\n    },\n};\n","export enum AnalysisTabs {\n    PCA = 0,\n    Groups,\n    Charts,\n    Particles,\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Charts.vue?vue&type=template&id=06c87e7c\"\nimport script from \"./Charts.vue?vue&type=script&lang=ts\"\nexport * from \"./Charts.vue?vue&type=script&lang=ts\"\nimport style0 from \"./Charts.vue?vue&type=style&index=0&id=06c87e7c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-select',{attrs:{\"label\":\"Group Set\",\"items\":_vm.allGroupSets,\"item-text\":\"set\",\"item-value\":\"set\"},model:{value:(_vm.groupSet),callback:function ($$v) {_vm.groupSet=$$v},expression:\"groupSet\"}}),_c('v-divider'),_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',[_c('v-select',{attrs:{\"items\":(_vm.currGroup && _vm.groupSet) ? _vm.groupPairings[_vm.groupSet] : [''],\"item-text\":\"group1\",\"item-value\":\"group1\"},model:{value:(_vm.currPairing.left),callback:function ($$v) {_vm.$set(_vm.currPairing, \"left\", $$v)},expression:\"currPairing.left\"}})],1),_c('v-col',[_c('v-slider',{attrs:{\"min\":\"0.0\",\"max\":\"1.0\",\"step\":\"0.1\",\"default\":\"0.5\",\"show-ticks\":\"always\",\"hide-details\":\"\",\"disabled\":_vm.currGroup === undefined},model:{value:(_vm.groupRatio),callback:function ($$v) {_vm.groupRatio=$$v},expression:\"groupRatio\"}})],1),_c('v-col',[_c('v-select',{attrs:{\"items\":(_vm.currGroup && _vm.groupSet) ? _vm.groupPairings[_vm.groupSet] : [''],\"item-text\":\"group2\",\"item-value\":\"group2\"},model:{value:(_vm.currPairing.right),callback:function ($$v) {_vm.$set(_vm.currPairing, \"right\", $$v)},expression:\"currPairing.right\"}})],1)],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-checkbox',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"disabled\":_vm.currGroup === undefined,\"label\":\"Animate\",\"hide-details\":\"\"},model:{value:(_vm.animate),callback:function ($$v) {_vm.animate=$$v},expression:\"animate\"}})],1),_c('v-card',{staticClass:\"ma-auto mb-3\",attrs:{\"align\":\"center\",\"justify\":\"center\",\"disabled\":_vm.currGroup === undefined}},[_c('v-btn',{staticClass:\"ms-4\",attrs:{\"color\":\"grey darken-3\"},on:{\"click\":() => { _vm.groupRatio = 0.0; _vm.methods.stopAnimating()}}},[_vm._v(\"Left Mean\")]),_c('v-btn-toggle',{staticClass:\"ms-4\",attrs:{\"color\":\"white\"}},[_c('v-btn',{attrs:{\"color\":\"grey darken-4\",\"disabled\":_vm.animate || _vm.currentlyCaching},on:{\"click\":() => _vm.groupDiff = !_vm.groupDiff}},[_vm._v(\"Diff -->\")])],1),_c('v-btn',{staticClass:\"ms-4\",attrs:{\"color\":\"grey darken-3\"},on:{\"click\":() => { _vm.groupRatio = 1.0; _vm.methods.stopAnimating()}}},[_vm._v(\"Right Mean\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport {\n    analysis,\n    cacheAllComparisons,\n    analysisFilesShown,\n    currentAnalysisParticlesFiles,\n    meanAnalysisParticlesFiles\n} from '@/store';\nimport { AnalysisGroup } from '@/types';\nimport { Ref, computed, inject, ref, watch, onMounted } from 'vue';\n\nimport { AnalysisTabs } from './util';\n\n  export default {\n    props: {\n      currentTab: String,\n      openTab: Number,\n    },\n    setup(props) {\n      const currGroup = ref<AnalysisGroup[]>();\n      const groupRatio = ref(0.5);\n      const groupDiff = ref(false);\n      const groupSet = ref<string>();\n      const currPairing = ref<{left: string, right: string}>({left:\"\", right:\"\"});\n      const prevPairing = ref<{left: string, right: string}>({left:\"\", right:\"\"}); // stores the previously selected pairing\n\n      const currentlyCaching: Ref | undefined = inject('currentlyCaching');\n      const animate = ref<boolean>(false);\n\n      let step = 0.1;\n      let intervalId: number;\n\n      const methods = {\n        // determine if the currently selected group pairing is inverted\n        // returns true if they are inverted, false if not\n        pairingIsInverted(g: any) {\n            return (g.group1 === currPairing.value.right && g.group2 === currPairing.value.left)\n        },\n        updateCurrGroup() {\n            currGroup.value = analysis.value?.groups.filter((g) => {\n                if (g.name === groupSet.value) {\n                    if ((g.group1 === currPairing.value.left && g.group2 === currPairing.value.right)\n                        || (g.group1 === currPairing.value.right && g.group2 === currPairing.value.left)) { // if the groups pairings match the selected pairings\n                        if (!methods.pairingIsInverted(g))  { // in-order group pairings\n                            if (g.ratio === groupRatio.value) {\n                                return true;\n                            }\n                        } else if (methods.pairingIsInverted(g)) { // inverted group pairings\n                            if (g.ratio === parseFloat((1 - groupRatio.value).toFixed(1))) { // floating point precision errors (https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems)\n                                return true;\n                            }\n                        }\n                    }\n                }\n            })\n        },\n        setDefaultPairing() {\n            if (groupSet.value === undefined && allGroupSets.value?.length) {\n                groupSet.value = allGroupSets.value[0];\n            }\n            // default left and right group selections: first and second item in groupSet pairings list\n            if (groupSet.value !== undefined) {\n                currPairing.value.left = groupPairings.value[groupSet.value][0];\n                currPairing.value.right = groupPairings.value[groupSet.value][1];\n                prevPairing.value = {left: currPairing.value.left, right: currPairing.value.right};\n            }\n        },\n        // triggered on group pairing select change\n        updateGroupSelections() {\n            // if the new left and right groups are the same, flip the two values according to the previous selections\n            if (currPairing.value.left === currPairing.value.right && groupSet.value !== undefined) {\n                // set new non-changed side to opposite side in old pairing\n                if (currPairing.value.left === prevPairing.value.left) {\n                    currPairing.value.left = prevPairing.value.right;\n                }\n                if (currPairing.value.right === prevPairing.value.right) {\n                    currPairing.value.right = prevPairing.value.left;\n                }\n            }\n\n            prevPairing.value.left = currPairing.value.left;\n            prevPairing.value.right = currPairing.value.right;\n\n            methods.updateGroupFileShown();\n        },\n        updateGroupFileShown() {\n            let filesShown: string[] | undefined = undefined;\n            let particles: string[] | undefined = undefined;\n            methods.updateCurrGroup();\n\n            if (props.currentTab === 'analyze' && analysis.value && currGroup.value){\n                filesShown = currGroup.value.map((g) => g.file);\n                particles = currGroup.value.map((g) => g.particles);\n            }\n            currentAnalysisParticlesFiles.value = particles;\n            if (groupDiff.value) {\n                const meanParticles = analysis.value?.groups.filter((g) => {\n                    if (g.name === groupSet.value) {\n                      if (!methods.pairingIsInverted(g)) {\n                        if (g.ratio === 1.0) return true;\n                      } else if (methods.pairingIsInverted(g)) {\n                        if (g.ratio === 0.0) return true;\n                      }\n                    }\n                }) // account for inverted-pairings\n                if (meanParticles) {\n                    meanAnalysisParticlesFiles.value = meanParticles.map((p) => p.particles)\n                }\n            } else {\n                meanAnalysisParticlesFiles.value = analysis.value?.mean_shapes.map((m) => m.particles)\n            }\n\n            analysisFilesShown.value = filesShown;\n        },\n        async cacheAllGroupComparisons() {\n            const allInPairing = analysis.value?.groups.filter((g) => {\n                if (g.name === groupSet.value) { // if groupSet is same\n                    if ((g.group1 === currPairing.value.left || g.group1 === currPairing.value.right) && (g.group2 === currPairing.value.left || g.group2 === currPairing.value.right))\n                        return true;\n                }\n            })\n\n            if (allInPairing !== undefined) {\n                await cacheAllComparisons([allInPairing]);\n            }\n        },\n        animateSlider() {\n            if (props.openTab === AnalysisTabs.Groups) { // Group tab animate\n                if (groupRatio.value === 0) step = 0.1;\n                if (groupRatio.value === 1) step = -0.1;\n                groupRatio.value = parseFloat((groupRatio.value + step).toFixed(1));\n            }\n        },\n        async triggerAnimate() {\n            if (groupSet.value === undefined || animate == undefined) return;\n\n            if (animate.value && currentlyCaching) {\n                currentlyCaching.value = true;\n                await methods.cacheAllGroupComparisons();\n                currentlyCaching.value = false;\n                intervalId = setInterval(methods.animateSlider, 500);\n            }\n            if (animate.value === false && intervalId) {\n                clearInterval(intervalId);\n            }\n        },\n        stopAnimating() {\n          animate.value = false;\n        }\n      };\n\n      const allGroupSets = computed(() => {\n          return analysis.value?.groups.map((g) => g.name);\n      })\n\n      // get all possible unique group pairings\n      const groupPairings = computed(() => {\n            const g: { [name: string]: string[] } = {};\n            analysis.value?.groups.map((group: AnalysisGroup) => {\n                if (g[group.name] === undefined) g[group.name] = [];\n                if (!g[group.name].includes(group.group1)) g[group.name].push(group.group1);\n                if (!g[group.name].includes(group.group2)) g[group.name].push(group.group2);\n            })\n            return g;\n        })\n\n        onMounted(methods.setDefaultPairing);\n        watch(groupSet, () => {\n            methods.setDefaultPairing();\n            methods.updateGroupFileShown();\n            methods.stopAnimating();\n        })\n        watch(currPairing.value, () => {\n            methods.updateGroupSelections();\n            methods.stopAnimating();\n        })\n        watch(groupRatio, methods.updateGroupFileShown)\n        watch(groupDiff, methods.updateGroupFileShown)\n\n        if (animate) {\n            watch(animate, methods.triggerAnimate)\n        }\n\n      return {\n        methods,\n        groupRatio,\n        groupDiff,\n        groupSet,\n        allGroupSets,\n        groupPairings,\n        currGroup,\n        currPairing,\n        animate,\n        currentlyCaching,\n      };\n    },\n  };\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Groups.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Groups.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Groups.vue?vue&type=template&id=377d4948\"\nimport script from \"./Groups.vue?vue&type=script&lang=ts\"\nexport * from \"./Groups.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"disabled\":\"!goodBadAngles.value\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-switch',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"label\":\"Show Good/Bad Particles\",\"hide-details\":\"\"},model:{value:(_vm.showGoodBadParticlesMode),callback:function ($$v) {_vm.showGoodBadParticlesMode=$$v},expression:\"showGoodBadParticlesMode\"}})],1),_c('v-text-field',{attrs:{\"value\":_vm.goodBadMaxAngle,\"type\":\"number\",\"step\":\"1.0\",\"min\":\"1.0\",\"max\":\"360.0\",\"label\":\"Max Angle\",\"hide-details\":\"\"},on:{\"input\":_vm.changeMaxAngle}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport _ from 'lodash';\nimport {\n  goodBadAngles,\n  showGoodBadParticlesMode,\n  goodBadMaxAngle,\n} from '@/store';\n\nexport default {\n    name: \"Particles\",\n    setup() {\n\n      function changeMaxAngle(angle: string) {\n        if (parseFloat(angle)) {\n          goodBadMaxAngle.value = parseFloat(angle);\n        }\n      }\n\n      return {\n        changeMaxAngle: _.debounce(changeMaxAngle, 1000),\n        showGoodBadParticlesMode,\n        goodBadAngles,\n        goodBadMaxAngle,\n      };\n    },\n};\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Particles.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Particles.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Particles.vue?vue&type=template&id=c3a47aac\"\nimport script from \"./Particles.vue?vue&type=script&lang=ts\"\nexport * from \"./Particles.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-select',{attrs:{\"label\":\"Select mode\",\"items\":_vm.modeOptions,\"item-text\":\"mode\",\"item-value\":\"mode\"},model:{value:(_vm.mode),callback:function ($$v) {_vm.mode=$$v},expression:\"mode\"}}),_c('v-row',{attrs:{\"justify\":\"space-between\"}},[_c('v-slider',{attrs:{\"min\":_vm.stdDevRange.range * -1,\"max\":_vm.stdDevRange.range,\"step\":_vm.stdDevRange.step,\"ticks\":\"always\",\"tick-size\":\"4\",\"thumb-label\":\"\",\"track-color\":\"#aaa\",\"track-fill-color\":\"#aaa\",\"label\":\"Std. Devs. from Mean\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(){return [_vm._v(\" \"+_vm._s(Math.round(_vm.stdDev * 100) / 100)+\" \")]},proxy:true}]),model:{value:(_vm.stdDev),callback:function ($$v) {_vm.stdDev=$$v},expression:\"stdDev\"}})],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-checkbox',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"label\":\"Animate\",\"hide-details\":\"\"},model:{value:(_vm.animate),callback:function ($$v) {_vm.animate=$$v},expression:\"animate\"}})],1),_c('br'),_c('v-data-table',{attrs:{\"headers\":_vm.pcaInfo.headers,\"items\":_vm.pcaInfo.items,\"item-class\":\"class\",\"hide-default-header\":\"\",\"hide-default-footer\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n  import { computed, ref, Ref, watch, inject } from 'vue';\n  import { AnalysisTabs } from './util';\n  import { CacheComparison } from '@/types';\nimport { groupBy } from '../../helper';\n  import {\n    analysis,\n    analysisFilesShown,\n    cacheAllComparisons,\n    currentAnalysisParticlesFiles,\n    meanAnalysisParticlesFiles,\n    selectedProject,\n  } from '@/store';\n\n  export default {\n    props: {\n      currentTab: String,\n      openTab: Number\n    },\n    setup(props) {\n      const mode = ref(1);\n      const stdDev = ref(0);\n\n      const menu = ref();\n\n      const showConfirmation = ref(false);\n\n      let step = 0;\n      let intervalId: number;\n\n      const currentlyCaching: Ref | undefined = inject('currentlyCaching');\n      const animate = ref<boolean>(false);\n\n      const modeOptions = computed(() => {\n        return analysis.value?.modes.sort((a, b) => a.mode - b.mode)\n      })\n\n      const currMode = computed(() => {\n        return analysis.value?.modes.find((m) => m.mode == mode.value)\n      })\n\n      const currPCAs = computed(() => {\n        return currMode.value?.pca_values.filter(\n            p => p.pca_value.toPrecision(2) === stdDev.value.toPrecision(2)\n        )\n      })\n\n      const stdDevRange = computed(() => {\n        if (!analysis.value || !currMode.value) return {range: 0.0, step: 0.0, numSteps: 0}\n        const pcaValues = currMode.value.pca_values.map(p => Math.round(p.pca_value * 100) / 100)\n        const numDomains = analysis.value.mean_shapes.length || 1\n        const min =  Math.min(...pcaValues);\n        const max =  Math.max(...pcaValues);\n        const range = max;\n        const step = (max - min) / (pcaValues.length / numDomains);\n        const numSteps = Math.round((max - min) / step) + 1;\n\n        return {\n            range, step, numSteps\n        }\n      })\n\n      const pcaInfo = computed(() => {\n        return {\n            headers: [\n                {text: 'key', value: 'key'},\n                {text: 'value', value: 'value', align: 'end'}\n            ],\n            items: [\n                {key: 'Lambda', value: currPCAs.value?.length ? Math.round(currPCAs.value[0].lambda_value * 100) / 100 : 0},\n                {key: 'Eigenvalue', value: currMode.value ? Math.round(currMode.value.eigen_value * 100) / 100 : 0},\n                {key: 'Explained Variance', value: currMode.value ? Math.round(currMode.value.explained_variance * 100) / 100 : 0, class: 'percentage'},\n                {key: 'Cumulative Explained Variance', value: currMode.value ? Math.round(currMode.value.cumulative_explained_variance * 100) / 100 : 0, class:'percentage'},\n            ],\n        }\n      })\n\n      const methods = {\n        updateFileShown() {\n            let filesShown: string[] = []\n            let particles: string[] = []\n            if (props.currentTab === 'analyze' && analysis.value){\n              if (stdDev.value === 0) {\n                filesShown = analysis.value.mean_shapes.map((m) => m.file)\n                particles = analysis.value.mean_shapes.map((m) => m.particles);\n              } else if (currPCAs.value) {\n                filesShown = currPCAs.value.map(p => p.file)\n                particles = currPCAs.value.map(p => p.particles)\n              }\n            }\n            currentAnalysisParticlesFiles.value = particles;\n            meanAnalysisParticlesFiles.value =  analysis.value?.mean_shapes.map((m) => m.particles);\n            analysisFilesShown.value = filesShown;\n        },\n        async cacheAllPCAComparisons() {\n          if (currMode.value !== undefined) {\n            const allInMode: CacheComparison[][] = Object.values(groupBy(currMode.value.pca_values, 'pca_value'));\n            await cacheAllComparisons(allInMode);\n          }\n        },\n        animateSlider() {\n            if (props.openTab === AnalysisTabs.PCA) { // PCA tab animate\n                const { range } = stdDevRange.value;\n                const min = range * -1;\n                const max = range;\n\n                if (stdDev.value <= min) {\n                  stdDev.value = min;\n                  step *= -1;\n                } else if (stdDev.value >= max) {\n                  stdDev.value = max;\n                  step *= -1;\n                }\n\n                stdDev.value = parseFloat((stdDev.value + step).toFixed(1));\n\n            }\n        },\n        async triggerAnimate() {\n            if (currMode.value === undefined || animate === undefined) return;\n\n            if (animate.value && currentlyCaching) {\n              step = stdDevRange.value.step;\n              currentlyCaching.value = true;\n              await methods.cacheAllPCAComparisons();\n              currentlyCaching.value = false;\n              intervalId = setInterval(methods.animateSlider, 500);\n            }\n            if (animate.value === false && intervalId) {\n              clearInterval(intervalId);\n            }\n        },\n        stopAnimating() {\n          animate.value = false;\n        },\n      }\n\n      const init = () => {\n        methods.updateFileShown();\n      }\n\n      init();\n\n      watch(props, methods.updateFileShown)\n      watch(analysis, methods.updateFileShown)\n\n      watch(mode, () => {\n        methods.updateFileShown();\n        animate.value = false;\n      })\n\n      watch(stdDev, methods.updateFileShown)\n      if (animate) {\n        watch(animate, methods.triggerAnimate)\n      }\n\n      return {\n        methods,\n        modeOptions,\n        mode,\n        stdDev,\n        stdDevRange,\n        pcaInfo,\n        animate,\n        menu,\n        showConfirmation,\n        selectedProject,\n      };\n    },\n  };\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./PCA.vue?vue&type=template&id=5bc3af8a\"\nimport script from \"./PCA.vue?vue&type=script&lang=ts\"\nexport * from \"./PCA.vue?vue&type=script&lang=ts\"\nimport style0 from \"./PCA.vue?vue&type=style&index=0&id=5bc3af8a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport {\n    analysis,\n    analysisExpandedTab,\n    jobAlreadyDone,\n} from '@/store'\nimport { ref, watch, provide } from 'vue'\nimport Charts from './Charts.vue'\nimport Groups from './Groups.vue'\nimport Particles from './Particles.vue'\nimport PCA from './PCA.vue'\nimport { AnalysisTabs } from './util';\nimport TaskInfo from '../TaskInfo.vue'\nimport { AnalysisParams } from '@/types'\n\nexport default {\n    props: {\n        currentTab: {\n            type: String,\n            required: true,\n        }\n    },\n    components: {\n        Charts,\n        Groups,\n        Particles,\n        PCA,\n        TaskInfo,\n    },\n    setup() {\n        const formDefaults: AnalysisParams = {range: 2, steps: 11}\n        const openTab = ref(AnalysisTabs.PCA);\n        const formData = ref<AnalysisParams>({...formDefaults});\n        const currentlyCaching = ref<boolean>(false);\n\n        const pca = ref();\n        const groups = ref();\n\n        // provide mutable ref for use in child components\n        provide('currentlyCaching', currentlyCaching);\n\n        watch(openTab, () => {\n            analysisExpandedTab.value = openTab.value;\n            switch(openTab.value) {\n                case AnalysisTabs.PCA:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.updateFileShown();\n                    break;\n                case AnalysisTabs.Groups:\n                    pca.value.methods.stopAnimating();\n                    if (groups.value) {\n                        if (groups.value.currGroup) {\n                            groups.value.methods.updateGroupFileShown();\n                        }\n                    }\n                    break;\n                case AnalysisTabs.Charts:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.stopAnimating();\n                    break;\n                case AnalysisTabs.Particles:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.stopAnimating();\n                    break;\n            }\n        })\n\n        function resetForm() {\n            formData.value = formDefaults\n        }\n\n        return {\n            analysis,\n            formData,\n            openTab,\n            currentlyCaching,\n            pca,\n            groups,\n            resetForm,\n            jobAlreadyDone\n        }\n    },\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./AnalysisTab.vue?vue&type=template&id=3ba8df00\"\nimport script from \"./AnalysisTab.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisTab.vue?vue&type=script&lang=ts\"\nimport style0 from \"./AnalysisTab.vue?vue&type=style&index=0&id=3ba8df00&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panels',{model:{value:(_vm.openPanel),callback:function ($$v) {_vm.openPanel=$$v},expression:\"openPanel\"}},[_c('landmarks'),_c('constraints')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Landmarks \"),_c('v-spacer'),_c('v-text-field',{staticStyle:{\"max-width\":\"50px\"},attrs:{\"label\":\"Size\",\"type\":\"number\",\"min\":\"1\",\"max\":\"15\"},on:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.landmarkSize),callback:function ($$v) {_vm.landmarkSize=_vm._n($$v)},expression:\"landmarkSize\"}})],1),(_vm.landmarksLoading)?_c('v-expansion-panel-content',[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1):_c('v-expansion-panel-content',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.landmarkInfo,\"expanded\":_vm.expandedRows,\"item-key\":\"id\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"single-select\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.color\",fn:function({ index, item }){return [_c('v-dialog',{attrs:{\"value\":\"index\",\"width\":\"400\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"delete-icon\"},'v-icon',attrs,false),on),[_vm._v(\" mdi-trash-can \")])]}}],null,true),model:{value:(_vm.dialogs[index]),callback:function ($$v) {_vm.$set(_vm.dialogs, index, $$v)},expression:\"dialogs[index]\"}},[_c('v-card',[_c('v-card-title',{staticStyle:{\"word-break\":\"break-word\"}},[_vm._v(\" Are you sure you want to remove \"+_vm._s(item.name)+\" on all subjects? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.deleteLandmark(item)}}},[_vm._v(\" Yes, Delete This Landmark \")])],1)],1)],1),_c('v-dialog',{attrs:{\"width\":\"300\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"color-square\",style:({backgroundColor: _vm.colorStrings[index]})},'v-btn',attrs,false),on))]}}],null,true)},[_c('v-card',[_c('v-card-title',[_vm._v(\"Change color for \"+_vm._s(item.name))]),_c('v-color-picker',{attrs:{\"value\":_vm.getColorObject(item.color),\"dot-size\":\"25\"},on:{\"update:color\":(c) => _vm.updateLandmarkColor(index, c)}})],1)],1)]}},{key:\"item.name\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"100px\"},on:{\"input\":(v) => _vm.updateLandmarkInfo(index, v, item.comment)},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}})]}},{key:\"item.comment\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"130px\"},on:{\"input\":(v) => _vm.updateLandmarkInfo(index, item.name, v)},model:{value:(item.comment),callback:function ($$v) {_vm.$set(item, \"comment\", $$v)},expression:\"item.comment\"}})]}},{key:\"item.domain\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"80px\"},attrs:{\"items\":_vm.anatomies.map((a) => a.replace('anatomy_', '')),\"disabled\":item.num_set > 0},on:{\"input\":(v) => _vm.updateLandmarks()},model:{value:(item.domain),callback:function ($$v) {_vm.$set(item, \"domain\", $$v)},expression:\"item.domain\"}})]}},{key:\"item.num_set\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"60px\",\"text-align\":\"right\"}},[_vm._v(\" \"+_vm._s(item.num_set)+\" / \"+_vm._s(_vm.allSubjectsForDataset.length)+\" \"),(_vm.expandedRows.includes(item))?_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[]}}},[_vm._v(\"mdi-menu-up\")]):_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[item]}}},[_vm._v(\"mdi-menu-down\")])],1)]}},{key:\"expanded-item\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"100%\"}},_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('div',{key:subject.id,staticClass:\"d-flex py-1\",staticStyle:{\"align-items\":\"center\",\"justify-content\":\"space-between\",\"width\":\"100%\"}},[_c('span',{staticStyle:{\"width\":\"170px\"}},[_vm._v(_vm._s(subject.name))]),_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleSubjectShown(subject.id, item.domain)}}},[_vm._v(\" \"+_vm._s(_vm.isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show')+\" subject \")]),(_vm.getPlacementStatus(subject, item))?_c('div',{staticStyle:{\"width\":\"170px\",\"text-align\":\"right\"}},[(!_vm.currentLandmarkPlacement && _vm.getPlacementStatus(subject, item) === 'NOT SET' && _vm.isShapeShown(subject.id, item.domain))?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.beginPlacement(subject, item)}}},[_vm._v(\" BEGIN PLACEMENT \")]):_c('span',[_vm._v(\" \"+_vm._s(_vm.getPlacementStatus(subject, item))+\" \")])],1):_vm._e()],1)}),0)]}}])}),_c('div',{staticClass:\"d-flex py-3\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('v-btn',{on:{\"click\":_vm.newLandmark}},[_vm._v(\" + New Landmark \")]),(_vm.changesMade)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" Save Landmarks \")]):_c('span',[_vm._v(\"Landmarks Saved.\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { computed, ref, watch } from 'vue';\nimport {\n    landmarkInfo,\n    landmarksLoading,\n    selectedProject,\n    allSubjectsForDataset,\n    anatomies,\n    allSetLandmarks,\n    landmarkSize,\n    currentLandmarkPlacement,\n    reassignLandmarkIDsByIndex,\n    reassignLandmarkNumSetValues,\n} from '@/store';\nimport { saveLandmarkData } from '@/api/rest'\nimport { getLandmarkLocation, getWidgetInfo, isShapeShown, setLandmarkLocation, toggleSubjectShown } from '../store/methods';\nimport { rgbToHex } from '@/helper';\n\nexport default {\n    setup() {\n        const headers =  [\n            {text: '', value: 'color', width: '60px', sortable: false},\n            {text: 'Name', value: 'name', width: '120px'},\n            {text: 'Comment', value: 'comment', width: '150px'},\n            {text: 'Domain', value: 'domain', width: '100px'},\n            {text: '# set', value: 'num_set', width: '60px', sortable: false},\n        ];\n\n        const changesMade = ref(false);\n\n        const expandedRows = ref([]);\n\n        const dialogs = ref([]);\n\n        const colorStrings = computed(() => {\n            return landmarkInfo.value.map(({color}) => {\n                return `rgb(${color[0]},${color[1]},${color[2]})`\n            })\n        })\n\n        function getColorObject(rgb) {\n            return {'r': rgb[0], 'g': rgb[1], 'b': rgb[2]}\n        }\n\n        function getPlacementStatus(subject, item) {\n            const placement = getLandmarkLocation(subject, item)\n            if(placement) {\n                if (currentLandmarkPlacement.value === getWidgetInfo(subject, item)) {\n                    return `Click anywhere on ${subject.name} ${item.domain}`\n                }\n                const coordStrings = []\n                placement.forEach(v => coordStrings.push(v.toFixed(2)))\n                return coordStrings.join(\", \")\n            }\n            return 'NOT SET'\n        }\n\n        function beginPlacement(subject, item) {\n            currentLandmarkPlacement.value = getWidgetInfo(subject, item)\n        }\n\n\n        function newLandmark() {\n            const newID = landmarkInfo.value?.length || 0\n            const landmark = {\n                color: [\n                    100 * (newID % 2),\n                    50 * (newID % 5),\n                    80 * (newID % 3)\n                ],\n                comment: '',\n                domain: anatomies.value[0].replace('anatomy_', ''),\n                id: newID,\n                name: `L${newID}`,\n                num_set: 0,\n                visible: true,\n            }\n            if (landmarkInfo.value?.length) {\n                landmarkInfo.value = [\n                    ...landmarkInfo.value,\n                    landmark\n                ]\n            } else {\n                landmarkInfo.value = [landmark]\n            }\n            reassignLandmarkIDsByIndex()\n            expandedRows.value = [landmark]\n            selectedProject.value.landmarks = [\n                ...selectedProject.value.landmarks,\n                { newAddition: true }\n            ]\n            changesMade.value = true\n        }\n\n        function deleteLandmark(item) {\n            allSubjectsForDataset.value.forEach((subject) => {\n                setLandmarkLocation(subject, item, undefined)\n            })\n            landmarkInfo.value.splice(item.id, 1)\n            reassignLandmarkIDsByIndex()\n            currentLandmarkPlacement.value = undefined\n            dialogs.value = []\n            expandedRows.value = []\n            changesMade.value = true\n        }\n\n        function updateLandmarkInfo(landmarkIndex, name, comment) {\n            landmarkInfo.value[landmarkIndex] = Object.assign(\n                {}, landmarkInfo.value[landmarkIndex], {name, comment}\n            )\n            // reassign store var for listeners\n            landmarkInfo.value = [...landmarkInfo.value]\n            changesMade.value = true\n        }\n\n        function updateLandmarkColor(landmarkIndex, color) {\n            color = [\n                color.rgba.r, color.rgba.g, color.rgba.b\n            ]\n            landmarkInfo.value[landmarkIndex] = Object.assign(\n                {}, landmarkInfo.value[landmarkIndex], {color}\n            )\n            // overwrite landmarkInfo so colorStrings will recompute\n            landmarkInfo.value = [...landmarkInfo.value]\n        }\n\n        function updateLandmarks() {\n            landmarkInfo.value = [...landmarkInfo.value]\n        }\n\n        function submit() {\n            const locationData = Object.fromEntries(\n                Object.entries(allSetLandmarks.value).map(([subjectName, subjectRecords]) => {\n                    const subjectID = allSubjectsForDataset.value.find((s) => s.name === subjectName)?.id\n                    return [subjectID, Object.fromEntries(\n                        Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                            return [domain, Object.values(domainRecords).filter((l) => l)]\n                        })\n                    )]\n                })\n            )\n            const infoData = landmarkInfo.value.map((lInfo => {\n                return {\n                    \"domain\": lInfo.domain,\n                    \"name\": lInfo.name,\n                    \"visible\": \"true\",\n                    \"color\": rgbToHex(lInfo.color),\n                    \"comment\": lInfo.comment\n                }\n            }))\n            saveLandmarkData(\n                selectedProject.value.id,\n                infoData,\n                locationData\n            ).then((response) => {\n                if (response.id === selectedProject.value.id) {\n                    selectedProject.value = response\n                    changesMade.value = false\n                }\n            })\n        }\n\n        watch(allSetLandmarks, () => changesMade.value = true)\n\n        watch(currentLandmarkPlacement, (curr) => {\n            reassignLandmarkNumSetValues()\n            if (!curr) changesMade.value = true\n        })\n\n        return {\n            headers,\n            changesMade,\n            dialogs,\n            landmarksLoading,\n            expandedRows,\n            colorStrings,\n            landmarkSize,\n            landmarkInfo,\n            anatomies,\n            allSubjectsForDataset,\n            currentLandmarkPlacement,\n            isShapeShown,\n            toggleSubjectShown,\n            getColorObject,\n            getPlacementStatus,\n            beginPlacement,\n            newLandmark,\n            deleteLandmark,\n            updateLandmarkColor,\n            updateLandmarkInfo,\n            updateLandmarks,\n            submit,\n        }\n    }\n}\n</script>\n\n<template>\n    <v-expansion-panel>\n                <v-expansion-panel-header>\n                    Landmarks\n                    <v-spacer/>\n                    <v-text-field\n                        v-model.number=\"landmarkSize\"\n                        label=\"Size\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"15\"\n                        style=\"max-width: 50px\"\n                        @click.stop\n                    />\n                </v-expansion-panel-header>\n                <v-expansion-panel-content v-if=\"landmarksLoading\">\n                    <v-progress-linear indeterminate/>\n                </v-expansion-panel-content>\n                <v-expansion-panel-content v-else>\n                    <v-data-table\n                        :headers=\"headers\"\n                        :items=\"landmarkInfo\"\n                        :expanded=\"expandedRows\"\n                        item-key=\"id\"\n                        disable-pagination\n                        hide-default-footer\n                        single-select\n                        dense\n                        width=\"100%\"\n                    >\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.color=\"{ index, item }\">\n                            <v-dialog\n                                v-model=\"dialogs[index]\"\n                                value=\"index\"\n                                width=\"400\"\n                            >\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-icon class=\"delete-icon\" v-bind=\"attrs\" v-on=\"on\">\n                                        mdi-trash-can\n                                    </v-icon>\n                                </template>\n                                <v-card>\n                                    <v-card-title style=\"word-break: break-word;\">\n                                        Are you sure you want to remove {{ item.name }}\n                                        on all subjects?\n                                    </v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer/>\n                                        <v-btn color=\"red\" @click=\"deleteLandmark(item)\">\n                                            Yes, Delete This Landmark\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                            <v-dialog width=\"300\">\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-btn\n                                        class='color-square'\n                                        :style=\"{backgroundColor: colorStrings[index]}\"\n                                        v-bind=\"attrs\"\n                                        v-on=\"on\"\n                                    />\n                                </template>\n                                <v-card>\n                                    <v-card-title>Change color for {{ item.name }}</v-card-title>\n                                    <v-color-picker\n                                        :value=\"getColorObject(item.color)\"\n                                        dot-size=\"25\"\n                                        @update:color=\"(c) => updateLandmarkColor(index, c)\"\n                                    ></v-color-picker>\n                                </v-card>\n                            </v-dialog>\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.name=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.name\"\n                                style=\"width: 100px\"\n                                @input=\"(v) => updateLandmarkInfo(index, v, item.comment)\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.comment=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.comment\"\n                                style=\"width: 130px\"\n                                @input=\"(v) => updateLandmarkInfo(index, item.name, v)\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.domain=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.domain\"\n                                :items=\"anatomies.map((a) => a.replace('anatomy_', ''))\"\n                                :disabled=\"item.num_set > 0\"\n                                style=\"width: 80px\"\n                                @input=\"(v) => updateLandmarks()\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.num_set=\"{ item }\">\n                            <div style=\"width: 60px; text-align: right;\">\n                                {{ item.num_set }} / {{ allSubjectsForDataset.length }}\n                                <v-icon v-if=\"expandedRows.includes(item)\" @click=\"expandedRows=[]\">mdi-menu-up</v-icon>\n                                <v-icon v-else @click=\"expandedRows=[item]\">mdi-menu-down</v-icon>\n                            </div>\n                        </template>\n                        <template v-slot:expanded-item=\"{ item }\">\n                            <div style=\"width: 100%\">\n                                <div\n                                    v-for=\"subject in allSubjectsForDataset\"\n                                    :key=\"subject.id\"\n                                    class=\"d-flex py-1\"\n                                    style=\"align-items: center; justify-content: space-between; width: 100%\"\n                                >\n                                    <span style=\"width: 170px;\">{{ subject.name }}</span>\n                                    <v-btn\n                                        small\n                                        @click=\"toggleSubjectShown(subject.id, item.domain)\"\n                                    >\n                                        {{ isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show' }} subject\n                                    </v-btn>\n                                    <div\n                                        v-if=\"getPlacementStatus(subject, item)\"\n                                        style=\"width: 170px; text-align: right;\"\n                                    >\n                                        <v-btn\n                                            v-if=\"!currentLandmarkPlacement && getPlacementStatus(subject, item) === 'NOT SET' && isShapeShown(subject.id, item.domain)\"\n                                            @click=\"beginPlacement(subject, item)\"\n                                            small\n                                        >\n                                            BEGIN PLACEMENT\n                                        </v-btn>\n                                        <span v-else>\n                                            {{ getPlacementStatus(subject, item) }}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                    </v-data-table>\n                    <div class=\"d-flex py-3\" style=\"justify-content: space-between;\">\n                        <v-btn @click=\"newLandmark\">\n                            + New Landmark\n                        </v-btn>\n                        <v-btn v-if=\"changesMade\" color=\"primary\" @click=\"submit\">\n                            Save Landmarks\n                        </v-btn>\n                        <span v-else>Landmarks Saved.</span>\n                    </div>\n                </v-expansion-panel-content>\n            </v-expansion-panel>\n</template>\n\n<style>\n.color-square {\n    height: 20px !important;\n    width: 20px !important;\n    min-width: 15px !important;\n    padding: 0 !important;\n    margin-left: 15px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Landmarks.vue?vue&type=template&id=addf5cb4\"\nimport script from \"./Landmarks.vue?vue&type=script&lang=js\"\nexport * from \"./Landmarks.vue?vue&type=script&lang=js\"\nimport style0 from \"./Landmarks.vue?vue&type=style&index=0&id=addf5cb4&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Constraints \"),_c('v-spacer')],1),(_vm.constraintsLoading)?_c('v-expansion-panel-content',[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1):_c('v-expansion-panel-content',[_c('v-data-table',{staticClass:\"contraints-table\",attrs:{\"headers\":_vm.headers,\"items\":_vm.constraintInfo,\"expanded\":_vm.expandedRows,\"item-key\":\"id\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"single-select\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.id\",fn:function({ index, item }){return [_c('v-dialog',{attrs:{\"value\":\"index\",\"width\":\"400\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"delete-icon\"},'v-icon',attrs,false),on),[_vm._v(\" mdi-trash-can \")])]}}],null,true),model:{value:(_vm.dialogs[index]),callback:function ($$v) {_vm.$set(_vm.dialogs, index, $$v)},expression:\"dialogs[index]\"}},[_c('v-card',[_c('v-card-title',{staticStyle:{\"word-break\":\"break-word\"}},[_vm._v(\" Are you sure you want to remove \"+_vm._s(item.name)+\" on all subjects? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.deleteConstraint(item)}}},[_vm._v(\" Yes, Delete This Constraint \")])],1)],1)],1)]}},{key:\"item.show\",fn:function({ index, item }){return [_c('v-icon',{on:{\"click\":function($event){return _vm.toggleConstraintShown(item)}}},[_vm._v(\" \"+_vm._s(_vm.constraintsShown.includes(item.id) ? 'mdi-eye-outline' : 'mdi-eye-off-outline')+\" \")])]}},{key:\"item.name\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"130px\"},on:{\"input\":function($event){_vm.changesMade = true}},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}})]}},{key:\"item.type\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"items\":['plane', 'paint'],\"disabled\":item.num_set > 0,\"error-messages\":_vm.constraintErrors[item.id]},on:{\"change\":(v) => _vm.validateConstraint(item)},model:{value:(item.type),callback:function ($$v) {_vm.$set(item, \"type\", $$v)},expression:\"item.type\"}})]}},{key:\"item.domain\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"80px\"},attrs:{\"items\":_vm.anatomies.map((a) => a.replace('anatomy_', '')),\"disabled\":item.num_set > 0},on:{\"change\":(v) => _vm.validateConstraint(item)},model:{value:(item.domain),callback:function ($$v) {_vm.$set(item, \"domain\", $$v)},expression:\"item.domain\"}})]}},{key:\"item.num_set\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"60px\",\"text-align\":\"right\"}},[_vm._v(\" \"+_vm._s(item.num_set)+\" / \"+_vm._s(_vm.allSubjectsForDataset.length)+\" \"),(_vm.expandedRows.includes(item))?_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[]}}},[_vm._v(\"mdi-menu-up\")]):_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[item]}}},[_vm._v(\"mdi-menu-down\")])],1)]}},{key:\"expanded-item\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"calc(100% - 20px)\"}},_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('div',{key:subject.id,staticClass:\"d-flex py-1\",staticStyle:{\"align-items\":\"center\",\"justify-content\":\"space-between\",\"width\":\"100%\"}},[_c('span',{staticStyle:{\"width\":\"150px\"}},[_vm._v(_vm._s(subject.name))]),(!_vm.currentConstraintPlacement)?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleSubjectShown(subject.id, item.domain)}}},[_vm._v(\" \"+_vm._s(_vm.isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show')+\" subject \")]):(_vm.getPlacementStatus(subject, item) === 'PLACING' && item.type === 'paint')?_c('div',{staticStyle:{\"width\":\"200px\",\"text-align\":\"center\"}},[_c('v-text-field',{staticStyle:{\"max-width\":\"70px\",\"display\":\"inline-block\",\"margin-right\":\"10px\"},attrs:{\"label\":\"Brush Size\",\"type\":\"number\",\"min\":\"1\",\"max\":\"15\"},on:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.constraintPaintRadius),callback:function ($$v) {_vm.constraintPaintRadius=_vm._n($$v)},expression:\"constraintPaintRadius\"}}),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('div',_vm._g(_vm._b({staticStyle:{\"max-width\":\"70px\",\"display\":\"inline-block\",\"margin-right\":\"10px\"}},'div',attrs,false),on),[_c('v-switch',{attrs:{\"label\":\"Exclude\"},model:{value:(_vm.constraintPaintExclusion),callback:function ($$v) {_vm.constraintPaintExclusion=$$v},expression:\"constraintPaintExclusion\"}})],1)]}}],null,true)},[_c('span',[_vm._v(\"Enable to paint exclusion area. Disable to erase exclusion area.\")])])],1):_c('v-spacer'),_c('div',{staticStyle:{\"width\":\"140px\",\"text-align\":\"right\"}},[(_vm.getPlacementStatus(subject, item) === 'INVALID')?_c('span',[_vm._v(\" INVALID \")]):(_vm.isShapeShown(subject.id, item.domain) && !_vm.constraintsShown.includes(item.id))?_c('span',[_vm._v(\" Not visible \")]):(_vm.isShapeShown(subject.id, item.domain) && _vm.getPlacementStatus(subject, item) !== 'plane placed')?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleCurrentPlacement(subject, item)}}},[(_vm.getPlacementStatus(subject, item) === 'NOT SET')?_c('span',[_vm._v(\"BEGIN PLACEMENT\")]):_vm._e(),(_vm.getPlacementStatus(subject, item) === 'PLACING')?_c('span',[_vm._v(\"DONE\")]):_vm._e(),(_vm.getPlacementStatus(subject, item) === 'paint placed')?_c('span',[_vm._v(\"EDIT PAINT\")]):_vm._e()]):_c('span',[_vm._v(\" \"+_vm._s(_vm.getPlacementStatus(subject, item)))])],1)],1)}),0)]}}])}),_c('div',{staticClass:\"d-flex py-3\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('v-btn',{on:{\"click\":_vm.newConstraint}},[_vm._v(\" + New Constraint \")]),(_vm.changesMade)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" Save Constraints \")]):_c('span',[_vm._v(\"Constraints Saved.\")])],1),(!_vm.changesMade && _vm.saveWarning)?_c('span',{staticStyle:{\"color\":\"orange\"}},[_vm._v(\" \"+_vm._s(_vm.saveWarning)+\" \")]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { ref, watch } from 'vue';\nimport {\n    constraintInfo,\n    constraintsLoading,\n    constraintsShown,\n    constraintPaintRadius,\n    constraintPaintExclusion,\n    selectedProject,\n    allSubjectsForDataset,\n    anatomies,\n    allSetConstraints,\n    currentConstraintPlacement,\n    reassignConstraintIDsByIndex,\n} from '@/store';\nimport { getConstraintLocation, getWidgetInfo, isShapeShown, setConstraintLocation, toggleSubjectShown } from '../store/methods';\nimport { saveConstraintData } from '@/api/rest';\nimport { convertConstraintDataForDB } from '@/reader/constraints';\nimport { groupBy } from '@/helper';\n\nexport default {\n    setup() {\n        const headers =  [\n            {text: '', value: 'id', width: '10px', sortable: false},\n            {text: 'Show', value: 'show', width: '10px', sortable: false},\n            {text: 'Name', value: 'name', width: '150px'},\n            {text: 'Type', value: 'type', width: '120px'},\n            {text: 'Domain', value: 'domain', width: '100px'},\n            {text: '# set', value: 'num_set', width: '60px', sortable: false, align: 'end'},\n        ];\n\n        const changesMade = ref(false);\n\n        const expandedRows = ref([]);\n\n        const dialogs = ref([]);\n\n        const constraintErrors = ref({});\n\n        const saveWarning = ref();\n\n        function getPlacementStatus(subject, item) {\n            const placement = getConstraintLocation(subject, item)\n            if (JSON.stringify(currentConstraintPlacement.value) === JSON.stringify(getWidgetInfo(subject, item))) {\n                return 'PLACING'\n            } else if (placement) {\n                return item.type + ' placed'\n            } else if (constraintErrors.value[item.id]) {\n                return 'INVALID'\n            }\n            return 'NOT SET'\n        }\n\n        function toggleConstraintShown(item) {\n            if (constraintsShown.value.includes(item.id)) {\n                constraintsShown.value = constraintsShown.value.filter((c) => c !== item.id)\n            } else {\n                constraintsShown.value = [\n                    ...constraintsShown.value,\n                    item.id\n                ]\n            }\n        }\n\n        function toggleCurrentPlacement(subject, item) {\n            if (currentConstraintPlacement.value) currentConstraintPlacement.value = undefined\n            else currentConstraintPlacement.value = getWidgetInfo(subject, item)\n        }\n\n        function validateConstraint(cInfo) {\n            if (cInfo.type === 'paint' && constraintInfo.value.some((c) => {\n                return c.id !== cInfo.id && c.domain === cInfo.domain && c.type === cInfo.type\n            })) {\n                constraintErrors.value[cInfo.id] = 'Only one paint constraint can exist per domain. Edit the existing paint constraint.'\n            } else {\n                constraintErrors.value[cInfo.id] = undefined\n            }\n        }\n\n        function newConstraint() {\n            const newID = constraintInfo.value?.length || 0\n            const constraint = {\n                type: 'plane',\n                domain: anatomies.value[0].replace('anatomy_', ''),\n                id: newID,\n                num_set: 0,\n                visible: true,\n            }\n            if (constraintInfo.value?.length) {\n                constraintInfo.value = [\n                    ...constraintInfo.value,\n                    constraint\n                ]\n            } else {\n                constraintInfo.value = [constraint]\n            }\n            reassignConstraintIDsByIndex()\n            expandedRows.value = [constraint]\n            toggleConstraintShown(constraint)\n            selectedProject.value.constraints = [\n                ...selectedProject.value.constraints,\n                { newAddition: true }\n            ]\n            changesMade.value = true\n        }\n\n        function deleteConstraint(item) {\n            toggleConstraintShown(item)\n            allSubjectsForDataset.value.forEach((subject) => {\n                setConstraintLocation(subject, item, undefined)\n            })\n            constraintInfo.value.splice(item.id, 1)\n            reassignConstraintIDsByIndex()\n            currentConstraintPlacement.value = undefined\n            dialogs.value = []\n            expandedRows.value = []\n            changesMade.value = true\n        }\n\n        function submit() {\n            const locationData = Object.fromEntries(\n                allSubjectsForDataset.value.map((subject) => {\n                    return [subject.id, Object.fromEntries(\n                        Object.entries(groupBy(constraintInfo.value, 'domain'))\n                        .map(([domain, shapeInfos]) => {\n                            let shapeLocations = []\n                            if (allSetConstraints.value[subject.name] && allSetConstraints.value[subject.name][domain]) {\n                                shapeLocations = Object.values(\n                                    allSetConstraints.value[subject.name][domain]\n                                )\n                            }\n                            const shapeRecords = convertConstraintDataForDB(\n                                shapeLocations,\n                                shapeInfos,\n                            )\n                            return [domain, shapeRecords]\n                        })\n                    )]\n                })\n            )\n            const noneSetConstraints = constraintInfo.value.filter((cInfo) => cInfo.num_set === 0)\n            if (noneSetConstraints.length > 0) {\n                const plural = noneSetConstraints.length > 1\n                const constraintLabels = noneSetConstraints.map((cInfo) => cInfo.name || cInfo.id)\n                saveWarning.value = (\n                    `Constraint${plural ? 's': ''}\n                    ${constraintLabels.join(\", \")}\n                    ${plural ? 'do' : 'does' }\n                    not have any placements and will not be saved.`\n                )\n            }\n            saveConstraintData(\n                selectedProject.value.id,\n                locationData\n            ).then((response) => {\n                if (response.id === selectedProject.value.id) {\n                    selectedProject.value = response\n                    changesMade.value = false\n                }\n            })\n        }\n\n        watch(allSetConstraints, () => {\n            changesMade.value = true\n            saveWarning.value = undefined\n        }, {deep: true})\n\n        return {\n            headers,\n            changesMade,\n            dialogs,\n            constraintsLoading,\n            constraintErrors,\n            saveWarning,\n            expandedRows,\n            constraintInfo,\n            constraintsShown,\n            anatomies,\n            allSubjectsForDataset,\n            constraintPaintRadius,\n            constraintPaintExclusion,\n            currentConstraintPlacement,\n            isShapeShown,\n            toggleSubjectShown,\n            getPlacementStatus,\n            validateConstraint,\n            toggleConstraintShown,\n            toggleCurrentPlacement,\n            newConstraint,\n            deleteConstraint,\n            submit,\n        }\n    }\n}\n</script>\n\n<template>\n    <v-expansion-panel>\n                <v-expansion-panel-header>\n                    Constraints\n                    <v-spacer/>\n                </v-expansion-panel-header>\n                <v-expansion-panel-content v-if=\"constraintsLoading\">\n                    <v-progress-linear indeterminate/>\n                </v-expansion-panel-content>\n                <v-expansion-panel-content v-else>\n                    <v-data-table\n                        :headers=\"headers\"\n                        :items=\"constraintInfo\"\n                        :expanded=\"expandedRows\"\n                        class=\"contraints-table\"\n                        item-key=\"id\"\n                        disable-pagination\n                        hide-default-footer\n                        single-select\n                        dense\n                        width=\"100%\"\n                    >\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.id=\"{ index, item }\">\n                            <v-dialog\n                                v-model=\"dialogs[index]\"\n                                value=\"index\"\n                                width=\"400\"\n                            >\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-icon class=\"delete-icon\" v-bind=\"attrs\" v-on=\"on\">\n                                        mdi-trash-can\n                                    </v-icon>\n                                </template>\n                                <v-card>\n                                    <v-card-title style=\"word-break: break-word;\">\n                                        Are you sure you want to remove {{ item.name }}\n                                        on all subjects?\n                                    </v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer/>\n                                        <v-btn color=\"red\" @click=\"deleteConstraint(item)\">\n                                            Yes, Delete This Constraint\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                        </template>\n                         <!-- eslint-disable-next-line -->\n                         <template v-slot:item.show=\"{ index, item }\">\n                            <v-icon @click=\"toggleConstraintShown(item)\">\n                                {{ constraintsShown.includes(item.id) ? 'mdi-eye-outline' : 'mdi-eye-off-outline' }}\n                            </v-icon>\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.name=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.name\"\n                                style=\"width: 130px\"\n                                @input=\"changesMade = true\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.type=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.type\"\n                                :items=\"['plane', 'paint']\"\n                                :disabled=\"item.num_set > 0\"\n                                :error-messages=\"constraintErrors[item.id]\"\n                                @change=\"(v) => validateConstraint(item)\"\n                                style=\"width: 100px\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.domain=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.domain\"\n                                :items=\"anatomies.map((a) => a.replace('anatomy_', ''))\"\n                                :disabled=\"item.num_set > 0\"\n                                @change=\"(v) => validateConstraint(item)\"\n                                style=\"width: 80px\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.num_set=\"{ item }\">\n                            <div style=\"width: 60px; text-align: right;\">\n                                {{ item.num_set }} / {{ allSubjectsForDataset.length }}\n                                <v-icon v-if=\"expandedRows.includes(item)\" @click=\"expandedRows=[]\">mdi-menu-up</v-icon>\n                                <v-icon v-else @click=\"expandedRows=[item]\">mdi-menu-down</v-icon>\n                            </div>\n                        </template>\n                        <template v-slot:expanded-item=\"{ item }\">\n                            <div style=\"width: calc(100% - 20px)\">\n                                <div\n                                    v-for=\"subject in allSubjectsForDataset\"\n                                    :key=\"subject.id\"\n                                    class=\"d-flex py-1\"\n                                    style=\"align-items: center; justify-content: space-between; width: 100%\"\n                                >\n                                    <span style=\"width: 150px;\">{{ subject.name }}</span>\n                                    <v-btn\n                                        small\n                                        v-if=\"!currentConstraintPlacement\"\n                                        @click=\"toggleSubjectShown(subject.id, item.domain)\"\n                                    >\n                                        {{ isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show' }} subject\n                                    </v-btn>\n                                    <div\n                                        v-else-if=\"getPlacementStatus(subject, item) === 'PLACING' && item.type === 'paint'\"\n                                        style=\"width: 200px; text-align: center;\"\n                                    >\n                                        <v-text-field\n                                            v-model.number=\"constraintPaintRadius\"\n                                            label=\"Brush Size\"\n                                            type=\"number\"\n                                            min=\"1\"\n                                            max=\"15\"\n                                            style=\"max-width: 70px; display: inline-block; margin-right: 10px\"\n                                            @click.stop\n                                        />\n                                        <v-tooltip top>\n                                            <template v-slot:activator=\"{ on, attrs }\">\n                                                <div\n                                                    v-bind=\"attrs\"\n                                                    v-on=\"on\"\n                                                    style=\"max-width: 70px; display: inline-block; margin-right: 10px\"\n                                                >\n                                                    <v-switch v-model=\"constraintPaintExclusion\" label=\"Exclude\" />\n                                                </div>\n                                            </template>\n                                            <span>Enable to paint exclusion area. Disable to erase exclusion area.</span>\n                                        </v-tooltip>\n                                    </div>\n                                    <v-spacer v-else />\n                                    <div style=\"width: 140px; text-align: right;\">\n                                        <span v-if=\"getPlacementStatus(subject, item) === 'INVALID'\">\n                                            INVALID\n                                        </span>\n                                        <span v-else-if=\"isShapeShown(subject.id, item.domain) && !constraintsShown.includes(item.id)\">\n                                            Not visible\n                                        </span>\n                                        <v-btn\n                                            v-else-if=\"isShapeShown(subject.id, item.domain) && getPlacementStatus(subject, item) !== 'plane placed'\"\n                                            @click=\"toggleCurrentPlacement(subject, item)\"\n                                            small\n                                        >\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'NOT SET'\">BEGIN PLACEMENT</span>\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'PLACING'\">DONE</span>\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'paint placed'\">EDIT PAINT</span>\n                                        </v-btn>\n                                        <span v-else> {{ getPlacementStatus(subject, item) }}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                    </v-data-table>\n                    <div class=\"d-flex py-3\" style=\"justify-content: space-between;\">\n                        <v-btn @click=\"newConstraint\">\n                            + New Constraint\n                        </v-btn>\n                        <v-btn v-if=\"changesMade\" color=\"primary\" @click=\"submit\">\n                            Save Constraints\n                        </v-btn>\n                        <span v-else>Constraints Saved.</span>\n                    </div>\n                    <span\n                        v-if=\"!changesMade && saveWarning\"\n                        style=\"color: orange\"\n                    >\n                        {{ saveWarning }}\n                    </span>\n                </v-expansion-panel-content>\n            </v-expansion-panel>\n</template>\n\n<style>\n.file-column {\n    width: 100px!important;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.contraints-table .v-data-table tr {\n    position: relative;\n    display: block;\n    padding-left: 15px;\n}\n.contraints-table th {\n    padding-left: 5px !important;\n}\n.contraints-table .v-data-table td {\n    border-bottom: none !important;\n    padding: 0px 10px !important;\n}\n.contraints-table .v-data-table__expanded {\n    width: 100%\n}\n.contraints-table .v-row-group__header {\n    background: none !important;\n    border-top: 1px solid white !important;\n}\n.delete-icon {\n    position: absolute !important;\n    left: 5px;\n    bottom: 30%\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Constraints.vue?vue&type=template&id=2d1be46d\"\nimport script from \"./Constraints.vue?vue&type=script&lang=js\"\nexport * from \"./Constraints.vue?vue&type=script&lang=js\"\nimport style0 from \"./Constraints.vue?vue&type=style&index=0&id=2d1be46d&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { onMounted, ref, watch } from 'vue'\nimport Landmarks from '@/components/Landmarks.vue';\nimport Constraints from '@/components/Constraints.vue';\nimport { layers, layersShown } from '@/store';\n\n\nexport default {\n    components: {\n        Landmarks,\n        Constraints\n    },\n    setup() {\n        const openPanel = ref(0)\n\n        function updateLayersShown() {\n            layersShown.value = layers.value.filter((l) => {\n                if (l.name === 'Landmarks') {\n                    return openPanel.value === 0\n                } else if (l.name === 'Constraints') {\n                    return openPanel.value === 1\n                }\n                return layersShown.value.includes(l.name)\n            }).map((l) => l.name)\n        }\n\n        watch(openPanel, updateLayersShown)\n        onMounted(updateLayersShown)\n\n        return {\n            openPanel,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./InfoTab.vue?vue&type=template&id=3dd413fa\"\nimport script from \"./InfoTab.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoTab.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pa-3\"},[_c('task-info',{attrs:{\"taskName\":\"deepssm\",\"formData\":_vm.formData},on:{\"resetForm\":_vm.resetForm}}),_c('div',{staticClass:\"loading-dialog\"},[_c('v-dialog',{attrs:{\"width\":\"10%\"},model:{value:(_vm.deepSSMLoadingData),callback:function ($$v) {_vm.deepSSMLoadingData=$$v},expression:\"deepSSMLoadingData\"}},[_vm._v(\"Fetching results... \"),_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"align-center\":\"\"}})],1)],1),_c('v-expansion-panels',{model:{value:(_vm.openExpansionPanel),callback:function ($$v) {_vm.openExpansionPanel=$$v},expression:\"openExpansionPanel\"}},[(_vm.selectedProject && !_vm.selectedProject.readonly)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Controls\")]),_c('v-expansion-panel-content',[_c('v-tabs',{model:{value:(_vm.controlsTabs),callback:function ($$v) {_vm.controlsTabs=$$v},expression:\"controlsTabs\"}},[_c('v-tab',[_vm._v(\"Prep\")]),_c('v-tab',[_vm._v(\"Augmentation\")]),_c('v-tab',[_vm._v(\"Training\")])],1),_c('v-tabs-items',{model:{value:(_vm.controlsTabs),callback:function ($$v) {_vm.controlsTabs=$$v},expression:\"controlsTabs\"}},[_c('v-tab-item',[_c('div',[_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Test Split\",\"suffix\":\"%\"},model:{value:(_vm.prepData.testing_split.value),callback:function ($$v) {_vm.$set(_vm.prepData.testing_split, \"value\", _vm._n($$v))},expression:\"prepData.testing_split.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Validation Split\",\"suffix\":\"%\"},model:{value:(_vm.prepData.validation_split.value),callback:function ($$v) {_vm.$set(_vm.prepData.validation_split, \"value\", _vm._n($$v))},expression:\"prepData.validation_split.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Percent Variablity Preserved\",\"min\":\"0.0\",\"max\":\"100.0\",\"suffix\":\"%\"},model:{value:(_vm.prepData.percent_variability.value),callback:function ($$v) {_vm.$set(_vm.prepData.percent_variability, \"value\", _vm._n($$v))},expression:\"prepData.percent_variability.value\"}}),_c('div',{staticClass:\"image-spacing\"},[_c('v-label',{staticClass:\"spacing-label\"},[_vm._v(\"Image Spacing\")]),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"X\"},model:{value:(_vm.prepData.image_spacing.value.x),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"x\", _vm._n($$v))},expression:\"prepData.image_spacing.value.x\"}}),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"Y\"},model:{value:(_vm.prepData.image_spacing.value.y),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"y\", _vm._n($$v))},expression:\"prepData.image_spacing.value.y\"}}),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"Z\"},model:{value:(_vm.prepData.image_spacing.value.z),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"z\", _vm._n($$v))},expression:\"prepData.image_spacing.value.z\"}})],1)],1)]),_c('v-tab-item',[_c('div',[_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Number of Samples\",\"min\":\"1\"},model:{value:(_vm.augmentationData.aug_num_samples.value),callback:function ($$v) {_vm.$set(_vm.augmentationData.aug_num_samples, \"value\", _vm._n($$v))},expression:\"augmentationData.aug_num_samples.value\"}}),_c('v-select',{attrs:{\"items\":Object.values(_vm.Sampler),\"label\":\"Sampler Type\"},model:{value:(_vm.augmentationData.aug_sampler_type.value),callback:function ($$v) {_vm.$set(_vm.augmentationData.aug_sampler_type, \"value\", $$v)},expression:\"augmentationData.aug_sampler_type.value\"}})],1)]),_c('v-tab-item',[_c('div',[_c('v-select',{attrs:{\"items\":Object.values(_vm.LossFunction),\"label\":\"Loss Function\"},model:{value:(_vm.trainingData.train_loss_function.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_loss_function, \"value\", $$v)},expression:\"trainingData.train_loss_function.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Epochs\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_epochs.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_epochs, \"value\", _vm._n($$v))},expression:\"trainingData.train_epochs.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Learning Rate\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_learning_rate, \"value\", _vm._n($$v))},expression:\"trainingData.train_learning_rate.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Batch Size\",\"min\":\"1\"},model:{value:(_vm.trainingData.train_batch_size.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_batch_size, \"value\", _vm._n($$v))},expression:\"trainingData.train_batch_size.value\"}}),_c('v-checkbox',{attrs:{\"label\":\"Decay Learning Rate\"},model:{value:(_vm.trainingData.train_decay_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_decay_learning_rate, \"value\", $$v)},expression:\"trainingData.train_decay_learning_rate.value\"}}),_c('v-checkbox',{attrs:{\"label\":\"Fine Tuning\"},model:{value:(_vm.trainingData.train_fine_tuning.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning, \"value\", $$v)},expression:\"trainingData.train_fine_tuning.value\"}}),_c('v-text-field',{attrs:{\"disabled\":!_vm.trainingData.train_fine_tuning,\"type\":\"number\",\"label\":\"Fine Tuning Epochs\",\"min\":\"1\"},model:{value:(_vm.trainingData.train_fine_tuning_epochs.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning_epochs, \"value\", _vm._n($$v))},expression:\"trainingData.train_fine_tuning_epochs.value\"}}),_c('v-text-field',{attrs:{\"disabled\":!_vm.trainingData.train_fine_tuning,\"type\":\"number\",\"label\":\"Fine Tuning Learning Rate\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_fine_tuning_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning_learning_rate, \"value\", _vm._n($$v))},expression:\"trainingData.train_fine_tuning_learning_rate.value\"}})],1)])],1)],1)],1):_vm._e(),(_vm.deepSSMResult && _vm.deepSSMResult.result)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Data\")]),_c('v-expansion-panel-content',[_c('v-tabs',{model:{value:(_vm.deepSSMDataTab),callback:function ($$v) {_vm.deepSSMDataTab=$$v},expression:\"deepSSMDataTab\"}},[_c('v-tab',[_vm._v(\"Augmentation\")]),_c('v-tab',[_vm._v(\"Training\")]),_c('v-tab',[_vm._v(\"Testing\")])],1),_c('v-tabs-items',{model:{value:(_vm.deepSSMDataTab),callback:function ($$v) {_vm.deepSSMDataTab=$$v},expression:\"deepSSMDataTab\"}},[_c('v-tab-item',[_c('div',[_c('div',{staticClass:\"aug-data-checkboxes\"},[_c('v-radio-group',{model:{value:(_vm.deepSSMAugDataShown),callback:function ($$v) {_vm.deepSSMAugDataShown=$$v},expression:\"deepSSMAugDataShown\"}},[_c('v-radio',{attrs:{\"value\":\"Original\",\"label\":\"Original Data\"}}),_c('v-radio',{attrs:{\"value\":\"Generated\",\"label\":\"Generated Data\"}})],1)],1),_c('v-data-table',{attrs:{\"items\":_vm.dataTables.aug_table.value,\"headers\":_vm.dataTables.aug_headers.value}}),_c('h4',[_vm._v(\"Violin Plot\")]),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.aug_visualization,\"alt\":\"Augmented Data Violin Plot\"}})],1)]),_c('v-tab-item',[_c('div',[_c('v-data-table',{attrs:{\"items\":_vm.dataTables.training_table.value,\"headers\":_vm.dataTables.training_headers.value}}),_vm._v(\" Training Plot \"),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.training_visualization,\"alt\":\"Training Plot\"}}),(_vm.deepSSMResult.result?.training_visualization_ft)?_c('div',[_vm._v(\" Fine Tuning Plot \"),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.training_visualization_ft,\"alt\":\"Fine Tuning Plot\"}})],1):_vm._e()],1)]),_c('v-tab-item',[_c('div',[_c('v-data-table',{attrs:{\"items\":_vm.dataTables.testing_table.value,\"headers\":_vm.dataTables.testing_headers.value}})],1)])],1)],1)],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n/* eslint-disable no-unused-vars */\nimport {\n    selectedProject,\n    abort,\n    deepSSMDataTab,\n    deepSSMResult,\n    deepSSMAugDataShown,\n    groomFormData,\n    optimizationFormData,\n    loadDeepSSMDataForProject,\n    deepSSMLoadingData,\n    deepSSMErrorGlobalRange,\n} from '@/store';\nimport { Ref, onMounted, ref, watch } from 'vue';\nimport { parseCSVFromURL } from '@/helper';\nimport TaskInfo from './TaskInfo.vue';\n\n\nexport default {\n  components: { TaskInfo },\n    setup() {\n        enum Sampler {\n            Gaussian = \"Gaussian\",\n            Mixture = \"mixture\",\n            KDE = \"KDE\",\n        }\n\n        enum LossFunction {\n            MSE = \"MSE\",\n            Focal = \"Focal\",\n        }\n\n        const openExpansionPanel = ref<number>(0);\n        const controlsTabs = ref();\n        const showAbortConfirmation = ref(false);\n        const formData = ref();\n        const formDefaults = ref({});\n\n        const prepData = {\n            testing_split: ref<number>(20),\n            validation_split: ref<number>(20),\n            percent_variability: ref<number>(95),\n            image_spacing: ref<{x: number, y: number, z: number}>({x: 1, y: 1, z: 1})\n        }\n\n        // Augmentation\n        const augmentationData = {\n            aug_num_samples: ref<number>(300),\n            aug_sampler_type : ref<Sampler>(Sampler.Gaussian),\n        }\n\n        // Training\n        const trainingData = {\n            train_loss_function: ref<LossFunction>(LossFunction.MSE),\n            train_epochs: ref<number>(100),\n            train_learning_rate: ref<number>(0.001),\n            train_batch_size: ref<number>(8),\n            train_decay_learning_rate: ref<boolean>(true),\n            train_fine_tuning: ref<boolean>(true),\n            train_fine_tuning_epochs: ref<number>(100),\n            train_fine_tuning_learning_rate: ref<number>(0.001),\n        }\n\n        // headers are assigned from the parseCSV function's output\n        const dataTables = {\n            aug_table: ref<any>(undefined),\n            aug_headers: ref<any>(undefined),\n            training_table: ref<any>(undefined),\n            training_headers: ref<any>([\n                {text: \"Training Stage\", value: '0'},\n                {text: \"Epoch\", value: '1'},\n                {text: \"LR\", value: '2'},\n                {text: \"Train_Err\", value: '3'},\n                {text: \"Train_Rel_Err\", value: '4'},\n                {text: \"Val_Err\", value: '5'},\n                {text: \"Val_Rel_Err\", value: '6'},\n                {text: \"Sec\", value: '7'},\n            ]),\n            testing_table: ref<any>(undefined),\n            testing_headers: ref<any>([{text: \"Name\", value: '0'}, {text: \"Distance\", value: '1'}]),\n        }\n\n        /**\n         * Converts an object of reactive properties to a plain object for use in api formData fields.\n         */\n        function getFormSection(object: {[key: string]: Ref<any>}) {\n            return (\n                Object.entries(object)\n                    .map(([key, value]) => [key, value.value])\n                    .reduce((obj, [key, value]) => {\n                        obj[key] = value;\n                        return obj;\n                    }, {} as any)\n            )\n        }\n\n        function getFormData() {\n            const prepFormData = getFormSection(prepData);\n            const augFormData = getFormSection(augmentationData);\n            const trainFormData = getFormSection(trainingData);\n\n            return {\n                ...prepFormData,\n                ...augFormData,\n                ...trainFormData,\n                ...groomFormData.value,\n                ...optimizationFormData.value,\n            }\n        }\n\n        function resetForm() {\n            formData.value = formDefaults.value\n            Object.entries(formData.value).forEach(([key, value]) => {\n                if (prepData[key]) prepData[key].value = value\n                if (augmentationData[key]) augmentationData[key].value = value\n                if (trainingData[key]) trainingData[key].value = value\n            })\n        }\n\n        function overwriteFormDefaultsFromProjectFile() {\n            const file_contents = selectedProject.value?.file_contents\n            if (file_contents) {\n                const section = file_contents['deepssm']\n                formDefaults.value = Object.fromEntries(\n                    Object.entries(formDefaults.value).map(([key, value]) => {\n                        if (section[key]) value = section[key]\n                        if (value === \"True\") value = true\n                        else if (value === \"False\") value = false\n                        else if (typeof value === 'string' && !isNaN(parseFloat(value))) value = parseFloat(value)\n                        return [key, value]\n                    })\n                )\n            }\n        }\n\n        async function getCSVDataFromURL(url: string) {\n            return await parseCSVFromURL(url);\n        }\n\n        onMounted(async () => {\n            formDefaults.value = getFormData()\n            overwriteFormDefaultsFromProjectFile()\n            resetForm()\n            if (!deepSSMResult.value && selectedProject.value) {\n                deepSSMLoadingData.value = true;\n                await loadDeepSSMDataForProject();\n                deepSSMLoadingData.value = false;\n            }\n            if (deepSSMResult.value && deepSSMResult.value.result) {\n                try {\n                    Promise.all([\n                        await getCSVDataFromURL(deepSSMResult.value.result.aug_total_data),\n                        await getCSVDataFromURL(deepSSMResult.value.result.training_data_table),\n                        await getCSVDataFromURL(deepSSMResult.value.result.testing_distances),\n                    ]).then((res) => {\n                        // get only the filename rather than the full path\n                        const aug_values = res[0].map((row: any) => {\n                            const newRow = {};\n                            Object.keys(row).forEach((key: string) => {\n                                const value = row[key];\n                                if (typeof value === 'string') {\n                                    newRow[key] = value.split('/').pop();\n                                } else {\n                                    newRow[key] = value;\n                                }\n                            });\n                            return newRow;\n                        });\n\n                        dataTables.aug_table.value = aug_values;\n                        dataTables.training_table.value = res[1];\n                        dataTables.testing_table.value = res[2];\n\n                        // Augmentation data table doesn't have headers, only a numbered list\n                        dataTables.aug_headers.value = Object.keys(dataTables.aug_table.value[0]).map((_: string, index: number) => {\n                            return {text: `${index+1}`, value: `${index}`}\n                        });\n                    });\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }\n        });\n\n        watch(openExpansionPanel, () => {\n            if (openExpansionPanel.value === 1 && deepSSMDataTab.value === -1) {\n                deepSSMDataTab.value = 0;\n            }\n        });\n\n        watch(deepSSMDataTab, () => {\n            deepSSMErrorGlobalRange.value = [0, 1];\n        });\n\n        watch([\n            augmentationData.aug_num_samples,\n            augmentationData.aug_sampler_type,\n            trainingData.train_loss_function,\n            trainingData.train_epochs,\n            trainingData.train_learning_rate,\n            trainingData.train_batch_size,\n            trainingData.train_decay_learning_rate,\n            trainingData.train_fine_tuning,\n            trainingData.train_fine_tuning_epochs,\n            trainingData.train_fine_tuning_learning_rate,\n         ], () => {\n            formData.value = getFormData();\n        })\n\n        return {\n            selectedProject,\n            openExpansionPanel,\n            controlsTabs,\n            prepData,\n            formData,\n            resetForm,\n            augmentationData,\n            trainingData,\n            Sampler,\n            LossFunction,\n            abort,\n            showAbortConfirmation,\n            deepSSMDataTab,\n            deepSSMResult,\n            deepSSMAugDataShown,\n            deepSSMLoadingData,\n            dataTables,\n        }\n    },\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DeepSSMTab.vue?vue&type=template&id=44107574\"\nimport script from \"./DeepSSMTab.vue?vue&type=script&lang=ts\"\nexport * from \"./DeepSSMTab.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DeepSSMTab.vue?vue&type=style&index=0&id=44107574&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport {\n    onMounted, ref,\n    watch, computed, nextTick,\n    onBeforeUnmount,\n} from 'vue';\nimport _ from 'lodash';\nimport imageReader from '../reader/image';\nimport pointsReader from '../reader/points';\nimport { groupBy, shortFileName } from '../helper';\nimport { AugmentationPair, DataObject, DeepSSMImage, ShapeData, TestingData, TrainingPair } from '@/types';\nimport ShapeViewer from '../components/ShapeViewer/viewer.vue';\nimport DataList from '../components/DataList.vue'\nimport RenderControls from '../components/RenderControls.vue'\nimport vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport {\n    renderLoading,\n    selectedDataset,\n    allSubjectsForDataset,\n    selectedDataObjects,\n    loadDataset,\n    particleSize,\n    particlesForOriginalDataObjects,\n    layersShown,\n    groomedShapesForOriginalDataObjects,\n    selectedProject,\n    loadProjectForDataset,\n    reconstructionsForOriginalDataObjects,\n    analysisFilesShown,\n    meanAnalysisParticlesFiles,\n    currentAnalysisParticlesFiles,\n    switchTab,\n    jobAlreadyDone,\n    analysisExpandedTab,\n    allProjectsForDataset,\n    loadProjectsForDataset,\n    getLandmarks,\n    allSetLandmarks,\n    getConstraints,\n    allSetConstraints,\n    landmarksLoading,\n    constraintsLoading,\n    imageViewMode,\n    deepSSMDataTab,\n    deepSSMResult,\n    deepSSMAugDataShown,\n    allDataObjectsInDataset,\n    uniformScale,\n    deepSSMSamplePage,\n    DEEPSSM_SAMPLES_PER_PAGE,\n} from '@/store';\nimport router from '@/router';\nimport TabForm from '@/components/TabForm.vue';\nimport AnalysisTab from '@/components/Analysis/AnalysisTab.vue';\nimport InfoTab from '@/components/InfoTab.vue';\nimport DeepSSMTab from '@/components/DeepSSMTab.vue';\nimport { loadingState } from '../store/index';\n\n\nexport default {\n    components: {\n        ShapeViewer,\n        DataList,\n        InfoTab,\n        RenderControls,\n        TabForm,\n        AnalysisTab,\n        DeepSSMTab,\n    },\n    props: {\n        dataset: {\n            type: Number,\n            required: true,\n        },\n        project: {\n            type: Number,\n            required: true,\n        }\n    },\n    setup(props) {\n        const drawerWidth = ref<number>(600);\n        const drawer = ref();\n        const renderAreaStyle = computed(() => {\n            let width = `calc(100% - ${drawerWidth.value}px)`\n            return {\n                width,\n                position: 'absolute',\n                left: `${drawerWidth.value}px`,\n                top: imageViewMode.value ? '140px' : '70px',\n                height: imageViewMode.value ? 'calc(100% - 140px)' : 'calc(100% - 70px)'\n            }\n        })\n\n        const tab = ref();\n        const rows = ref<number>(1);\n        const cols = ref<number>(1);\n        const renderData = ref<Record<string, ShapeData[]>>({});\n        const renderMetaData = ref<Record<string, ShapeData[]>>({});\n\n        onMounted(async () => {\n            try {\n                await loadDataset(props.dataset);\n                await loadProjectForDataset(props.project);\n            } catch(e) {\n                console.log(e);\n                toSelectPage();\n            }\n            nextTick(() => {\n                window.addEventListener('resize', onResize);\n            })\n        })\n\n        onBeforeUnmount(() => {\n            window.removeEventListener('resize', onResize);\n        })\n\n        function onResize() {\n            refreshRender()\n        }\n\n        async function toSelectPage() {\n            selectedProject.value = undefined;\n            analysisFilesShown.value = undefined;\n            if (allProjectsForDataset.value.length === 0 && selectedDataset.value) {\n                loadProjectsForDataset(selectedDataset.value.id);\n            }\n            router.push('/dataset/'+selectedDataset.value?.id);\n        }\n\n        function prepareDrawer() {\n            if (drawer.value && drawer.value.$el) {\n                let i = drawer.value.$el.querySelector(\n                    \".v-navigation-drawer__border\"\n                );\n                i.style.width = \"10px\";\n                i.style.cursor = \"ew-resize\";\n                i.addEventListener(\n                    \"mousedown\",\n                    function(e: MouseEvent) {\n                        e.preventDefault()\n                        if (e.offsetX < 300) {\n                            drawer.value.$el.style.transition ='initial';\n                            document.addEventListener(\"mousemove\", setDrawerWidth, false);\n                        }\n                    },\n                    false\n                );\n                document.addEventListener(\n                    \"mouseup\",\n                    function() {\n                        if (drawer.value) {\n                            drawer.value.$el.style.transition = '';\n                        }\n                        document.body.style.cursor = \"\";\n                        document.removeEventListener(\"mousemove\", setDrawerWidth, false);\n                    },\n                    false\n                );\n            }\n        }\n\n        function setDrawerWidth(e: MouseEvent) {\n            document.body.style.cursor = \"ew-resize\";\n            drawer.value.$el.style.width =  e.clientX + \"px\";\n            drawerWidth.value = e.clientX\n        }\n\n        async function refreshRender() {\n            // Get landmarks and constraints the first time each layer is enabled,\n            // regardless of whether there are objects to render\n            let landmarksPromise;\n            if(\n                layersShown.value.includes(\"Landmarks\") &&\n                !allSetLandmarks.value\n            ) {\n                landmarksPromise = getLandmarks().then(() => {\n                    landmarksLoading.value = false\n                })\n            }\n\n            let constraintsPromise;\n            if(\n                layersShown.value.includes(\"Constraints\") &&\n                !allSetConstraints.value\n            ) {\n                constraintsPromise = getConstraints().then(() => {\n                    constraintsLoading.value = false\n                })\n            }\n\n            if (selectedDataObjects.value.length == 0) {\n                return Promise.all([\n                    landmarksPromise,\n                    constraintsPromise,\n                ])\n            }\n            renderLoading.value = true\n            imageViewMode.value = false\n            let newRenderData = {}\n            let newRenderMetaData = {}\n            const groupedSelections: Record<string, DataObject[]> = groupBy(selectedDataObjects.value, 'subject')\n            if (\n                analysisFilesShown.value?.length &&\n                currentAnalysisParticlesFiles.value?.length &&\n                meanAnalysisParticlesFiles.value?.length\n            ) {\n                // populate newRenderData and renderMetaData\n                await Promise.all(\n                    analysisFilesShown.value.map(async (f, i) => {\n                        if(meanAnalysisParticlesFiles.value && currentAnalysisParticlesFiles.value){\n                            const key = analysisExpandedTab.value === 0 ? \"PCA\": \"GROUP\"\n                            if (!newRenderData[key]) {\n                                newRenderData[key] = []\n                            }\n                            newRenderData[key].push({\n                                shape: [  // only one layer, no overlapping shapes\n                                    await imageReader(f, shortFileName(f))\n                                ],\n                                points: await pointsReader(currentAnalysisParticlesFiles.value[i])\n                            })\n\n                            if (!newRenderMetaData[key]) {\n                                newRenderMetaData[key] = []\n                            }\n                            const meanParticles = await pointsReader(\n                                meanAnalysisParticlesFiles.value[i]\n                            )\n                            const currParticles = await pointsReader(\n                                currentAnalysisParticlesFiles.value[i]\n                            )\n                            newRenderMetaData[key].push({\n                                \"mean\": {\n                                    shape: await imageReader(undefined),\n                                    points: meanParticles,\n                                },\n                                \"current\": {\n                                    shape: await imageReader(undefined),\n                                    points: currParticles,\n                                }\n                            })\n                        }\n                    })\n                )\n            }\n            else if (tab.value === \"deepssm\" && deepSSMResult.value) {\n                // defaults to subjects selected\n                let labelledGroups: Record<string, any> = groupedSelections;\n                const trainingImages: DeepSSMImage[] = deepSSMResult.value.images\n                const augImages: AugmentationPair[] = deepSSMResult.value.aug_pairs\n\n                switch(deepSSMDataTab.value) {\n                    case 0:  // augmentation\n                        // populate labelledGroups from aug_pairs\n                        // if generated data is shown. Else pass groupedSelections\n                        if (deepSSMAugDataShown.value === 'Generated') {\n                            const paginatedAugPairs = augImages.slice(DEEPSSM_SAMPLES_PER_PAGE * (deepSSMSamplePage.value - 1), DEEPSSM_SAMPLES_PER_PAGE * deepSSMSamplePage.value)\n                            labelledGroups = groupBy(paginatedAugPairs, 'sample_num')\n                        }\n                        else {\n                            labelledGroups = groupedSelections;\n                        }\n                        break;\n                    case 1:  // training\n                        // populate from training_pairs\n                        labelledGroups = deepSSMResult.value.training_pairs.reduce((acc, obj) => {\n                            const key = `${obj.example_type}_${(obj.validation)}`;\n                            if (!acc[key]) {\n                                acc[key] = [];\n                            }\n                            acc[key].push(obj);\n                            return acc;\n                        }, {});\n\n                        // sort labelledGroups where it should go: best true, median true, worst true, best false, median false, worst false\n                        // eslint-disable-next-line\n                        const order = ['best', 'median', 'worst'];\n                        labelledGroups = Object.fromEntries(\n                            Object.entries(labelledGroups).sort(\n                                // eslint-disable-next-line\n                                ([aKey, aVal], [bKey, bVal]) => {\n                                    const a = aKey.split('_');\n                                    const b = bKey.split('_');\n                                    if (a[1] === 'true' && b[1] === 'true') {\n                                        return order.indexOf(a[0]) - order.indexOf(b[0]);\n                                    } else if (a[1] === 'true') {\n                                        return -1;\n                                    } else if (b[1] === 'true') {\n                                        return 1;\n                                    } else {\n                                        return order.indexOf(a[0]) - order.indexOf(b[0]);\n                                    }\n                                }\n                            )\n                        )\n                        break;\n                    case 2:  // testing\n                        labelledGroups = groupBy(deepSSMResult.value.test_pairs, 'image_id')\n                        // filter labelled groups to use only items which have \"image_type\" == world\n                        labelledGroups = Object.fromEntries(\n                            Object.entries(labelledGroups).map(([subjectId, dataObjects]) => {\n                                const filteredDataObjects = dataObjects.filter((obj) => obj.image_type === 'world');\n                                return [subjectId, filteredDataObjects];\n                            })\n                        );\n\n                        break;\n                    default:\n                        break;\n                }\n\n                newRenderData = Object.fromEntries(\n                    await Promise.all(Object.entries(labelledGroups).map(\n                        async ([subjectId, dataObjects]) => {\n                            let label = subjectId;\n                            // prepend \"Generated_Sample_\" to label is dataObjects is AugmentationPair\n                            if ((dataObjects[0] as TrainingPair).example_type) {\n                                label = `${dataObjects[0].example_type} ${dataObjects[0].validation ? 'validation' : 'training'}`;\n                            }\n                            if((dataObjects[0] as AugmentationPair).sample_num) {\n                                label = \"Generated_Sample_\" + subjectId;\n                            }\n                            if(allSubjectsForDataset.value){\n                                const subject = allSubjectsForDataset.value.find(\n                                    (subject) => subject.id.toString() === subjectId\n                                )\n                                if (subject) label = subject.name\n                            }\n                            const shapeDatas = (await Promise.all(dataObjects.map(\n                                (dataObject: DataObject | DeepSSMImage | AugmentationPair | TrainingPair | TestingData) => {\n                                    const shapePromises: Promise<any>[] = [];\n                                    let shapeURL;\n                                    let imageURL;\n                                    let particleURL;\n                                    // Augmentation\n                                    if ('sample_num' in dataObject) {\n                                        const d = dataObject as AugmentationPair\n                                        shapeURL = d.mesh\n                                        imageURL = d.image\n                                        particleURL = d.particles\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`)\n                                        )\n                                    }\n                                    // Training\n                                    else if ('example_type' in dataObject) {\n                                        const d = dataObject as TrainingPair\n                                        shapeURL = d.mesh\n                                        particleURL = d.particles\n\n                                        if (d.index.startsWith('Generated_sample_')) {\n                                            const sample_num = parseInt(d.index.split('_')[2])\n                                            imageURL = augImages.find((i) => i.sample_num === sample_num)?.image\n                                        } else {\n                                            imageURL = trainingImages.find((i) => i.index === d.index)?.image\n                                        }\n\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`, 'DeepSSM')\n                                        )\n                                    }\n                                    // Testing\n                                    else if ('image_id' in dataObject) {\n                                        const d = dataObject as TestingData\n                                        shapeURL = d.mesh\n                                        particleURL = d.particles\n                                        const image_id = d.image_id\n\n                                        // get subject name from allSubjectsForDataset\n                                        const subjectID = allSubjectsForDataset.value.find(\n                                            (subject) => subject.name.toString() === image_id\n                                        )?.id\n\n                                        // get dataObject for subjectID\n                                        const fetchedDataObject = allDataObjectsInDataset.value.find(\n                                            (dataObject) => dataObject.subject === subjectID\n                                        )\n\n                                        const imageURL = fetchedDataObject?.file\n\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`, 'DeepSSM')\n                                        )\n                                    }\n                                    else {\n                                        shapeURL = (dataObject as DataObject).file\n                                        if (\"anatomy_type\" in dataObject) {\n                                            shapePromises.push(\n                                                imageReader(shapeURL, `${label}.vtk`, 'Original')\n                                            )\n                                        } else {\n                                            shapePromises.push(\n                                                imageReader(shapeURL, `${label}.nrrd`, 'Original')\n                                            )\n                                        }\n                                    }\n\n                                    return Promise.all([\n                                        Promise.all(shapePromises),\n                                        pointsReader(particleURL),\n                                    ])\n                                }\n                            )))\n                            .map((e: any) => ({\n                                shape: e[0],\n                                points: e[1],\n                            }))\n                            return [\n                                label, shapeDatas\n                            ]\n                        }\n                    )\n                ))\n            } else {\n                newRenderData = Object.fromEntries(\n                    await Promise.all(Object.entries(groupedSelections).map(\n                        async ([subjectId, dataObjects]) => {\n                            let subjectName = subjectId;\n                            if(allSubjectsForDataset.value){\n                                const subject = allSubjectsForDataset.value.find(\n                                    (subject) => subject.id.toString() === subjectId\n                                )\n                                if (subject) subjectName = subject.name\n                            }\n                            const shapeDatas = (await Promise.all(dataObjects.map(\n                                (dataObject) => {\n                                    const shapePromises: Promise<vtkPolyData | vtkImageData>[] = [];\n                                    if(layersShown.value.includes(\"Original\")){\n                                      shapePromises.push(\n                                        imageReader(\n                                            dataObject.file,\n                                            shortFileName(dataObject.file),\n                                            \"Original\",\n                                            dataObject.anatomy_type && { domain: dataObject.anatomy_type.replace('anatomy_', '') }\n                                        )\n                                      )\n                                    }\n                                    if(layersShown.value.includes(\"Groomed\")){\n                                        if (\n                                            groomedShapesForOriginalDataObjects.value[dataObject.type] &&\n                                            groomedShapesForOriginalDataObjects.value[dataObject.type][dataObject.id]\n                                        ) {\n                                            const shapeURL = groomedShapesForOriginalDataObjects.value[\n                                                dataObject.type\n                                            ][dataObject.id]?.file\n                                            if(shapeURL) {\n                                                shapePromises.push(\n                                                    imageReader(\n                                                        shapeURL,\n                                                        shortFileName(shapeURL),\n                                                        \"Groomed\",\n                                                        { domain: dataObject.anatomy_type.replace('anatomy_', '') }\n                                                    )\n                                                )\n                                            }\n                                        }\n                                    }\n                                    if(layersShown.value.includes(\"Reconstructed\")){\n                                        const targetReconstruction = reconstructionsForOriginalDataObjects.value.find(\n                                            (reconstructed) => {\n                                                const particles = reconstructed.particles\n                                                let originalId;\n                                                if(dataObject.type === 'mesh'){\n                                                    originalId = particles.groomed_mesh.mesh\n                                                } else if (dataObject.type === 'segmentation'){\n                                                    originalId = particles.groomed_segmentation.segmentation\n                                                }\n                                                return originalId === dataObject.id\n                                            }\n                                        )\n                                        if (targetReconstruction) {\n                                            const shapeURL = targetReconstruction.file\n                                            shapePromises.push(\n                                                imageReader(\n                                                    shapeURL,\n                                                    shortFileName(shapeURL),\n                                                    \"Reconstructed\",\n                                                    { domain: targetReconstruction.anatomy_type.replace('anatomy_', '') }\n                                                )\n                                            )\n                                        }\n                                    }\n\n                                    let particleURL;\n                                    if(layersShown.value.includes(\"Particles\")){\n                                        particleURL = particlesForOriginalDataObjects.value[dataObject.type][dataObject.id]?.local\n                                    }\n\n                                    return Promise.all([\n                                        Promise.all(shapePromises),\n                                        pointsReader(particleURL),\n                                        landmarksPromise,\n                                        constraintsPromise,\n                                    ])\n                                }\n                            )))\n                            .map(([imageData, particleData, landmarkData, constraintData]) => ({\n                                shape: imageData,\n                                points: particleData,\n                                landmarks: landmarkData,\n                                constraints: constraintData\n                            }))\n                            return [\n                                subjectName, shapeDatas\n                            ]\n                        }\n                    )\n                ))\n            }\n\n            const n = Object.keys(newRenderData).length;\n            const sqrt = Math.ceil(Math.sqrt(n));\n            const numGroups = Math.min(sqrt, 5)\n            const renderAreaWidth = window.innerWidth - drawerWidth.value\n            const renderAreaHeight = window.innerHeight - 120\n            const renderAreaRatio = renderAreaWidth / renderAreaHeight\n            if (renderAreaRatio > 1) {\n                rows.value = Math.ceil(n / numGroups);\n                cols.value = numGroups;\n            } else {\n                cols.value = Math.ceil(n / numGroups);\n                rows.value = numGroups;\n            }\n            renderData.value = newRenderData\n            renderMetaData.value = newRenderMetaData\n        }\n\n        const debouncedRefreshRender = _.debounce(refreshRender, 300)\n\n        watch(drawer, prepareDrawer)\n        watch(selectedDataObjects, debouncedRefreshRender)\n        watch(layersShown, debouncedRefreshRender)\n        watch(analysisFilesShown, debouncedRefreshRender, {deep: true})\n        watch(meanAnalysisParticlesFiles, debouncedRefreshRender, {deep: true})\n        watch(deepSSMDataTab, debouncedRefreshRender)\n        watch(deepSSMAugDataShown, debouncedRefreshRender)\n        watch(uniformScale, debouncedRefreshRender)\n        watch(deepSSMSamplePage, debouncedRefreshRender)\n        watch(tab, switchTab)\n\n        return {\n            loadingState,\n            renderLoading,\n            drawer,\n            drawerWidth,\n            setDrawerWidth,\n            renderAreaStyle,\n            tab,\n            rows,\n            cols,\n            renderData,\n            renderMetaData,\n            selectedDataset,\n            selectedProject,\n            selectedDataObjects,\n            toSelectPage,\n            refreshRender,\n            jobAlreadyDone,\n            particleSize,\n            analysisFilesShown,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=e0088110\"\nimport script from \"./Main.vue?vue&type=script&lang=ts\"\nexport * from \"./Main.vue?vue&type=script&lang=ts\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=e0088110&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.selectedDataset)?_c('div',{staticClass:\"flex-container pa-5\"},[_c('div',{staticStyle:{\"width\":\"100%\"}},[_c('v-icon',{on:{\"click\":_vm.back}},[_vm._v(\" mdi-arrow-left \")]),_vm._v(\" \"+_vm._s(_vm.selectedDataset.name)+\" \")],1),((_vm.allProjectsForDataset === undefined || _vm.allProjectsForDataset.length === 0) && !_vm.loadingState)?_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-title',[_vm._v(\"No projects.\")])],1):_vm._e(),_vm._l((_vm.allProjectsForDataset),function(project){return _c('div',{key:'project_'+project.id,on:{\"click\":() => _vm.selectOrDeselectProject(project)}},[(_vm.editingProject === project)?_c('project-form',{attrs:{\"editMode\":\"\"},on:{\"cancel\":() => _vm.editingProject = undefined}}):_c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.selectedProject || _vm.selectedProject == project),expression:\"!selectedProject || selectedProject == project\"}],class:project.thumbnail? 'selectable-card with-thumbnail': 'selectable-card',attrs:{\"width\":_vm.selectedProject == project ? '100%' :''}},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" PROJECT (\"+_vm._s(project.created ? project.created.split('T')[0] : 'No creation time')+\") FOR DATASET \"+_vm._s(_vm.selectedDataset.id)+\" \"),(project.readonly)?_c('span',{staticClass:\"blue--text\"},[_vm._v(\" (READ ONLY) \")]):_vm._e(),(project.private)?_c('span',{staticClass:\"red--text\"},[_vm._v(\" (PRIVATE) \")]):_vm._e()]),_c('div',{staticClass:\"card-contents\"},[_c('div',[_c('v-list-item-title',{staticClass:\"text-h5 mb-1\"},[_vm._v(\" \"+_vm._s(project.name)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(project.description)+\" \")]),(project.keywords)?_c('v-list-item-subtitle',_vm._l((project.keywords.split(',')),function(keyword){return _c('v-chip',{key:keyword,attrs:{\"small\":\"\"}},[_c('i',[_vm._v(_vm._s(keyword))])])}),1):_vm._e()],1),(project.thumbnail)?_c('div',[_c('v-img',{attrs:{\"src\":project.thumbnail,\"width\":\"100\"}})],1):_vm._e()]),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{staticStyle:{\"width\":\"40%\",\"margin-left\":\"8px\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.cloneProj(project)).apply(null, arguments)}}},[_vm._v(\" Clone \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.editingProject = project}}},[_vm._v(\" Edit \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectOrDeselectProject(project)).apply(null, arguments)}}},[_vm._v(\" Select \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"color\":\"red\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleting = project}}},[_vm._v(\" Delete \")])],1)],1)],1)}),_c('v-dialog',{attrs:{\"value\":_vm.deleting,\"width\":\"500\"}},[(_vm.deleting)?_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to delete project \\\"\"+_vm._s(_vm.deleting.name)+\"\\\"? \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleting = undefined}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"red\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteProj.apply(null, arguments)}}},[_vm._v(\" Delete \")])],1)],1):_vm._e()],1)],2):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.creating && !_vm.editMode)?_c('v-btn',{staticClass:\"new-button\",on:{\"click\":function($event){$event.stopPropagation();_vm.creating = true}}},[_vm._v(\" + New Project \")]):_c('v-card',{staticClass:\"selectable-card\",on:{\"click\":function($event){$event.stopPropagation();}}},[(!_vm.editMode)?_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" NEW PROJECT FOR DATASET \"+_vm._s(_vm.selectedDataset.id)+\" \")]):_vm._e(),_c('form',{attrs:{\"submit\":_vm.submit}},[_c('v-text-field',{staticClass:\"text-h5 mb-1\",attrs:{\"autofocus\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('v-text-field',{attrs:{\"label\":\"Keywords\"},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}}),_c('v-checkbox',{attrs:{\"dense\":\"\",\"label\":\"Make this project read only\"},model:{value:(_vm.readonly),callback:function ($$v) {_vm.readonly=$$v},expression:\"readonly\"}}),(_vm.creating)?_c('v-checkbox',{attrs:{\"dense\":\"\",\"label\":\"Make this project private\"},model:{value:(_vm.privated),callback:function ($$v) {_vm.privated=$$v},expression:\"privated\"}}):_vm._e(),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.submit.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s((_vm.editMode) ? \"Save\" : \"Create\")+\" \")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancel.apply(null, arguments)}}},[_vm._v(\" Cancel \")])],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { ref } from 'vue';\nimport { createProject, editProject } from '../api/rest'\nimport {\n    selectedDataset,\n    loadingState,\n    editingProject,\n    loadProjectsForDataset,\n} from '@/store';\n\nexport default {\n  props: {\n    editMode: {\n        type: Boolean,\n        default: false\n    },\n  },\n  setup(props, { emit }) {\n    const creating = ref(false)\n    const name = ref('My Project')\n    const description = ref('')\n    const keywords = ref('')\n    const privated = ref(false);\n    const readonly = ref(false);\n\n    function reset() {\n        creating.value = false\n        description.value = ''\n        keywords.value = ''\n    }\n\n    function cancel() {\n        if(props.editMode) {\n            emit('cancel')\n        } else {\n            creating.value = false\n        }\n    }\n\n    function submit(e) {\n        e.preventDefault()\n        loadingState.value = true\n\n        const formData = {\n            name: name.value,\n            private: privated.value,\n            dataset: selectedDataset.value.id,\n            description: description.value,\n            keywords: keywords.value,\n            readonly: readonly.value,\n        };\n\n        let submitFunction = async () => {\n           return await createProject(formData);\n        }\n\n        if (props.editMode) {\n            submitFunction = async () => {\n                return await editProject(editingProject.value.id, formData);\n            }\n        }\n\n        submitFunction().then(async (response) => {\n            if(response.status === 201){\n                loadProjectsForDataset(selectedDataset.value.id);\n            } else if (response.status === 200) {\n                loadProjectsForDataset(selectedDataset.value.id);\n                editingProject.value = undefined;\n            }\n\n            loadingState.value = false\n            reset()\n        }).catch((error) => {\n            console.log(error)\n            loadingState.value = false\n        })\n    }\n\n    if (props.editMode) {\n        name.value = editingProject.value.name;\n        description.value = editingProject.value.description;\n        keywords.value = editingProject.value.keywords;\n        privated.value = editingProject.value.private;\n        readonly.value = editingProject.value.readonly;\n    }\n\n    return {\n        creating,\n        name,\n        selectedDataset,\n        loadingState,\n        description,\n        keywords,\n        privated,\n        readonly,\n        editingProject,\n        cancel,\n        submit,\n    }\n  }\n}\n</script>\n\n<template>\n    <div>\n    <v-btn\n        v-if=\"!creating && !editMode\"\n        class=\"new-button\"\n        @click.stop=\"creating = true\"\n    >\n        + New Project\n    </v-btn>\n    <v-card\n        v-else\n        class=\"selectable-card\"\n        @click.stop\n    >\n        <div v-if=\"!editMode\" class=\"text-overline mb-4\">\n            NEW PROJECT FOR DATASET {{selectedDataset.id}}\n        </div>\n\n        <form :submit=\"submit\">\n            <v-text-field autofocus v-model=\"name\" class=\"text-h5 mb-1\"/>\n            <v-text-field label=\"Description\" v-model=\"description\" />\n            <v-text-field label=\"Keywords\" v-model=\"keywords\" />\n            <v-checkbox dense label=\"Make this project read only\" v-model=\"readonly\" />\n            <v-checkbox  dense v-if=\"creating\" label=\"Make this project private\" v-model=\"privated\" />\n            <v-card-actions class=\"action-buttons\">\n                <v-btn\n                    outlined\n                    rounded\n                    text\n                    type=\"submit\"\n                    @click.stop=\"submit\"\n                >\n                    {{ (editMode) ? \"Save\" : \"Create\" }}\n                </v-btn>\n                <v-btn\n                    outlined\n                    rounded\n                    text\n                    @click.stop=\"cancel\"\n                >\n                    Cancel\n                </v-btn>\n            </v-card-actions>\n        </form>\n    </v-card>\n    </div>\n</template>\n\n<style scoped>\n.new-button {\n    height: 100%!important;\n    width: 150px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProjectForm.vue?vue&type=template&id=6c4072e7&scoped=true\"\nimport script from \"./ProjectForm.vue?vue&type=script&lang=js\"\nexport * from \"./ProjectForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProjectForm.vue?vue&type=style&index=0&id=6c4072e7&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c4072e7\",\n  null\n  \n)\n\nexport default component.exports","\nimport { onMounted, ref, watch } from 'vue';\nimport { cloneProject, deleteProject } from '@/api/rest'\nimport {\n    selectedDataset,\n    loadingState,\n    allProjectsForDataset,\n    selectedProject,\n    editingProject,\n    selectProject,\n    selectedDataObjects,\n    getAllDatasets,\n    loadDataset,\n    loadProjectsForDataset,\n} from '@/store';\nimport ProjectForm from '@/components/ProjectForm.vue';\nimport { Project } from '@/types';\nimport router from '@/router';\n\nexport default {\n    components: { ProjectForm },\n    props: {\n        dataset: {\n            type: Number,\n            required: true\n        },\n        searchText: {\n            type: String,\n            required: false\n        }\n    },\n    setup(props) {\n        const deleting = ref();\n\n        async function selectOrDeselectProject (project: Project) {\n            if(!selectedProject.value){\n                selectProject(project.id);\n                router.push(`/dataset/${props.dataset}/project/${project.id}`);\n            } else {\n                selectedProject.value = undefined;\n                selectedDataObjects.value = [];\n                await getAllDatasets();\n            }\n        }\n\n        function cloneProj(project: Project) {\n            loadingState.value = true\n            cloneProject(project.id)\n            .then(() => {\n                loadProjectsForDataset(props.dataset);\n                loadingState.value = false;\n            })\n        }\n\n        function deleteProj() {\n            loadingState.value = true\n            deleteProject(deleting.value.id).then(\n                () => {\n                    deleting.value = undefined\n                    loadProjectsForDataset(props.dataset);\n                    if(selectedDataset.value){\n                        selectedProject.value = undefined;\n                    }\n                    loadingState.value = false\n                }\n            )\n        }\n\n        function back() {\n            selectedDataset.value = undefined;\n            router.push(\"/\");\n        }\n\n        function updateSelectedDataset() {\n            if (selectedDataset.value === undefined\n            || selectedDataset.value.id !== props.dataset\n            ) {\n                loadDataset(props.dataset);\n                loadProjectsForDataset(props.dataset);\n            }\n        }\n\n        onMounted(updateSelectedDataset);\n\n        watch(() => props.dataset, updateSelectedDataset);\n        watch(() => props.searchText, () => loadProjectsForDataset(props.dataset));\n\n\n        return {\n            selectedDataset,\n            allProjectsForDataset,\n            selectedProject,\n            selectOrDeselectProject,\n            cloneProj,\n            deleting,\n            deleteProj,\n            editingProject,\n            selectProject,\n            back,\n            loadingState,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSelect.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSelect.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ProjectSelect.vue?vue&type=template&id=64ede53f\"\nimport script from \"./ProjectSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ProjectSelect.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.selectedDataset)?_c('div',{staticClass:\"flex-container pa-5\",style:(_vm.selectingSubsetOf ? 'width: calc(100% - 500px)' : '')},[(_vm.allDatasets.length === 0 && !_vm.loadingState)?_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-title',[_vm._v(\"No datasets.\")])],1):_vm._e(),_vm._l((_vm.allDatasets),function(dataset){return _c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.selectedDataset || _vm.selectedDataset == dataset),expression:\"!selectedDataset || selectedDataset == dataset\"}],key:'dataset_'+dataset.id,class:dataset.thumbnail? 'selectable-card with-thumbnail': 'selectable-card',attrs:{\"width\":_vm.selectedDataset == dataset ? '100%' :''},on:{\"click\":() => _vm.selectOrDeselectDataset(dataset)}},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" DATASET (\"+_vm._s(dataset.created ? dataset.created.split('T')[0] : 'No creation time')+\") \"),(dataset.private)?_c('span',{staticClass:\"red--text\"},[_vm._v(\" (PRIVATE) \")]):_vm._e()]),_c('div',{staticClass:\"card-contents\"},[_c('div',[_c('v-list-item-title',{staticClass:\"text-h5 mb-1\"},[_vm._v(\" \"+_vm._s(dataset.name)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(dataset.description)+\" \")]),_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(dataset.summary)+\" \")]),(dataset.keywords)?_c('v-list-item-subtitle',_vm._l((dataset.keywords.split(',')),function(keyword){return _c('v-chip',{key:keyword,attrs:{\"small\":\"\"}},[_c('i',[_vm._v(_vm._s(keyword))])])}),1):_vm._e()],1),(dataset.thumbnail)?_c('div',[_c('v-img',{attrs:{\"src\":dataset.thumbnail,\"width\":\"100\"}})],1):_vm._e()]),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectOrDeselectDataset(dataset)).apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.selectedDataset ?'Deselect' :'Select')+\" \")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectingSubsetOf = dataset).apply(null, arguments)}}},[_vm._v(\" Create subset \")])],1)],1)})],2):_vm._e(),_c('v-navigation-drawer',{attrs:{\"right\":\"\",\"absolute\":\"\",\"width\":\"500px\",\"value\":_vm.selectingSubsetOf !== undefined && !_vm.selectedDataset}},[_c('v-btn',{staticClass:\"pa-3 pt-8\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.selectingSubsetOf = undefined}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),(_vm.selectingSubsetOf)?_c('subset-selection',{attrs:{\"targetDataset\":_vm.selectingSubsetOf},on:{\"close\":function($event){_vm.selectingSubsetOf = undefined}}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"px-3 pt-10\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticClass:\"submitButton\"},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" CREATE NEW DATASET FROM SUBSET OF \"+_vm._s(_vm.targetDataset.name)+\" \")]),_c('v-btn',{staticClass:\"mt-3\",attrs:{\"color\":\"primary\",\"disabled\":_vm.name === '' || _vm.selectedDataObjects.length === 0},on:{\"click\":_vm.submitForm}},[_vm._v(\" Create subset \")])],1),_c('br'),_c('v-text-field',{attrs:{\"autofocus\":\"\",\"label\":\"Subset name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('v-text-field',{attrs:{\"label\":\"Keywords\"},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}}),_vm._v(\" Select anatomies and subjects from \"+_vm._s(_vm.targetDataset.name)+\" to include in new dataset: \"),_c('data-list',{attrs:{\"autoSelectAll\":\"\",\"dataset\":_vm.targetDataset.id}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { DataObject, Dataset } from '@/types'\nimport { ref } from 'vue'\nimport DataList from './DataList.vue'\nimport { selectedDataObjects, allDatasets } from '@/store';\nimport { subsetDataset } from '@/api/rest';\n\n\nexport default {\n    components: {\n        DataList\n    },\n    props: {\n        targetDataset: {\n            type: Object as () => Dataset,\n            required: true,\n        },\n    },\n    setup(props, context) {\n        const name = ref('')\n        const description = ref('')\n        const keywords = ref('')\n\n        async function submitForm() {\n            const selected = selectedDataObjects.value.map(\n                (dataObject: DataObject) => ({\n                    id: dataObject.id,\n                    subject: dataObject.subject,\n                    type: dataObject.type,\n                })\n            )\n            const newDataset = await subsetDataset(\n                props.targetDataset.id,\n                {\n                    name: name.value,\n                    description: description.value,\n                    keywords: keywords.value,\n                    selected,\n                }\n            )\n            if(newDataset){\n                allDatasets.value.push(newDataset)\n                context.emit('close')\n            }\n        }\n\n        return {\n            name,\n            description,\n            keywords,\n            submitForm,\n            selectedDataObjects,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./SubsetSelection.vue?vue&type=template&id=2a5819ca\"\nimport script from \"./SubsetSelection.vue?vue&type=script&lang=ts\"\nexport * from \"./SubsetSelection.vue?vue&type=script&lang=ts\"\nimport style0 from \"./SubsetSelection.vue?vue&type=style&index=0&id=2a5819ca&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { onMounted, ref, watch } from 'vue';\nimport {\n    allDatasets,\n    selectedDataset,\n    loadingState,\n    selectedDataObjects,\n    loadProjectsForDataset,\n    getAllDatasets,\n} from '@/store';\nimport { Dataset } from '@/types';\nimport SubsetSelection from '@/components/SubsetSelection.vue';\nimport router from '@/router';\n\nexport default {\n  components: { SubsetSelection },\n  props: {\n    searchText: {\n        type: String,\n        required: false\n    }\n  },\n    setup(props) {\n        const selectingSubsetOf = ref();\n        selectedDataset.value = undefined;\n\n        async function selectOrDeselectDataset (dataset: Dataset | undefined) {\n            if(!selectedDataset.value && dataset) {\n                selectedDataset.value = dataset;\n\n                router.push(\"/dataset/\"+dataset.id);\n                loadProjectsForDataset(dataset.id);\n            } else {\n                selectedDataset.value = undefined;\n                selectedDataObjects.value = [];\n                await getAllDatasets();\n            }\n        }\n\n        onMounted(async () => {\n            await getAllDatasets();\n            if(selectedDataset.value){\n                const datasetId = selectedDataset.value.id;\n                // reset selectedDataset to maintain updates from latest fetch of all datasets\n                selectedDataset.value = allDatasets.value.find(\n                    (d) => d.id == datasetId\n                )\n            }\n        })\n\n        watch(() => props, () => {\n            getAllDatasets();\n            selectedDataset.value = undefined;\n        }, {deep:true});\n\n        return {\n            allDatasets,\n            selectedDataset,\n            selectOrDeselectDataset,\n            selectingSubsetOf,\n            loadingState,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DatasetSelect.vue?vue&type=template&id=514b7fe8\"\nimport script from \"./DatasetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./DatasetSelect.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DatasetSelect.vue?vue&type=style&index=0&id=514b7fe8&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter, { Route, RouteConfig } from 'vue-router'\nimport Main from './views/Main.vue'\nimport ProjectSelect from './views/ProjectSelect.vue'\nimport DatasetSelect from './views/DatasetSelect.vue'\n\n\nVue.use(VueRouter)\n\nconst castDatasetAndSubjectProps = (route: Route) => ({\n    dataset: (route.params.dataset) ? parseInt(route.params.dataset): undefined,\n    project: (route.params.project) ? parseInt(route.params.project): undefined,\n    searchText: route.params.searchText,\n  });\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: '/dataset/:dataset/project/:project',\n    name: 'main',\n    props: castDatasetAndSubjectProps,\n    component: Main\n  },\n  {\n    path: '/dataset/:dataset/search/:searchText',\n    name: 'project-search',\n    props: castDatasetAndSubjectProps,\n    component: ProjectSelect,\n  },\n  {\n    path: '/search/:searchText',\n    name: 'dataset-search',\n    props: castDatasetAndSubjectProps,\n    component: DatasetSelect,\n  },\n  {\n    path: '/dataset/:dataset',\n    name: 'project-select',\n    props: castDatasetAndSubjectProps,\n    component: ProjectSelect\n  },\n  {\n    path: '/',\n    name: 'dataset-select',\n    props: castDatasetAndSubjectProps,\n    component: DatasetSelect,\n  },\n  {\n    path: '*',\n    redirect: '/',\n  },\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=style&index=0&id=2d1be46d&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=style&index=0&id=283c19b6&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=e0088110&prod&lang=css\"","import vtkXMLPolyDataReader from 'vtk.js/Sources/IO/XML/XMLPolyDataReader';\n\nexport default async function (url: string) {\n    const reader = vtkXMLPolyDataReader.newInstance();\n    await reader.setUrl(url, { binary: true });\n    const data = reader.getOutputData();\n    data.getPointData().setActiveScalars('does-not-exist');\n    return data;\n}\n","import vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkPLYReader from 'vtk.js/Sources/IO/Geometry/PLYReader';\nimport vtkSTLReader from 'vtk.js/Sources/IO/Geometry/STLReader';\nimport vtkPolyDataReader from 'vtk.js/Sources/IO/Legacy/PolyDataReader';\nimport vtkStringArray from 'vtk.js/Sources/Common/Core/StringArray'\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\nimport readImageArrayBuffer from 'itk/readImageArrayBuffer';\nimport ITKHelper from 'vtk.js/Sources/Common/DataModel/ITKHelper';\nimport axios from 'axios';\nimport shapeReader from './shape'\n\n\nimport { vtkShapesByType, deepSSMErrorGlobalRange } from '@/store';\n\nconst { convertItkToVtkImage } = ITKHelper;\n\n\nasync function readDeepSSMScalars(url: string | undefined) {\n    if(!url) return vtkDataArray.newInstance({\n        name: 'deepssm_error'\n    })\n\n    const reader = vtkPolyDataReader.newInstance();\n    await reader.setUrl(url);\n    const data = reader.getOutputData();\n\n    const content = (await axios.get(url)).data;\n    const values: number[] = []\n    content.split('\\r\\n\\r').forEach((section) => {\n        if (section.includes('deepssm_error')) {\n            const [header, data] = section.split('deepssm_error')\n            const line_values = data.slice(1).split('\\r\\n').map((line) => {\n                return line.split(' ').map((v) => parseFloat(v)).filter((v) => v)\n            }).pop()\n            if (line_values) {\n                values.push(...line_values)\n            }\n        }\n    })\n    const dataRange = [\n        Math.min(...values),\n        Math.max(...values),\n    ]\n    deepSSMErrorGlobalRange.value = [\n        Math.min(deepSSMErrorGlobalRange.value[0], dataRange[0]),\n        Math.max(deepSSMErrorGlobalRange.value[1], dataRange[1]),\n    ]\n\n    const arr = vtkDataArray.newInstance({\n        name: 'deepssm_error',\n        values\n    })\n    return arr \n}\n\n\nexport default async function (\n    url: string | undefined, filename='', type=\"Original\", metadata={},\n): Promise<vtkImageData | vtkPolyData> {\n    let shape: vtkImageData | vtkPolyData = vtkPolyData.newInstance()\n    if(!url) return shape\n\n    const arrayBuffer = (await axios.get(url, {\n        responseType: 'arraybuffer'\n    })).data;\n\n    if(filename.toLowerCase().endsWith('ply')){\n        const reader = vtkPLYReader.newInstance();\n        await reader.parseAsArrayBuffer(arrayBuffer)\n        shape =  reader.getOutputData();\n    } else if (\n        filename.toLowerCase().endsWith('nrrd') ||\n        filename.toLowerCase().endsWith('nii') ||\n        filename.toLowerCase().endsWith('nii.gz')\n    ) {\n        const { image } = await readImageArrayBuffer(null, arrayBuffer, filename)\n        shape = convertItkToVtkImage(image)\n    } else if (filename.toLowerCase().endsWith('vtp')) {\n        shape = await shapeReader(url)\n    } else if (filename.toLowerCase().endsWith('vtk')) {\n        const reader = vtkPolyDataReader.newInstance();\n        await reader.setUrl(url)\n        shape = reader.getOutputData();\n    } else if (filename.toLowerCase().endsWith('stl')) {\n        const reader = vtkSTLReader.newInstance();\n        await reader.parseAsArrayBuffer(arrayBuffer)\n        shape =  reader.getOutputData();\n    } else {\n        console.log('Unknown file type for', filename)\n        shape = vtkPolyData.newInstance()\n    }\n\n    // Add metadata to field data\n    const fieldData = shape.getFieldData()\n    Object.entries(metadata).forEach(([key, value]) => {\n        // @ts-ignore\n        const str: string = value.toString()\n        const arr = vtkStringArray.newInstance({\n            name: key,\n            size: 1,\n        })\n        arr.setData([str], 1)\n        // @ts-ignore\n        fieldData.addArray(arr)\n    })\n    if (type === 'DeepSSM') {\n        const arr = await readDeepSSMScalars(url)\n        shape.getPointData().addArray(arr)\n    }\n\n    vtkShapesByType.value[type].push(shape)\n    return shape\n  }\n","import axios from 'axios';\nimport OauthClient from '@girder/oauth-client';\nimport { currentError } from '@/store';\nimport router from '@/router';\n\n\nexport const apiClient = axios.create({\n  baseURL: `${process.env.VUE_APP_API_ROOT}api/v1/`,\n});\nexport const oauthClient = new OauthClient(\n  process.env.VUE_APP_OAUTH_API_ROOT,\n  process.env.VUE_APP_OAUTH_CLIENT_ID,\n);\n\nexport async function restoreLogin() {\n  if (!oauthClient) {\n    return;\n  }\n  await oauthClient.maybeRestoreLogin();\n}\n\napiClient.interceptors.request.use((config) => ({\n  ...config,\n  headers: {\n    ...oauthClient?.authHeaders,\n    ...config.headers,\n  },\n}));\n\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if(error.response?.status === 500) {\n      currentError.value = 'Server error; see server logs for details.'\n    } else if(error.response?.status === 404) {\n      currentError.value = 'Not found.'\n    } else if (error.response) {\n      currentError.value = error.response?.data;\n    } else {\n      currentError.value = 'An error occurred.'\n    }\n    return { data: undefined }\n  }\n)\n\nexport const logout = async () => {\n  try {\n    await apiClient.post('/logout/', null, { withCredentials: true });\n  } finally {\n    await oauthClient.logout();\n    router.push('/')\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=0445ecb9&prod&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=style&index=0&id=3ba8df00&prod&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pa-3\"},[(_vm.taskData)?_c('div',[(_vm.taskData.message && !_vm.taskData.error)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.taskData.message))]):_vm._e(),(_vm.taskData.error)?_c('div',{staticClass:\"red--text\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Error: \"+_vm._s(_vm.taskData.error))]):_c('v-progress-linear',{attrs:{\"value\":_vm.taskData.percent_complete}}),(!_vm.taskData.abort)?_c('div',{staticClass:\"d-flex pa-3\",staticStyle:{\"width\":\"100%\",\"justify-content\":\"space-around\"}},[_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":() => _vm.showAbortConfirmation = true}},[_vm._v(\" Abort \")])],1):_vm._e(),_c('br')],1):_vm._e(),_c('div',{staticStyle:{\"display\":\"flex\",\"width\":\"100%\",\"justify-content\":\"space-between\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.resetDisabled},on:{\"click\":_vm.resetForm}},[_vm._v(\" Reset form \")]),_c('v-btn',{staticStyle:{\"float\":\"right\"},attrs:{\"color\":\"primary\",\"disabled\":_vm.submitDisabled},on:{\"click\":_vm.submitForm}},[_vm._v(\" \"+_vm._s(_vm.alreadyDone ? 'Rerun': 'Run')+\" \"+_vm._s(_vm.props.taskName)+\" \")])],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showSubmissionConfirmation),callback:function ($$v) {_vm.showSubmissionConfirmation=$$v},expression:\"showSubmissionConfirmation\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to re-run the \"+_vm._s(_vm.props.taskName)+\" job? The previous results will be overwritten. \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":() => {_vm.showSubmissionConfirmation = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":() => {_vm.showSubmissionConfirmation = false, _vm.submitForm(undefined, true)}}},[_vm._v(\" Yes, Rerun \")])],1)],1)],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showAbortConfirmation),callback:function ($$v) {_vm.showAbortConfirmation=$$v},expression:\"showAbortConfirmation\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to abort this task? This will cancel any related tasks in this project. \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":() => {_vm.showAbortConfirmation = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":() => {_vm.showAbortConfirmation = false, _vm.abort(_vm.taskData)}}},[_vm._v(\" Abort \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { computed, ref, watch } from 'vue';\nimport {\n    selectedProject,\n    currentTasks,\n    jobAlreadyDone,\n    fetchJobResults,\n    spawnJob,\n    abort,\n} from '@/store';\n\nexport default {\n  props: {\n    taskName: {\n        type: String,\n        required: true\n    },\n    formData: {\n        type: Object,\n        required: false,\n    },\n    formDefaults: {\n        type: Object,\n        required: false,\n    },\n    disabled: {\n        type: Boolean,\n        required: false,\n    },\n  },\n  setup(props, { emit }) {\n    const showSubmissionConfirmation = ref(false);\n    const showAbortConfirmation = ref(false);\n    const alreadyDone = ref(jobAlreadyDone(props.taskName))\n\n    const taskData = computed(\n        () => {\n            if(!selectedProject.value?.id ||\n            !currentTasks.value[selectedProject.value.id]) return undefined\n            return currentTasks.value[selectedProject.value.id][props.taskName]\n        }\n    )\n\n    watch(taskData, async (value, oldValue) => {\n        if (value === undefined && oldValue !== undefined) {\n            await fetchJobResults(props.taskName)\n            alreadyDone.value = jobAlreadyDone(props.taskName)\n        }\n    })\n\n    const submitDisabled = computed(() => props.disabled ? props.disabled : !!taskData.value)\n\n    const resetDisabled = computed(() => !!props.disabled)\n\n    function resetForm() {\n        emit('resetForm')\n    }\n\n    async function submitForm(_: Event | undefined, confirmed=false){\n        if (!selectedProject.value) return\n        if(alreadyDone.value && !confirmed){\n            showSubmissionConfirmation.value = true\n            return\n        }\n        await spawnJob(props.taskName, props.formData || {})\n    }\n\n    return {\n        props,\n        alreadyDone,\n        showSubmissionConfirmation,\n        showAbortConfirmation,\n        submitDisabled,\n        taskData,\n        resetForm,\n        submitForm,\n        abort,\n        resetDisabled,\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TaskInfo.vue?vue&type=template&id=692056fc&scoped=true\"\nimport script from \"./TaskInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./TaskInfo.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TaskInfo.vue?vue&type=style&index=0&id=692056fc&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"692056fc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=style&index=0&id=5bc3af8a&prod&lang=css\"","import { AnalysisParams, DataObject, Dataset, LandmarkInfo, Project, Subject, Task } from \"@/types\";\nimport { apiClient } from \"./auth\";\nimport { loadGroomedShapeForObject, loadParticlesForObject } from \"@/store\";\n\n\nexport async function getDatasets(search: string | undefined): Promise<Dataset[]>{\n    const results: Dataset[] = []\n    let page = 1\n    let response = (await apiClient.get('/datasets', {\n        params: { page, search }\n    })).data\n    results.push(...response.results)\n    while(response.next){\n        page += 1\n        response = (await apiClient.get('/datasets', {\n            params: { page, search }\n        })).data\n        results.push(...response.results)\n    }\n    return results\n}\n\nexport async function getDataset(datasetId: number): Promise<Dataset>{\n    return (await apiClient.get(`/datasets/${datasetId}`)).data\n}\n\nexport async function subsetDataset(datasetId: number, formData: Object): Promise<Dataset>{\n    return (await apiClient.post(`/datasets/${datasetId}/subset/`, formData)).data\n}\n\nexport async function setDatasetThumbnail(datasetId: number, encoding: string) {\n    return (await apiClient.post(`/datasets/${datasetId}/thumbnail/`, {\n        encoding\n    })).data\n}\n\nexport async function setProjectThumbnail(projectId: number, encoding: string) {\n    return (await apiClient.post(`/projects/${projectId}/thumbnail/`, {\n        encoding\n    })).data\n}\n\nexport async function getSubjectsForDataset(datasetId: number): Promise<Subject[]> {\n    return (await apiClient.get('/subjects', {\n        params: {dataset: datasetId}\n    })).data?.results\n}\n\nexport async function getProjectsForDataset(search: string | undefined, datasetId: number): Promise<Project[]>{\n    const results: Project[] = []\n    let page = 1\n    let response = (await apiClient.get(`/projects`, {\n        params: { page, search, dataset: datasetId }\n    })).data\n    results.push(...response.results)\n    while(response.next){\n        page += 1\n        response = (await apiClient.get(`/projects`, {\n            params: { page, search, dataset: datasetId }\n        })).data\n        results.push(...response.results)\n    }\n    return results\n}\n\nexport async function refreshProject(projectId: number) {\n    return (await apiClient.get(`/projects/${projectId}`)).data\n}\n\nexport async function getProjectFileContents(projectFileURL: string) {\n    const resp = await fetch(projectFileURL);\n    return (await resp.json())\n}\n\nexport async function getTasksForProject(projectId: number): Promise<Task[]> {\n    return (await apiClient.get('/task-progress', {\n        params: { project: projectId}\n    })).data?.results\n}\n\nexport async function getSubject(subjectId: number): Promise<Subject>{\n    return (await apiClient.get(`/subjects/${subjectId}`)).data\n}\n\nexport async function getDataObjectsForSubject(subjectId: number): Promise<DataObject[]> {\n    const dataTypes = ['image', 'segmentation', 'mesh']\n    return (await Promise.all(dataTypes.map((type) => {\n        return apiClient.get(`/${type}${type == 'mesh' ?'es' :'s'}/`, {\n            params: {subject: subjectId}\n        })\n    }))).map((response, index) => {\n        return response.data?.results.map((result: DataObject) => {\n            const type = dataTypes[index]\n            if(type !== 'image'){\n                // don't await this, let particles and groomed shapes load in after\n                loadParticlesForObject(type, result.id)\n                loadGroomedShapeForObject(type, result.id)\n            }\n            return Object.assign(result, {type})\n        })\n    }).flat(2)\n}\n\nexport async function getOptimizedParticlesForDataObject(\n    type: string, id: number, projectId: number|undefined\n){\n    return (await apiClient.get('/optimized-particles', {\n        params: {[`original_${type}`]: id, project: projectId}\n    })).data?.results\n}\n\nexport async function getGroomedShapeForDataObject(\n    type: string, id: number, projectId: number|undefined\n) {\n    if (type !== 'image') {\n        const plural = `${type}${type == 'mesh' ?'es' :'s'}`\n        return (await apiClient.get(`/groomed-${plural}`, {\n            params: {[type]: id, project: projectId}\n        })).data?.results\n    }\n}\n\nexport async function getReconstructedSamplesForProject(\n    type: string, id: number, projectId: number|undefined\n){\n    return (await apiClient.get(`/reconstructed-samples/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMResultForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-result/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMAugPairsForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-aug-pair/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMTrainingPairsForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-training-pair/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMTrainingImagesForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-training-image/`, {\n        params: {project: projectId, page_size: 100}\n    })).data?.results\n}\n\nexport async function getDeepSSMTestImagesForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-testing-data/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function createProject(formData: Record<string, any>){\n    return (await apiClient.post(`/projects/`, formData))\n}\n\nexport async function cloneProject(projectId: number){\n    return (await apiClient.post(`/projects/${projectId}/clone/`))\n}\n\nexport async function deleteProject(projectId: number){\n    return (await apiClient.delete(`/projects/${projectId}/`))\n}\n\nexport async function editProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.put(`/projects/${projectId}/`, formData));\n}\n\nexport async function groomProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.post(`/projects/${projectId}/groom/`, formData))\n}\n\nexport async function optimizeProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.post(`/projects/${projectId}/optimize/`, formData))\n}\n\nexport async function analyzeProject(projectId: number, params: AnalysisParams){\n    return (await apiClient.post(`/projects/${projectId}/analyze/`, params))\n}\n\nexport async function deepssmRunProject(projectId: number, formData: Record<string, any>) {\n    return (await apiClient.post(`/projects/${projectId}/deepssm-run/`, formData))\n}\n\nexport async function getTaskProgress(taskId: number){\n    return (await apiClient.get(`/task-progress/${taskId}`)).data\n}\n\nexport async function abortTask(taskId: number) {\n    return (await apiClient.post(`/task-progress/${taskId}/abort/`)).data\n}\n\nexport async function saveLandmarkData(\n    projectId: number,\n    landmarkInfo: LandmarkInfo[],\n    landmarkLocations: Record<number, Record<number, number[][]>>\n) {\n    return (await apiClient.post(`/projects/${projectId}/landmarks/`, {\n        info: landmarkInfo,\n        locations: landmarkLocations,\n    })).data\n}\n\nexport async function saveConstraintData(\n    projectId: number,\n    constraintLocations: Record<number, Record<number, number[][]>>\n) {\n    return (await apiClient.post(`/projects/${projectId}/constraints/`, {\n        locations: constraintLocations,\n    })).data\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app',[_c('nav-bar'),_c('v-main',[_c('router-view')],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":!_vm.oauthClient.isLoggedIn,\"opacity\":0.8}},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.logIn}},[_vm._v(\" Log in to Continue \")])],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.loadingState,\"opacity\":0.8}},[_c('v-card',{attrs:{\"flat\":\"\",\"width\":\"200px\"}},[_c('v-progress-linear',{staticClass:\"mb-0\",attrs:{\"indeterminate\":\"\",\"color\":\"white\"}})],1)],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.currentError !== undefined,\"opacity\":0.8}},[_c('v-card',{staticClass:\"pa-5\"},[_c('v-btn',{staticClass:\"pa-3\",staticStyle:{\"float\":\"right\"},attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.currentError = undefined}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-card-title',[_vm._v(\" Error: \")]),(_vm.currentError && _vm.currentError.length)?_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.currentError)+\" \")]):_c('v-card-text',[_vm._v(\" An error has occurred. \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app-bar',{attrs:{\"app\":\"\",\"height\":\"50px\"}},[_c('div',{staticClass:\"d-flex align-center px-5\",on:{\"click\":_vm.navigateToHome}},[_c('v-img',{attrs:{\"alt\":\"ShapeWorks Logo\",\"src\":\"favicon.ico\",\"transition\":\"scale-transition\",\"width\":\"55px\"}}),_c('v-toolbar-title',{staticClass:\"text-h6\"},[_vm._v(\"ShapeWorks\")])],1),_c('v-spacer'),(!(_vm.selectedDataset && _vm.selectedProject) && !(_vm.router.currentRoute.params.dataset && _vm.router.currentRoute.params.project))?_c('filter-search'):_vm._e(),_c('v-spacer'),(_vm.oauthClient.isLoggedIn)?_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.logInOrOut}},[_vm._v(\" Logout \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-chip',[_c('v-text-field',{attrs:{\"autofocus\":\"\",\"rounded\":\"\",\"hide-details\":\"\"},on:{\"input\":_vm.navigateToResults},scopedSlots:_vm._u([{key:\"prepend-inner\",fn:function(){return [_c('v-icon',[_vm._v(\" mdi-magnify \")])]},proxy:true},{key:\"append\",fn:function(){return [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('span',_vm._g(_vm._b({},'span',attrs,false),on),[_c('v-icon',[_vm._v(\" mdi-information-outline \")])],1)]}}])},[_c('span',[_vm._v(\"Search ShapeWorks \"+_vm._s((_vm.selectedDataset) ? \"projects\" : \"datasets\")+\" by name, description, and keywords\")])])]},proxy:true}]),model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { ref } from 'vue'\nimport router from '@/router';\nimport { selectedDataset, selectedProject } from '@/store';\n\nexport default {\n    setup() {\n      const searchText = ref(router.currentRoute.params.searchText)\n\n      async function navigateToResults() {\n        // use store functions\n        let targetUrl = \"/\"\n        if (selectedDataset.value) {\n            targetUrl = `/dataset/${selectedDataset.value.id}/`\n        }\n\n        if (searchText.value) {\n            targetUrl = targetUrl + `search/${searchText.value}`\n        }\n\n        router.push(targetUrl);\n      }\n\n      router.beforeEach(async (to, from, next) => {\n        if (!to.params.searchText) searchText.value = ''\n        else searchText.value = to.params.searchText;\n        next()\n      })\n\n      return {\n        searchText,\n        selectedDataset,\n        selectedProject,\n        navigateToResults\n      }\n    },\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterSearch.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterSearch.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./FilterSearch.vue?vue&type=template&id=0af564f2\"\nimport script from \"./FilterSearch.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterSearch.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { computed } from 'vue'\nimport { logout, oauthClient } from '@/api/auth';\nimport { allDatasets, loadingState, selectedDataset, selectedProject } from '@/store';\nimport FilterSearch from './FilterSearch.vue';\nimport router from '@/router';\nimport { getDatasets } from '@/api/rest';\n\n\nexport default {\n    components: {\n      FilterSearch\n    },\n    setup() {\n      const params = computed(() => ({\n        dataset: selectedDataset.value?.id,\n        project: selectedProject.value?.id\n      }))\n\n      async function logInOrOut() {\n          if (oauthClient.isLoggedIn) {\n            await logout();\n            window.location.reload();\n          } else {\n            oauthClient.redirectToLogin();\n          }\n      }\n\n      async function navigateToHome() {\n        selectedDataset.value = undefined\n        selectedProject.value = undefined\n        if (router.currentRoute.path !== '/') {\n          router.push('/')\n        }\n        loadingState.value = true;\n        allDatasets.value = (await getDatasets(undefined)).sort((a, b) => {\n            if(a.created < b.created) return 1;\n            if(a.created > b.created) return -1;\n            return 0;\n        });\n        loadingState.value = false;\n      }\n\n      return {\n          oauthClient,\n          params,\n          logInOrOut,\n          selectedDataset,\n          selectedProject,\n          navigateToHome,\n          router,\n      }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./NavBar.vue?vue&type=template&id=0445ecb9\"\nimport script from \"./NavBar.vue?vue&type=script&lang=ts\"\nexport * from \"./NavBar.vue?vue&type=script&lang=ts\"\nimport style0 from \"./NavBar.vue?vue&type=style&index=0&id=0445ecb9&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport NavBar from './components/NavBar';\nimport { oauthClient } from './api/auth';\nimport { loadingState, currentError } from './store';\n\nexport default {\n    components: {\n        NavBar,\n    },\n    setup() {\n        const logIn = () => {\n            oauthClient.redirectToLogin();\n        }\n        return {\n            oauthClient,\n            logIn,\n            loadingState,\n            currentError,\n        }\n    },\n}\n</script>\n\n<template>\n    <v-app>\n        <nav-bar />\n        <v-main>\n            <router-view />\n        </v-main>\n\n        <v-overlay\n            absolute\n            :value=\"!oauthClient.isLoggedIn\"\n            :opacity=\"0.8\"\n        >\n            <v-btn\n                color=\"primary\"\n                @click=\"logIn\"\n            >\n              Log in to Continue\n            </v-btn>\n        </v-overlay>\n\n        <v-overlay\n            absolute\n            :value=\"loadingState\"\n            :opacity=\"0.8\"\n        >\n            <v-card flat width=\"200px\">\n              <v-progress-linear\n                indeterminate\n                color=\"white\"\n                class=\"mb-0\"\n              ></v-progress-linear>\n          </v-card>\n        </v-overlay>\n\n        <v-overlay\n            absolute\n            :value=\"currentError !== undefined\"\n            :opacity=\"0.8\"\n        >\n            <v-card class=\"pa-5\">\n                <v-btn\n                    icon\n                    @click.stop=\"currentError = undefined\"\n                    class=\"pa-3\"\n                    style=\"float:right\"\n                >\n                    <v-icon>mdi-close</v-icon>\n                </v-btn>\n                <v-card-title>\n                    Error:\n                </v-card-title>\n                <v-card-text v-if=\"currentError && currentError.length\">\n                    {{ currentError }}\n                </v-card-text>\n                <v-card-text v-else>\n                    An error has occurred.\n                </v-card-text>\n          </v-card>\n        </v-overlay>\n    </v-app>\n</template>\n\n<style>\nhtml {\n    overflow-y: auto !important;\n}\n.v-overlay {\n    top: -100%!important;\n}\n.v-overlay__content {\n    top: 50vh;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4b64ca4f\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4b64ca4f&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        dark: true,\n    },\n});\n","import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport vuetify from './plugins/vuetify';\nimport { restoreLogin } from './api/auth';\n\n\nasync function login() {\n  return restoreLogin();\n}\n\nlogin().then(() => {\n  new Vue({\n    router,\n    vuetify,\n    render: (h) => h(App),\n  }).$mount('#app');\n});\n","\nimport { ref, watch } from 'vue'\nimport Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport 'vuetify/dist/vuetify.min.css'\nimport VJsf from '@koumoul/vjsf'\nimport '@koumoul/vjsf/dist/main.css'\nimport Ajv from 'ajv';\nimport defaults from 'json-schema-defaults';\nimport {\n    allDataObjectsInDataset, groomFormData, optimizationFormData, selectedProject,\n} from '@/store';\nimport { DataObject } from '../types/index';\nimport TaskInfo from './TaskInfo.vue'\n\nVue.use(Vuetify)\n\n\nexport default {\n    props: {\n        form: {\n            type: String,\n            required: true,\n        },\n        prerequisite: {\n            type: Function,\n            default: () => true\n        },\n        prerequisite_unfulfilled: {\n            type: String,\n            required: false,\n        },\n    },\n    components: {\n        VJsf,\n        TaskInfo,\n    },\n    setup(props) {\n        const ajv = new Ajv();\n        const formDefaults = ref();\n        const formData = ref({});\n        const formSchema = ref();\n        const formValid = ref(false);\n\n        function overwriteFormDefaultsFromProjectFile() {\n            const file_contents = selectedProject.value?.file_contents\n            if (file_contents) {\n                const newDefaults = {}\n                const parseNewDefaults = (data: Object) => {\n                    if (data) {\n                        Object.entries(data).forEach(([key, value]) => {\n                            if (value === \"True\") value = true\n                            else if (value === \"False\") value = false\n                            else if (typeof value === 'string' && !isNaN(parseFloat(value))) value = parseFloat(value)\n                            newDefaults[key] = value\n                        })\n                    }\n                }\n\n                const section: Record<string, Object> = file_contents[props.form]\n                if (section && props.form === 'groom') {\n                    // section organized by anatomies, pick first\n                    const data = Object.values(section)[0] as Object\n                    if (data) parseNewDefaults(data)\n                } else if (section && props.form === 'optimize') {\n                    parseNewDefaults(section)\n                }\n                formDefaults.value = Object.fromEntries(\n                    Object.entries(formDefaults.value).map(([sName, sData]: [string, any]) => {\n                        if (!sData) return [sName, sData]\n                        return [sName, Object.fromEntries(\n                            // @ts-ignore\n                            Object.entries(sData).map(([key, value]) => {\n                                if (newDefaults[key]) return [key, newDefaults[key]]\n                                return [key, value]\n                            })\n                        )]\n                    })\n                )\n            }\n        }\n\n        async function fetchFormSchema() {\n            let formName = props.form\n            if(formName === 'groom'){\n                const types = allDataObjectsInDataset.value.map((obj: DataObject) => obj.type)\n                if(types.some((type: string) => type === 'segmentation')) {\n                    formName += '_segmentation'\n                } else {\n                    formName += '_mesh'\n                }\n            }\n\n            formSchema.value = await (await fetch( `forms/${formName}.json`)).json()\n            formDefaults.value = defaults(formSchema.value)\n            overwriteFormDefaultsFromProjectFile()\n\n            formData.value = formDefaults.value\n        }\n        fetchFormSchema()\n\n        function evaluateExpression (expression: string) {\n            if(expression){\n                // The schemas are trusted source code\n                const expressionFunc = eval(expression)\n                return expressionFunc(formData.value)\n            }\n            return true;\n        }\n\n        const schemaOptions = {\n            rootDisplay: \"expansion-panels\",\n            autoFocus: true,\n            ajv,\n            sliderProps: {\n                thumbLabel: true\n            },\n            tooltipProps: {\n                openOnHover: true,\n                top: true\n            }\n        }\n\n        function simplifyFormData(formData) {\n            let payload;\n            Object.keys(formData).forEach((key) => {\n                if (key.includes(\"section\") || key.includes(\"analysis\")) {\n                    const value = formData[key]\n                    payload = {\n                        ...payload,\n                        ...value,\n                    }\n                } else {\n                    payload[key] = formData[key]\n                }\n            })\n            return payload\n        }\n\n        watch(formData, () => {\n            const payload = simplifyFormData(formData.value)\n            if (props.form === 'optimize') {\n                optimizationFormData.value = payload\n            } else if (props.form === 'groom') {\n                groomFormData.value = payload\n            }\n        }, {deep:true})\n\n        function resetForm() {\n            formData.value = formDefaults.value\n        }\n\n        return {\n            props,\n            schemaOptions,\n            formData,\n            formDefaults,\n            formSchema,\n            formValid,\n            simplifyFormData,\n            resetForm,\n            evaluateExpression,\n        }\n    },\n}\n","import { ref } from 'vue'\nimport {\n    selectedProject,\n    groomedShapesForOriginalDataObjects,\n    reconstructionsForOriginalDataObjects,\n    particlesForOriginalDataObjects\n} from '.';\n\nexport const layers = ref<Record<string, any>[]>([\n    {\n        name: 'Original',\n        color: 'white',\n        rgb: [1, 1, 1],\n        available: () => true,\n    },\n    {\n        name: 'Groomed',\n        color: 'green',\n        rgb: [0, 1, 0],\n        available: () => {\n            return Object.values(groomedShapesForOriginalDataObjects.value)\n            .map((obj) => Object.values(obj).flat()).flat().length > 0\n        }\n    },\n    {\n        name: 'Reconstructed',\n        color: 'red',\n        rgb: [1, 0, 0],\n        available: () => {\n            return reconstructionsForOriginalDataObjects.value?.length > 0\n        },\n    },\n    {\n        name: 'Particles',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return Object.values(particlesForOriginalDataObjects.value)\n            .map((obj) => Object.values(obj).flat()).flat().length > 0\n        }\n    },\n    {\n        name: 'Landmarks',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return selectedProject.value?.landmarks_info && selectedProject.value.landmarks_info.length > 0\n        }\n    },\n    {\n        name: 'Constraints',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return selectedProject.value?.constraints && selectedProject.value.constraints.length > 0\n        }\n    }\n])\n\nexport const vtkShapesByType = ref<Record<string, any[]>>({\n    \"Original\": [],\n    \"Groomed\": [],\n    \"Reconstructed\": [],\n    \"Particles\": [],\n    \"DeepSSM\": [],\n})\n\nexport const SPHERE_RESOLUTION = 32;\n\nexport const COLORS = [\n    [166, 206, 227],\n    [31, 120, 180],\n    [178, 223, 138],\n    [51, 160, 44],\n    [251, 154, 153],\n    [227, 26, 28],\n    [253, 191, 111],\n    [255, 127, 0],\n    [202, 178, 214],\n    [106, 61, 154],\n    [255, 255, 153],\n    [177, 89, 40],\n];\n\nexport const DEEPSSM_SAMPLES_PER_PAGE = 12;\n","function crossProduct(v1, v2) {\n    return [\n        (v1[1] * v2[2] - v1[2] * v2[1]),\n        (v1[2] * v2[0] - v1[0] * v2[2]),\n        (v1[0] * v2[1] - v1[1] * v2[0]),\n    ]\n}\n\nfunction addVectors(v1, v2) {\n    return [\n        v1[0] + v2[0],\n        v1[1] + v2[1],\n        v1[2] + v2[2],\n    ]\n}\n\nfunction subtractVectors(v1, v2) {\n    return [\n        v1[0] - v2[0],\n        v1[1] - v2[1],\n        v1[2] - v2[2],\n    ]\n}\n\nfunction normalizeVector(v) {\n    const magnitude = Math.sqrt(\n        Math.pow(v[0], 2) +\n        Math.pow(v[1], 2) +\n        Math.pow(v[2], 2)\n    )\n    return [\n        v[0] / magnitude,\n        v[1] / magnitude,\n        v[2] / magnitude,\n    ]\n}\n\nexport default async function (url: string | undefined) {\n    const constraintList: {type: string, data: any, name: string}[] = []\n    if (url) {\n        const resp = await fetch(url);\n        const json = await resp.json()\n        json.planes?.forEach(({points, name}) => {\n            // must contain 3 points\n            if (points && points.length === 3) {\n                const [p1, p2, p3] = points\n                const v1 = subtractVectors(p1, p3)\n                const v2 = subtractVectors(p1, p2)\n                // v1 and v2 are parallel to plane, normal is vector product of v1 and v2\n                const normal = normalizeVector(crossProduct(v1, v2))\n                const origin = p1\n                constraintList.push({\n                    type: 'plane',\n                    data : { origin, normal },\n                    name\n                })\n            }\n        })\n        if (json.free_form_constraints) {\n            constraintList.push({\n                type: 'paint',\n                data: json.free_form_constraints,\n                name: json.free_form_constraints.name,\n            })\n        }\n    }\n    return constraintList\n}\n\n\n\nexport function convertConstraintDataForDB(shapeLocations, shapeInfos) {\n    const constraintJSON: Record<string, any> = {}\n    shapeInfos.forEach((cInfo) => {\n        const indexForShape = shapeInfos\n            .filter((info) => info.type === cInfo.type && info.domain === cInfo.domain)\n            .findIndex((info) => info.id === cInfo.id)\n        const locations = shapeLocations.filter((cData) => cData.type === cInfo.type)\n\n        // location not set, skip this iteration\n        if (locations.length <= indexForShape) return\n        const cData = locations[indexForShape]\n        if (cInfo.type === 'plane') {\n            if (!constraintJSON.planes) constraintJSON.planes = []\n            const { origin, normal } = cData.data\n\n            const v1 = crossProduct(normal, [1, 0, 0])\n            const v2 = crossProduct(normal, [0, 1, 0])\n\n            const p1 = origin;\n            const p2 = addVectors(origin, normal[2] > 0 ? v2 : v1)\n            const p3 = addVectors(origin, normal[2] > 0 ? v1 : v2)\n\n            const planeData: Record<string, any> = {points: [p1, p2, p3]}\n            if (cInfo.name) {\n                planeData.name = cInfo.name\n            }\n            constraintJSON.planes.push(planeData)\n        } else if (cInfo.type === 'paint') {\n            const paintData: Record<string, any> = cData.data\n            if (cInfo.name) {\n                paintData.name = cInfo.name\n            }\n            constraintJSON.free_form_constraints = paintData\n        }\n    })\n\n    return constraintJSON\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=style&index=0&id=2c7f5574&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=style&index=0&id=514b7fe8&prod&lang=css\""],"sourceRoot":""}